{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Sur Arch Linux, Il m&#x27;arrive parfois de vouloir installer un package (ex: <code>mailspring</code>) avec une version très récente et qui n&#x27;est pas encore packagé dans les dépôts AUR.</p><p>Voici la procédure que j&#x27;utilise pour télécharger, modifier et installer un package AUR afin d&#x27;avoir la dernière version de mon logiciel.</p><h2>Télécharger le package AUR</h2><p>Téléchargez le package AUR avec une commande <code>yay</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">yay -G mailspring\n</code></pre></div><p>Récupérez la valeur sha256 du package en le téléchargeant manuellement :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">wget https://github.com/Foundry376/Mailspring/releases/download/1.9.2/mailspring-1.9.2-amd64.deb\nsha256sum mailspring-1.9.2-amd64.deb\n# a3bc365c77791673d8b7d8fc2081b2e8e80ab5d78d6ffa99f848971849f43544\n</code></pre></div><h2>Modifier le package</h2><p>Je renseigne cette valeur dans le fichier <code>PKGBUILD</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-diff\">index 66c3d17..3fbe5a4 100755\n--- a/PKGBUILD\n+++ b/PKGBUILD\n@@ -5,7 +5,7 @@\n # Contributor: ahrs\n\n pkgname=mailspring\n-pkgver=1.9.1\n+pkgver=1.9.2\n pkgrel=1\n pkgdesc=&quot;A beautiful, fast and maintained fork of Nylas Mail by one of the original authors.&quot;\n arch=(&#x27;x86_64&#x27;)\n@@ -16,7 +16,7 @@ options=(&#x27;!strip&#x27;)\n source=()\n\n source_x86_64=(&quot;https://github.com/Foundry376/Mailspring/releases/download/${pkgver}/mailspring-${pkgver}-amd64.deb&quot;)\n-sha256sums_x86_64=(&#x27;99fa700d84691542c3f5387cb48e72a9be516166491daadb598a5f292dd0ea61&#x27;)\n+sha256sums_x86_64=(&#x27;a3bc365c77791673d8b7d8fc2081b2e8e80ab5d78d6ffa99f848971849f43544&#x27;)\n\n depends=(&quot;libxss&quot; &quot;libtool&quot; &quot;c-ares&quot; &quot;ctemplate&quot; &quot;tidy&quot; &quot;libxkbfile&quot; &quot;libsecret&quot; &quot;gtk3&quot; &quot;nss&quot; &quot;libglvnd&quot;)\n</code></pre></div><h2>Installer le nouveau package</h2><p>Puis installez le package modifié avec une commande suivante <code>makepkg</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">makepkg -si\n</code></pre></div><h2>Partager les modifications</h2><p>Pour partager votre modification aux autres, commencez par créer une clé ssh :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ssh-keygen -f ~/.ssh/aur\n</code></pre></div><p>Ensuite, ajoutez les lignes suivantes dans votre fichier <code>~/.ssh/config</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-txt\">Host aur.archlinux.org\n  IdentityFile ~/.ssh/aur\n  User aur\n</code></pre></div><p>Puis envoyez vos modifications :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">git remote set-url origin ssh://aur@aur.archlinux.org/&lt;pkgname&gt;.git\ngit push origin master\n</code></pre></div><hr/><p>Références :</p><ul>\n<li>\n<a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a>\n\n</li>\n<li>\n<a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Yay\">Yay</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"Package AUR.md","fileName":"Package AUR","title":"Installer une version modifié d'un package AUR sur Arch Linux","comments":true,"permalink":"installer-une-version-modifie-dun-package-aur-sur-arch-linux","datePublished":"2021-09-16T22:10","dateUpdated":"2021-09-16T22:10","publish":true,"rss":true,"note":"71"},"__N_SSG":true}