{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Storybook permet de créer des composants d&#x27;interface utilisateur indépendamment de la logique métier, des données et du contexte d&#x27;une application.</p><p>Je l&#x27;utilise pour isoler chacun de mes composants et les visualiser indépendamment des autres.</p><p>Ça m&#x27;incite à développer et debugger chaque composant une seule fois plutôt que de devoir le refaire plusieurs fois à 10 endroits différents.</p><h2>Installation</h2><p>Si vous n&#x27;avez pas encore de projet, créez-en un avec la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">npm init --force\n</code></pre></div><p>Pour installer Storybook, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">npx sb init\n</code></pre></div><h2>Utilisation</h2><p>Pour lancer Storybook, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">npm run storybook\n</code></pre></div><p>Rendez-vous sur http://localhost:6006</p><h2>Exemple de storybook</h2><p>Voici un exemple de storybook pour un composant <code>header</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-js\">// components/header.stories.jsx\n\nimport Header from &#x27;./header&#x27;;\n\nexport default {\n    title: &#x27;Components/Header&#x27;,\n    component: Header,\n};\n\nconst Template = (args) =&gt; &lt;Header {...args} /&gt;;\n\nexport const Default = Template.bind({});\n</code></pre></div><h2>Installer le plugin storybook-tailwind-dark-mode</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">yarn add -D storybook-tailwind-dark-mode\n</code></pre></div><p>N&#x27;oubliez pas d&#x27;activer le darkMode en attribuant la valeur <code>class</code> au fichier <code>tailwind.config.js</code>, cela permettra de prendre en compte les classes html <code>dark:</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">// tailwind.config.js\n\nmodule.exports = {\n    darkMode: &#x27;class&#x27;,\n};\n</code></pre></div><h2>Ajouter le support des CSS modules</h2><p>Pour ajouter le support des <a class=\"\" target=\"_blank\" href=\"https://github.com/css-modules/css-modules\">CSS Modules</a>, ajouter les lignes suivantes :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-diff\">module.exports = {\n    stories: [&#x27;../**/*.stories.mdx&#x27;, &#x27;../**/*.stories.@(js|jsx|ts|tsx)&#x27;],\n    addons: [\n        &#x27;storybook-tailwind-dark-mode&#x27;,\n        &#x27;@storybook/addon-links&#x27;,\n        &#x27;@storybook/addon-essentials&#x27;,\n        {\n            name: &#x27;@storybook/addon-postcss&#x27;,\n            options: {\n                postcssLoaderOptions: {\n                    implementation: require(&#x27;postcss&#x27;),\n                },\n+               cssLoaderOptions: {\n+                   modules: {\n+                       auto: true,\n+                   },\n+               },\n            },\n        },\n    ],\n    framework: &#x27;@storybook/react&#x27;,\n};\n</code></pre></div><h2>Ajouter le support des images sur Next.js</h2><p>Pour ajouter le support des <a class=\"\" target=\"_blank\" href=\"https://nextjs.org/docs/api-reference/next/image\">images sur Next.js</a>, ajoutez les lignes suivantes :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-diff\">import &#x27;../styles/globals.css&#x27;;\n\n+ import * as nextImage from &#x27;next/image&#x27;;\n\n+ Object.defineProperty(nextImage, &#x27;default&#x27;, {\n+   configurable: true,\n+   value: (props) =&gt; &lt;img {...props} /&gt;,\n+ });\n\nexport const parameters = {\n    actions: { argTypesRegex: &#x27;^on[A-Z].*&#x27; },\n    controls: {\n        matchers: {\n            color: /(background|color)$/i,\n            date: /Date$/,\n        },\n    },\n};\n</code></pre></div><h2>Ajouter des décorateurs</h2><p>Pour toutes le stories d&#x27;un composant :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-js\">export default {\n    title: &#x27;Components/Layout&#x27;,\n    component: Layout,\n    decorators: [(Story) =&gt; &lt;div id=&quot;storybook&quot;&gt;{Story()}&lt;/div&gt;],\n};\n</code></pre></div><p>Pour chaque stories d&#x27;un composant :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-js\">export const Default = Template.bind({});\n\nDefault.args = {\n    ...Layout.defaultProps,\n    children: &lt;section className=&quot;pt-20 px-4 container mx-auto lg:max-w-screen-lg&quot;&gt;Hello world&lt;/section&gt;,\n};\n\nDefault.decorators = [(Story) =&gt; &lt;div id=&quot;storybook&quot;&gt;{Story()}&lt;/div&gt;];\n</code></pre></div><hr/><p>Références :</p><ul>\n<li>https://storybook.js.org/</li>\n<li><a class=\"\" target=\"_blank\" href=\"https://gitlab-org.gitlab.io/gitlab-ui/?path=/story/base-accordion--default\">Exemple de storybook</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://youtube.com/watch?v=CLwX9EWlWJM\">Grafikart - Tutoriel JavaScript : Storybook</a></li>\n<li>\n<a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Design%20system\">Design system</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"Storybook.md","fileName":"Storybook","title":"Storybook","comments":true,"permalink":"storybook","datePublished":"2021-12-19T17:57","dateUpdated":"2024-03-04T17:57:00","publish":true,"rss":true,"note":"84"},"__N_SSG":true}