{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><blockquote class=\"callout info\">\n                    \n                        <div class=\"callout-title\">\n                            <div class=\"callout-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg></div>\n                            <div class=\"callout-title-inner\">info</div>\n                        </div>\n                    \n                    <div class=\"callout-content\">\n                        <p>Archived content</p>\n                    </div>\n                </blockquote><p>I looked for solutions to expose a local server behind a NAT or firewall. Here&#x27;s what I found.</p><h2>Solution 1: VPN with port forwarding (with docker)</h2><p>For this solution, you must have a server outside your local network, a <a class=\"\" target=\"_blank\" href=\"https://scaleway.com/pricing/\">scaleway C1 server</a> is enough.</p><h3>1. Install VPN on your server with docker (server-side)</h3><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">CID=$(docker run -d --name dockvpn --restart=always --privileged --net=host ston3o/dockvpn)\n</code></pre></div><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker run -t -i -p 8080:8080 --volumes-from $CID ston3o/dockvpn serveconfig\n</code></pre></div><h3>2. Port forwarding (server-side)</h3><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -A PREROUTING -t nat -i eth0 -p tcp -d &lt;src_ip&gt; -j DNAT --to-destination &lt;dest_ip&gt;\n</code></pre></div><h3>3. Download ovpn file and connect to your VPN (client-side)</h3><p>Go to <a class=\"\" target=\"_blank\" href=\"http://server:8080\">http://server:8080</a> and execute <code>openvpn myvpn.ovpn</code></p><h2>Solution 2: VPN with dedicated IP</h2><p>You can use a VPN like <a class=\"\" target=\"_blank\" href=\"https://purevpn.com/dedicated-ip.php\">purvpn</a> to obtain a dedicated IP for 1,99$ per month or <a class=\"\" target=\"_blank\" href=\"https://ipjetable.net/\">ipjetable</a> for free.</p><h2>Solution 3: UPNP</h2><p>You can open ports with UPNP protocol (only 1024-65535 ports are allowed):</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">upnpc -a &lt;ip&gt; &lt;port&gt; &lt;external_port&gt; &lt;protocol&gt;\n</code></pre></div><p>Example: <code>upnpc -a 192.168.1.25 8888 8888 tcp</code></p><h2>Solution 4: tor2web</h2><p>Use tor network and tor2web to expose your web server:</p><ol>\n<li>Install tor: <code>apt-get install tor</code></li>\n<li>Bind your web server with tor</li>\n</ol><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-conf\"># /etc/tor/torrc\nHiddenServiceDir /var/lib/tor/hidden_service/\nHiddenServicePort 80 127.0.0.1:80\n</code></pre></div><ol>\n<li>Start tor: <code>systemctl start tor</code></li>\n<li>Get your hostname.onion <code>cat /var/lib/tor/hidden_service/hostname</code></li>\n<li>Go to your website *.onion.sh (tor2web)</li>\n</ol><h2>Solution 5: Tunnels</h2><ul>\n<li><a class=\"\" target=\"_blank\" href=\"https://ngrok.com/\">ngrok</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://pagekite.net/\">pagekite</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://localtunnel.me/\">localtunnel</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://yaler.net/\">yaler</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/andydunstall/pico\">pico</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/amalshaji/portr\">portr</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/ekzhang/bore\">bore</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/fosrl/pangolin\">pangolin</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/punkpeye/pipenet\">pipenet</a></li>\n<li>\n<a class=\"\" href=\"/zerotier\">Zerotier</a>\n\n</li>\n<li>Cloudflare Tunnel</li>\n<li>AWS Direct Connect</li>\n</ul></div>","isIndex":false,"file":"Tunneling.md","fileName":"Tunneling","title":"Multiple ways to expose a local server behind NAT or firewall","comments":true,"permalink":"how-to-expose-local-server-behind-firewall","description":"I looked for solutions to expose a local server behind a NAT or firewall. Here's what I found.","datePublished":"2017-08-14T12:20","dateUpdated":"2017-08-14T12:20","aliases":"","publish":true,"rss":true},"__N_SSG":true}