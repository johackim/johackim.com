{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Pour générer des images de manière dynamique en Node.js, il existe la librairie <code>node-canvas</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">yarn add -D canvas canvas-txt\n</code></pre></div><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-js\">// script.js\nconst fs = require(&#x27;fs&#x27;);\nconst { createCanvas } = require(&#x27;canvas&#x27;);\nconst { default: canvasTxt } = require(&#x27;canvas-txt&#x27;);\n\nconst createImage = (text, path = &#x27;image.jpg&#x27;, width = 1600, height = 900) =&gt; {\n    const canvas = createCanvas(width, height);\n    const ctx = canvas.getContext(&#x27;2d&#x27;);\n\n    ctx.fillStyle = &#x27;#101827&#x27;;\n    ctx.fillRect(0, 0, width, height);\n\n    canvasTxt.fontSize = 72;\n    canvasTxt.fontWeight = 500;\n    canvasTxt.font = &#x27;Roboto&#x27;;\n    canvasTxt.align = &#x27;center&#x27;;\n    canvasTxt.vAlign = &#x27;middle&#x27;;\n    ctx.fillStyle = &#x27;#E5E7EB&#x27;;\n    canvasTxt.drawText(ctx, text, 0, canvas.height / 4, canvas.width - 10, canvas.height / 2);\n\n    const buffer = canvas.toBuffer(&#x27;image/jpeg&#x27;);\n    fs.writeFileSync(path, buffer);\n};\n\ncreateImage(&#x27;Hello World!&#x27;);\n</code></pre></div><p>Lorsque j&#x27;exécute ce script (<code>node script.js</code>), une image avec un fond gris et un texte blanc &quot;Hello World!&quot; sera créée.</p><p>C&#x27;est cette librairie que j&#x27;utilise pour générer automatiquement toutes les previews de mon <a class=\"\" target=\"_blank\" href=\"https://johackim.com\">Digital Garden</a>.</p><hr/><p>Références :</p><ul>\n<li>\n<a class=\"\" href=\"/programmation\">Programmation</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"node-canvas.md","fileName":"node-canvas","title":"Générer dynamiquement des images avec node-canvas","comments":true,"permalink":"generer-dynamiquement-des-images-avec-node-canvas","datePublished":"2021-07-05T16:31","dateUpdated":"2021-07-05T16:31","publish":true,"rss":true,"note":"57"},"__N_SSG":true}