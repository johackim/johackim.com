{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Iptables est un pare-feu pour Linux. Il permet de bloquer ou d&#x27;autoriser des connexions entrantes et sortantes.</p><h2>Installation</h2><p>Pour installer iptables sur Ubuntu/Debian, il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">sudo apt install -y iptables\n</code></pre></div><p>Sur Arch Linux, il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">sudo pacman -S iptables\n</code></pre></div><h2>Bloquer toutes les connexions entrantes</h2><p>Pour bloquer toutes les connexions entrantes, il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -P INPUT DROP\n</code></pre></div><h2>Autoriser toutes les connexions sortantes</h2><p>Pour autoriser toutes les connexions sortantes, il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -P OUTPUT ACCEPT\n</code></pre></div><h2>Autoriser les connexions provenant de l&#x27;interface de loopback</h2><p>L&#x27;interface de loopback permet de communiquer avec le serveur lui-même via l&#x27;adresse IP 127.0.0.1.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -A INPUT -i lo -j ACCEPT\n</code></pre></div><h2>Autoriser le protocole ICMP</h2><p>Le protocole ICMP permet de communiquer avec le serveur via la commande <code>ping</code>.</p><p>Pour l&#x27;autoriser, il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -A INPUT -p icmp -j ACCEPT\n</code></pre></div><h2>Autoriser un port spécifique</h2><p>Pour autoriser un port spécifique (ex: 22 pour SSH), il faut exécuter la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -A INPUT -p tcp --dport 22 -j ACCEPT\n</code></pre></div><h2>Autoriser un nouveau port</h2><p>Lorsque tous les ports sont bloqués, pour autoriser un nouveau port, il faut exécuter les commandes suivantes :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -A INPUT -p tcp -m tcp --dport &lt;new_port&gt; -j ACCEPT\niptables -A INPUT -j DROP\niptables -L INPUT --line-numbers # Récupérer l&#x27;ID de l&#x27;ancienne règle de DROP\niptables -D INPUT &lt;id&gt; # Supprimer l&#x27;anciènne règle de DROP\n</code></pre></div><h2>Persister la configuration</h2><p>Pour persister la configuration et permettre à iptables de se lancer au démarrage :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables-save &gt; /etc/iptables/iptables.rules\nsudo systemctl enable --now iptables.service\n</code></pre></div><h2>Vider toutes les règles iptables</h2><p>Pour vider toutes les règles iptables, il faut exécuter les commandes suivantes :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -F\niptables -F -t mangle\niptables -F -t nat \niptables -X\niptables -X -t mangle\niptables -X -t nat\n</code></pre></div><h2>Ma configuration personnelle</h2><p>Voici ma configuration personnelle :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">iptables -F\niptables -F -t mangle\niptables -F -t nat \niptables -X\niptables -X -t mangle\niptables -X -t nat\niptables -F INPUT\niptables -A INPUT -i lo -j ACCEPT\niptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT\niptables -A INPUT -p tcp --dport 22 -j ACCEPT\niptables -A INPUT -p tcp --dport 80 -j ACCEPT\niptables -A INPUT -p tcp --dport 443 -j ACCEPT\niptables -A INPUT -j DROP\niptables-save &gt; /etc/iptables/iptables.rules\nsudo systemctl enable --now iptables.service\n</code></pre></div><p>Elle permet de bloquer toutes les connexions entrantes.</p></div>","isIndex":false,"file":"iptables.md","fileName":"iptables","title":"iptables","comments":true,"permalink":"iptables","datePublished":"2021-06-07T20:36","dateUpdated":"2024-02-01T03:57","description":"Iptables est un pare-feu pour Linux. Il permet de bloquer ou d'autoriser des connexions entrantes et sortantes.","publish":true,"rss":true,"note":"61"},"__N_SSG":true}