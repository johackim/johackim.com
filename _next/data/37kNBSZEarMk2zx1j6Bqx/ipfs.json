{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>IPFS est un système de fichiers interplanétaire.</p><p>InterPlanetary File System (ou IPFS) est un protocole et un réseau peer-to-peer pour le stockage et le partage de données dans un système de fichiers distribué.</p><p>C&#x27;est un remplacement au protocole HTTP.</p><p>Il ne sauvegarde pas 2 fois le même fichier et garde le même identifiant pour chaque fichier créé.</p><h2>Installation</h2><p>Rendez-vous <a class=\"\" target=\"_blank\" href=\"https://github.com/ipfs/ipfs-desktop#install\">sur cette page</a> pour installer la version desktop.</p><p>Pour installer la version CLI :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">sudo pacman -S kubo\n</code></pre></div><h2>Initialiser un repository local</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs init\n</code></pre></div><h2>Envoyer un fichier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs add &lt;file&gt;\n# Ou\nipfs add &lt;file&gt; --to-files /\n</code></pre></div><h2>Afficher un fichier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs cat &lt;CID&gt;\n</code></pre></div><h2>Télécharger un fichier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs get &lt;CID&gt;\n</code></pre></div><h2>Voir les fichier d&#x27;un dossier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs ls &lt;CID&gt;\n</code></pre></div><h2>Supprimer un fichier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs files rm &lt;file&gt;\n</code></pre></div><h2>Spécifier une api</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs --api /ip4/127.0.0.1/tcp/5001 &lt;command&gt;\n</code></pre></div><h2>Envoyer du texte</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">echo &quot;This is my text&quot; | ipfs add\n</code></pre></div><h2>Lister les fichiers</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs files ls\n</code></pre></div><h2>Connaitre le CID d&#x27;un nom de domaine</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs name resolve /ipns/example.com\n</code></pre></div><h2>Rafraichir le cache</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs name resolve -n --dhtt 0 /ipns/example.com\n</code></pre></div><h2>Recuperer le hash d&#x27;un fichier sans l&#x27;envoyer sur IPFS</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs add --only-hash &lt;file&gt;\n</code></pre></div><h2>Récupérer le peer d&#x27;un fichier</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs dht findprovs &lt;hash&gt;\n</code></pre></div><h2>Héberger un site sur IPFS</h2><p>Voici les étapes à suivre pour héberger un site sur le réseau peer-to-peer IPFS :</p><p>Créez un dossier (ex: <code>_site</code>) avec un fichier HTML à l&#x27;intérieur (ex : <code>index.html</code>) :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">mkdir _site\necho &quot;hello world&quot; &gt; _site/index.html\n</code></pre></div><p>Envoyez le dossier sur IPFS :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs add -r _site --to-files /\n</code></pre></div><p>Récupérez le hash CID du dossier :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs files ls -l\n</code></pre></div><p>Rendez-vous sur <code>https://ipfs.io/ipfs/&lt;CID&gt;</code> pour voir votre fichier depuis la passerelle officielle ipfs.io.</p><h2>Relier un nom de domaine à un site web hébergé sur IPFS</h2><p>Vous pouvez utiliser une passerelle IPFS pour relier un nom de domaine classique à votre site.</p><ul>\n<li>Créez une zone DNS TXT <code>_dnslink.example.com</code> avec la valeur <code>dnslink=/ipfs/&lt;CID&gt;</code></li>\n</ul><p>Vous pouvez ensuite accéder à votre site depuis https://ipfs.io/ipns/example.com/ ou http://example.com.ipns.localhost:8080/ si vous avez ipfs-desktop de lancé sur votre ordinateur.</p><p>Déployez votre passerelle IPFS <a class=\"\" target=\"_blank\" href=\"https://github.com/ethibox/awesome-stacks/blob/master/stacks/ipfs.yml\">avec Docker</a>.</p><ul>\n<li>Créez une zone DNS de type A <code>example.com</code> qui pointe sur l&#x27;ip de votre passerelle.</li>\n</ul><p>Si vous changez fréquemment votre site, vous allez devoir changer la zone TXT avec le nouveau CID de votre dossier à chaque fois.</p><p>Pour pallier à ce problème :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs name publish /ipfs/&lt;CID&gt;\n</code></pre></div><p>Puis ajoutez l&#x27;identifiant ipns à votre zone DNS :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">_dnslink.example.com. 60 TXT &quot;dnslink=/ipns/&lt;IPNS_ID&gt;&quot;\n</code></pre></div><p>Maintenant, à chaque mise à jour de votre dossier <code>_site</code>, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">ipfs name publish /ipfs/&lt;CID&gt;\n</code></pre></div><h2>Performances</h2><p>Niveau performances, il est préférable d&#x27;uploader votre site dans la passerelle afin que le contenu soit pinné.</p><hr/><p>Références :</p><ul>\n<li>https://filebase.com/</li>\n<li>https://thebidouilleur.xyz/blog/ipfs/</li>\n<li>https://github.com/ipfs-cluster/ipfs-cluster/</li>\n<li>https://github.com/ipfs-shipyard/ipfs-deploy</li>\n<li>https://ipfs.github.io/public-gateway-checker/</li>\n<li>https://korben.info/ipfs-le-web-permanent.html</li>\n<li>https://fr.wikipedia.org/wiki/InterPlanetary_File_System</li>\n<li>https://developers.cloudflare.com/distributed-web/ipfs-gateway_</li>\n</ul></div>","isIndex":false,"file":"IPFS.md","fileName":"IPFS","title":"Héberger un site sur le réseau IPFS","comments":true,"permalink":"ipfs","datePublished":"2021-05-30T19:50","dateUpdated":"2023-08-15T19:50","publish":true,"rss":true,"note":"81"},"__N_SSG":true}