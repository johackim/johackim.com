{"pageProps":{"source":"<link rel=\"preload\" as=\"image\" href=\"https://i.imgur.com/G5MVfJT.jpg\"/><link rel=\"preload\" as=\"image\" href=\"https://i.imgur.com/vzTehLA.jpeg\"/><div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Pour afficher tout un tas d&#x27;indicateurs clés et statistiques sur un écran, je me suis fabriqué un petit tableau de bord maison sur un Raspberry Pi.</p><h2>Introduction</h2><p>J&#x27;aime bien le concept de <strong>Data Driven</strong> (pilotage par la donnée), c&#x27;est un moyen simple de prendre des décisions en se basant sur autre chose que de simples hypothèses.</p><p>Grâce à ce <strong>dashboard</strong>, je visualise rapidement l&#x27;état d&#x27;avancement de mes tâches en cours, ce qu&#x27;il me reste à faire et mes <strong>objectifs à atteindre</strong> le tout <strong>regroupé à un seul endroit</strong>.</p><p>Ce dashboard fait partie de mes sources de <strong>motivation</strong>, je peux me fixer des objectifs qui seront affichés en permanence à côté de moi lorsque je travaille.</p><p>Dans mon cas, les données utilisées derrière mon dashboard sont gérées par des solutions <strong>open-source</strong> (raspberry, <a class=\"\" target=\"_blank\" href=\"https://taiga.io/\">taiga</a>, <a class=\"\" target=\"_blank\" href=\"http://metabase.com/\">metabase</a> et <a class=\"\" target=\"_blank\" href=\"https://matomo.org/\">piwik</a>) auto-hébergé sur mes propres serveurs dont une grande partie se situe chez moi.</p><h2>Installation</h2><p><strong>Prérequis</strong> :</p><ul>\n<li>Un <strong>écran</strong> avec entrée HDMI.</li>\n<li>Un <strong>raspberry PI</strong> avec sa <strong>carte SD</strong> et son <strong>alimentation</strong>.</li>\n<li>Un <strong>câble HDMI</strong>.</li>\n<li>Quelques notions en ligne de commande <strong>Linux</strong>.</li>\n</ul><p>Niveau hardware, j&#x27;ai utilisé un simple <a class=\"\" target=\"_blank\" href=\"https://kubii.fr/fr/pi-zero-w/1851-raspberry-pi-zero-w-3272496006997.html\">Rasbperry Pi Zero W</a> avec Raspbian comme distribution Linux. Pour installer Raspbian il vous suffit de télécharger le <a class=\"\" target=\"_blank\" href=\"https://raspberrypi.org/downloads/\">fichier .img</a> et de le graver sur une carte SD avec un logiciel comme <a class=\"\" target=\"_blank\" href=\"https://etcher.io/\">etcher</a>.</p><p><img src=\"https://i.imgur.com/G5MVfJT.jpg\" alt=\"Rasbperry Pi Zero W\"/></p><p>Une fois votre raspberry branché et démarré, il vous faut exécuter cette commande avec l&#x27;utilisateur <code>pi</code> pour installer les prérequis :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">curl -L https://git.io/vAxR5 | sudo bash\n</code></pre></div><p>Maintenant, il vous reste plus qu&#x27;à éditer le fichier <code>~/.i3/config</code> pour renseigner l&#x27;URL d&#x27;accès à votre dashboard.</p><p>L&#x27;URL peut provenir de n&#x27;importe quel service comme <a class=\"\" target=\"_blank\" href=\"https://matomo.org/\">piwik</a>, <a class=\"\" target=\"_blank\" href=\"https://metabase.com/\">metabase</a>, <a class=\"\" target=\"_blank\" href=\"https://elastic.co/products/kibana\">kibana</a>, <a class=\"\" target=\"_blank\" href=\"https://goaccess.io/\">goaccess</a>, <a class=\"\" target=\"_blank\" href=\"https://grafana.com/\">grafana</a>, <a class=\"\" target=\"_blank\" href=\"https://my-netdata.io/\">NetData</a> ou <a class=\"\" target=\"_blank\" href=\"http://dashing.io/\">Dashing</a> etc...</p><p>Voilà, votre dashboard s&#x27;affichera à chaque démarrage de votre Raspberry Pi !</p><h2>Détails de l&#x27;installation</h2><p>Pour les curieux, voilà les détails de ce qu&#x27;il se passe derrière l&#x27;installation :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">#!/bin/bash\n\n# Install dependencies\nsudo apt-get update\nsudo apt-get install -y i3 dmenu rxvt-unicode xorg xinit xdotool surf\n\n# Autologin\nsudo systemctl enable autologin@.service\n\n# i3 configuration\nmkdir -p ~/.i3 &amp;&amp; cat &gt; ~/.i3/config &lt;&lt; EOF\nbindsym $mod+b bar mode toggle\nfont pango:monospace 8\nfor_window [class=&quot;Surf&quot;] fullscreen\nexec --no-startup-id xset -dpms\nexec --no-startup-id xset s off\nexec --no-startup-id xdotool mousemove 9999 9999\nexec --no-startup-id surf -K https://github.com/johackim # URL TO EDIT\nEOF\necho &#x27;exec i3&#x27; &gt;&gt; ~/.xinitrc\necho &#x27;[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; exec startx&#x27; &gt; ~/.bash_profile\n\nexit 0\n</code></pre></div><p>Ce code aura simplement pour objectif d&#x27;installer un petit gestionnaire de fenêtre <strong><a class=\"\" target=\"_blank\" href=\"http://i3wm.org/\">i3</a></strong> et <strong>surf</strong> en tant que navigateur web très léger.</p><p><strong>xdotool</strong> se chargera de mettre le navigateur en fullscreen avec la touche <strong>F11</strong> quelques secondes après le démarrage de i3.</p><p>EDIT: le paramètre <code>surf -K</code> sera utilisé pour mettre le navigateur en fullscreen.\nMerci <a class=\"\" target=\"_blank\" href=\"https://journalduhacker.net/u/Breizh\">Breizh</a> ;)</p><h2>Mon tableau de bord</h2><p>Personnellement, j&#x27;utilise <a class=\"\" target=\"_blank\" href=\"https://metabase.com/\">Metabase</a> en tant que tableau de bord pour afficher des statistiques provenant des bases de données de <a class=\"\" target=\"_blank\" href=\"https://matomo.org/\">piwik</a>, <a class=\"\" target=\"_blank\" href=\"https://taiga.io/\">taiga</a> et <a class=\"\" target=\"_blank\" href=\"https://zabbix.com/\">zabbix</a>. J&#x27;ai aussi un petit <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/node-stats\">script maison</a> qui parse et stocke en permanence des données provenant de <a class=\"\" target=\"_blank\" href=\"http://github.com/johackim\">github</a> et <a class=\"\" target=\"_blank\" href=\"https://mastodon.ethibox.fr/@johackim\">mastodon</a> dans une base de données MySQL.</p><p><img src=\"https://i.imgur.com/vzTehLA.jpeg\" alt=\"Apperçu de mon dashboard\"/></p><p>Pour le moment, je peux voir des métriques comme :</p><ul>\n<li>L&#x27;état d&#x27;avancement du sprint en cours (<a class=\"\" target=\"_blank\" href=\"https://wikiwand.com/en/Scrum_(software_development)\">Scrum</a>) ; tâches planifiées (TODO), en cours (DOING) et terminées (DONE).</li>\n<li>Le nombre de visites par mois de <a class=\"\" target=\"_blank\" href=\"https://johackim.com/\">mon blog</a>.</li>\n<li>le nombre de followers <a class=\"\" target=\"_blank\" href=\"https://mastodon.ethibox.fr/@johackim\">mastodon</a> et <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/\">github</a>.</li>\n<li>Le nombre de dysfonctionnements de mon infrastructure via <a class=\"\" target=\"_blank\" href=\"https://zabbix.com/\">zabbix</a>.</li>\n</ul><p>L&#x27;URL publique de mon dashboard Metabase ressemble à ça :</p><p>http://192.168.1.50:3000/public/dashboard/df627c68-8020#refresh=60&amp;theme=night</p><p>Elle est seulement accessible sur mon réseau local et dispose de deux paramètres ; <code>refresh=60</code> pour le nombre de secondes avant chaque rafraichissement et <code>theme=night</code> pour le mode nuit.</p><h2>Conclusion</h2><p>Vous pouvez afficher ce que vous voulez sur votre écran: un <strong>tableau de bord</strong> comme dans mon cas, une <strong>vidéo</strong> qui tourne en boucle, une <strong>photo</strong>, un <strong>site internet</strong>, etc...</p><p>De mon côté je vais surement remplacer <strong><a class=\"\" target=\"_blank\" href=\"https://metabase.com/\">Metabase</a></strong> par une solution comme <strong><a class=\"\" target=\"_blank\" href=\"http://elastic.co/\">Elastic</a></strong> (je ferai un article à cette occasion). Je trouve que ma solution avec <a class=\"\" target=\"_blank\" href=\"https://metabase.com/\">Metabase</a> est difficile à maintenir et consomme trop de ressources.</p><p>Je pense aussi améliorer la pertinence de mes métriques et en ajouter d&#x27;autres :</p><ul>\n<li>Métriques pirates : <strong>AARRR</strong></li>\n<li><strong>Velocity chart</strong></li>\n<li><strong>Burndown chart</strong></li>\n<li>Pourcentage de progression de mes <strong>Epics</strong></li>\n<li><strong>Taux de disponibilité</strong> de mes sites internet</li>\n</ul><p>Et vous ? Il y a quoi derrière votre dashboard ?</p><p>Bonne semaine ;)</p><hr/><p>Références :</p><ul>\n<li>\n<a class=\"\" href=\"/hebergement-web\">Hébergement web</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"Tableau de bord maison.md","fileName":"Tableau de bord maison","title":"Comment se configurer un tableau de bord maison ?","comments":true,"permalink":"comment-configurer-tableau-de-bord-maison","datePublished":"2018-02-12T08:00","dateUpdated":"2018-02-12T08:00","description":"Pour afficher tout un tas d'indicateurs clés et statistiques sur un écran, je me suis fabriqué un petit tableau de bord maison sur un Raspberry Pi.","aliases":"","publish":true,"rss":true},"__N_SSG":true}