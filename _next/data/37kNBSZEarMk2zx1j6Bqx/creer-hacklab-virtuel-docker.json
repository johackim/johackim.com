{"pageProps":{"source":"<link rel=\"preload\" as=\"image\" href=\"https://i.imgur.com/DOwUMHk.png\"/><link rel=\"preload\" as=\"image\" href=\"https://i.imgur.com/TyIYrzj.png\"/><div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Pour tester la sécurité de mes serveurs et sites internet, je me suis configuré un <strong>hacklab</strong> sous <strong>docker</strong> en tant qu&#x27;environnement de <strong>pentesting</strong>. Je peux désormais réaliser mes <strong>tests d&#x27;intrusions</strong> depuis tout type d&#x27;environnement (<a class=\"\" href=\"/linux\">Linux</a>, Mac OS, Windows).</p>\n<p>Voici mon <strong>hacklab</strong> : <a class=\"\" target=\"_blank\" href=\"http://github.com/johackim/docker-hacklab\">http://github.com/johackim/docker-hacklab</a></p><p><img src=\"https://i.imgur.com/DOwUMHk.png\" alt=\"Hacklab\"/></p><p>Je regroupe dans cet environnement virtuel un ensemble d&#x27;outils qui me permet de réaliser très rapidement des actions de <strong>pentest</strong>. Une simple commande me permet de démarrer instantanément mon <strong>environnement virtuel</strong>.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker run --name hacklab --net=host --privileged -it ston3o/docker-hacklab zsh\n</code></pre></div><p><a class=\"\" target=\"_blank\" href=\"http://github.com/johackim/docker-hacklab\">Ce dépôt github</a> recense toutes les <strong>techniques</strong> et <strong>outils</strong> me permettant de mener à bien mes <strong>pentest</strong>.</p><h2>1. README</h2><p>Je recense toutes les ressources que je juge utile dans <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab/blob/master/README.md\">le fichier README.md</a> que j&#x27;améliore au fur et à mesure de mes découvertes, on y trouve actuellement plein de ressources sur le thème de la sécurité :</p><ul>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab/blob/master/README.md#exploit-database\">Des bases de données d&#x27;exploits</a>.</li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab#other-useful-docker-commands\">D&#x27;autres commandes docker utiles</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab#search-engines\">Des moteurs de recherche d&#x27;équipements connectés</a></li>\n<li>Des sites de doxing</li>\n<li>Des blogs et chaines YouTube</li>\n<li>Des dépôts github</li>\n</ul><h2>2. Cheats</h2><p><img src=\"https://i.imgur.com/TyIYrzj.png\" alt=\"\"/></p><p><a class=\"\" target=\"_blank\" href=\"https://github.com/chrisallenlane/cheat\">Cheat</a> est très pratique pour gérer ses <strong>aide-mémoires</strong>.</p><p>Si par exemple je ne me souviens plus des commandes du framework <strong>metasploit</strong> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">$ cheat metasploit\n\n# To show all exploits that for a vulnerability\ngrep &lt;vulnerability&gt; show exploits\n\n# To select an exploit to use\nuse &lt;exploit&gt;\n\n# To see the current settings for a selected exploit\nshow options\n\n# To see compatible payloads for a selected exploit\nshow payloads\n\n# To set the payload for a selected exploit\nset payload &lt;payload&gt;\n\n# To set setting for a selected exploit \nset &lt;option&gt; &lt;value&gt;\n\n# To run the exploit\nexploit\n</code></pre></div><p>On peut aussi éditer ou chercher un aide mémoire.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">cheat -e &lt;name&gt; # Editer un aide mémoire\ncheat -s &lt;word&gt; # Chercher un mot dans nos aide-mémoires\n</code></pre></div><h2>3. Dockerfile</h2><p>Mon hacklab reprend une image docker officielle de kali auquel j&#x27;ai ajouté tous mes outils sous forme de paquets ou dépôts github que je regroupe sous plusieurs catégories dans un fichier <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab/blob/master/Dockerfile\">Dockerfile</a> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\"># Footprinting / Information-Gathering / OSINT / Fingerprint\n# AV Evasion / Dropper\n# Vulnerability Scanner (SQL, XSS, LFI, RFI etc...)\n# Pentest Framework\n# MITM / ARP poisoning / Spoofing / Sniffing\n# Email Spoofing\n# Crack password\n# Hash Manipulation\n# SQL Injection\n# Phishing\n# DOS Tools\n# Wireless networks\n# Reverse Engineering\n# Backdoor / Remote Access Trojan (RAT)\n# Search exploit\n# Post exploitation\n# Privilege escalation\n# Forensic\n# Geolocalisation\n# Shellcode\n# Wordpress\n# Bypass CloudFlare\n# Steganography\n# Honeypot\n# Reverse shell\n# Detect WAF\n# Remove file metadata\n# Disassembler / Decompiler\n# Fuzzing\n# Paquet manipulation\n</code></pre></div><p>Je n&#x27;ai pas automatisé les procédures d&#x27;installation de tous les outils, n&#x27;ayant pas encore trouvé le temps de le faire j&#x27;ai simplement cloné les dépôts. À chaque découverte d&#x27;un outil de <strong>pentesting</strong> que je juge utile, je prends quelques secondes pour l&#x27;ajouter dans ce <strong>Dockerfile</strong>.</p><p>Vous pouvez reprendre la base de mon <strong>Dockerfile</strong> et ajouter vos propres outils si vous le souhaitez.</p><h2>4. Alias</h2><p>Pour simplifier son utilisation, je me suis créé un <strong>alias</strong>. Il contient un <strong>volume docker</strong> pour partager des fichiers entre mon host et le container docker.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">alias hacklab=&#x27;docker run -d --name hacklab --net=host --privileged=true -v /tmp:/mnt -it ston3o/docker-hacklab zsh &gt; /dev/null 2&gt;&amp;1; docker start hacklab &gt; /dev/null; docker exec -it hacklab zsh&#x27;\n</code></pre></div><p>Grâce à ça je peux démarrer mon hacklab avec <strong>une simple commande</strong>.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">hacklab\n</code></pre></div><p>Il existe aussi une technique (<strong>non conseillé pour des raisons de sécurité</strong>) qui permet de lancer des applications avec interface graphique depuis un container docker.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker run --env=&quot;DISPLAY&quot; --env=&quot;QT_X11_NO_MITSHM=1&quot; --volume=&quot;/tmp/.X11-unix:/tmp/.X11-unix:rw&quot; ston3o/docker-hacklab\nxhost +local:root\n</code></pre></div><h2>5. Sources d&#x27;informations</h2><p>On n’oublie pas les petits flux RSS qui nous permettent de rester informés des derniers outils et techniques de pentest. C&#x27;est en partie grâce à ces sources d&#x27;informations que mon Dockerfile a pu évoluer :</p><h3>Sites français</h3><ul>\n<li><a class=\"\" target=\"_blank\" href=\"http://homputersecurity.com/\">http://homputersecurity.com/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"http://comptoirsecu.fr/\">http://comptoirsecu.fr/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://nolimitsecu.fr/\">https://nolimitsecu.fr/</a></li>\n</ul><h3>Sites anglais</h3><ul>\n<li><a class=\"\" target=\"_blank\" href=\"http://null-byte.wonderhowto.com/\">http://null-byte.wonderhowto.com/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://kitploit.com/\">https://kitploit.com/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://n0where.net/\">https://n0where.net/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"http://hackingarticles.in/\">http://hackingarticles.in/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"https://pentestlab.blog/\">https://pentestlab.blog/</a></li>\n<li><a class=\"\" target=\"_blank\" href=\"http://haxf4rall.com/\">http://haxf4rall.com/</a></li>\n</ul><h2>Conclusion</h2><p>J&#x27;utilise ce <strong>hacklab</strong> pour mon usage personnel, vous pouvez vous en servir, vous en inspirer ou bien créer le vôtre en partant de zéro.</p><p>Ce <strong>hacklab</strong> me permet de regrouper toutes mes techniques, connaissances et découvertes dans le domaine de la <strong>sécurité</strong>. Tout ça est regroupé dans un unique espace de travail plutôt agréable à utiliser.</p><p><strong>Si vous aimez, n&#x27;hésitez pas à ajouter une star sur <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/docker-hacklab\">le dépôt github</a> et à me suivre sur <a class=\"\" target=\"_blank\" href=\"http://mastodon.ethibox.fr/@johackim\">mastodon</a>.</strong></p><p>Bonne semaine à vous ;)</p><hr/><p>Références :</p><ul>\n<li>\n<a class=\"\" href=\"/cybersecurite\">Cybersécurité</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"Créer son hacklab virtuel avec docker.md","fileName":"Créer son hacklab virtuel avec docker","title":"Créer son hacklab virtuel avec docker","comments":true,"permalink":"creer-hacklab-virtuel-docker","datePublished":"2017-12-18T08:00","dateUpdated":"2017-12-18T08:00","description":"Pour tester la sécurité de mes serveurs et sites internet, je me suis configuré un hacklab sous docker en tant qu'environnement de pentesting.","publish":true,"rss":true,"note":"96"},"__N_SSG":true}