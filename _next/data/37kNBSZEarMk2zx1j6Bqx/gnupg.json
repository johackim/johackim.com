{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>GnuPG (ou GPG) est un outil de chiffrement disponible sur <a class=\"\" target=\"_blank\" href=\"https://gnupg.org/\">Linux</a>, <a class=\"\" target=\"_blank\" href=\"https://gpg4win.org/\">Windows</a> et <a class=\"\" target=\"_blank\" href=\"https://gpgtools.org/\">macOS</a>.</p><h2>Installation</h2><p>Installation sur Debian ou Ubuntu :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">apt update &amp;&amp; apt install -y gpg\n</code></pre></div><p>Installation sur Arch Linux :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">sudo pacman -S gnupg\n</code></pre></div><h2>Initialisation</h2><p>Pour initialiser GnuPG, il faut créer une clé de chiffrement</p><p>Exécuter la commande suivante pour générer une clé de chiffrement :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --gen-key\n</code></pre></div><p>Durant l&#x27;exécution, vous allez devoir définir un nom d&#x27;utilisateur, un email et une passphrase.</p><p>N&#x27;oubliez pas de définir les bon droits pour le dossier <code>.gnupg</code> avec un bon <code>chmod</code> des familles :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">chmod 600 .gnupg\n</code></pre></div><p><strong>IMPORTANT</strong> : Le dossier <code>~/.gnupg/</code> est votre passphrase est a garder absolument au risque de ne jamais pouvoir déchiffrer vos données chiffrés.</p><h2>Lister ses clés GPG</h2><p>Pour récupérer la liste de ses clés GPG, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --list-secret-keys --keyid-format LONG\n</code></pre></div><p>Le numéro de clé affiché devra être utilisé pour certaines commandes comme <code>gpg --delete-keys</code> ou <code>gpg --edit-key</code>.</p><h2>Lister toutes les clés GPG</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --list-keys --keyid-format LONG\n</code></pre></div><h2>Voir les informations d&#x27;un fichier .gpg</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --verbose --decrypt --list-only --dry-run --logger-fd 1 &lt;file.gpg&gt;\n</code></pre></div><h2>Chiffrer un fichier</h2><p>Pour chiffrer un fichier :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg -e &lt;file&gt;\n</code></pre></div><h2>Chiffrer un fichier au format ASCII</h2><p>Par défaut, les fichiers sont chiffré au format binaire. Pour chiffer un fichier au format ASCII, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg -e -a -o &lt;file&gt;.gpg &lt;file&gt;\n</code></pre></div><h2>Convertir un fichier binaire au format ASCII</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --enarmor &lt;file&gt;.gpg\n</code></pre></div><h2>Déchiffrer un fichier</h2><p>Poru déchiffrer un fichier :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg -d &lt;file&gt;\n</code></pre></div><h2>Chiffrer un dossier</h2><p>GnuPG ne permet pas de chiffrer directement un dossier. Cependant, vous pouvez archivez une archive.</p><p>Du coup, archivez votre dossier avec un logiciel d&#x27;archivage (ex : <code>zip</code>, <code>7z</code>, <code>tar.gz</code> ect...), puis chiffrez le :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">zip -r folder.zip &lt;folder&gt;\ngpg -e folder.zip\n</code></pre></div><h2>Supprimer une clé</h2><p>Pour supprimer une clé :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --delete-keys &lt;KEY&gt;\n</code></pre></div><h2>Modifier son mot de passe</h2><p>Pour modifier son mot de passe :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --edit-key &lt;KEY&gt;\ngpg&gt; passwd\ngpg&gt; save\n</code></pre></div><h2>Toujours demander le mot de passe</h2><p>Si vous souhaitez que votre passphrase soit toujours demandé lors du déchiffrement d&#x27;un fichier, éditez le fichier <code>~/.gnupg/gpg-agent.conf</code> avec les lignes suivantes :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-txt\">default-cache-ttl 0\nmax-cache-ttl 0\n</code></pre></div><h2>Récupérer une clé GPG publique</h2><p>Pour récupérer une clé publique complète, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --armor --export &lt;KEY_ID&gt;\n</code></pre></div><p>Le <code>KEY_ID</code> correspond à la valeur après <code>sec/</code> via la ligne de commande <code>gpg --list-secret-keys --keyid-format LONG</code>.</p><p>Cette clé peut être envoyer sur Github ou Gitlab pour vérifier les commits par exemple.</p><h2>Changer la date d&#x27;expiration d&#x27;une clé</h2><p>Si vous voulez modifier la date d&#x27;expiration d&#x27;un clé GPG, exécutez la commande suivante :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --edit-key &lt;KEY&gt;\ngpg&gt; expire\ngpg&gt; save\n</code></pre></div><p>NOTE: Il est possible que la subkey et non la primary key soit expiré, pour la selectionner, tapez <code>key &lt;key&gt;</code> puis <code>expire</code>.</p><p><strong>Que se passe-t-il si votre clé GPG expire ?</strong></p><blockquote class=\"callout quote\">\n                    \n                        <div class=\"callout-title\">\n                            <div class=\"callout-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z\"></path><path d=\"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z\"></path></svg></div>\n                            <div class=\"callout-title-inner\">https://g-loaded.eu/2010/11/01/change-expiration-date-gpg-key/</div>\n                        </div>\n                    \n                    <div class=\"callout-content\">\n                        <p>En théorie, le propriétaire d&#x27;une clé privée expirée devrait toujours avoir la possibilité de déchiffrer des données et également être en mesure de signer des données, même si toutes les sous-clés publiques de la paire de clés actuelle ont expiré, car il est toujours possible de réinitialiser la date d&#x27;expiration sur le clés publiques actuellement expirées.</p>\n                    </div>\n                </blockquote><h2>Chiffer avec vim</h2><p>Installer <a class=\"\" target=\"_blank\" href=\"https://github.com/jamessan/vim-gnupg\">vim-gnupg</a>.</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-vim\">let g:GPGDefaultRecipients=[&quot;yourname@yourdomain.com&quot;]\n</code></pre></div><h2>gpg-tui</h2><p>Pour gérer plus facilement ses clés, il existe <code>gpg-tui</code> :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">sudo pacman -S gpg-tui\n</code></pre></div><h2>Enlever la date d&#x27;expiration</h2><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">gpg --edit-key &lt;ID&gt;\n&gt; expire\n&gt; 0\n&gt; save\n</code></pre></div><blockquote class=\"callout note\">\n                    \n                        <div class=\"callout-title\">\n                            <div class=\"callout-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"18\" y1=\"2\" x2=\"22\" y2=\"6\"></line><path d=\"M7.5 20.5 19 9l-4-4L3.5 16.5 2 22z\"></path></svg></div>\n                            <div class=\"callout-title-inner\">note</div>\n                        </div>\n                    \n                    <div class=\"callout-content\">\n                        <p>Tapez key 1 si il s&#x27;agit d&#x27;une subkey.</p>\n                    </div>\n                </blockquote><hr/><p>Références :</p><ul>\n<li>\n<a class=\"\" href=\"/linux\">Linux</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"GnuPG.md","fileName":"GnuPG","title":"GnuPG","comments":true,"permalink":"gnupg","datePublished":"2022-06-16T11:54","dateUpdated":"2024-06-17T16:00:00","aliases":"","publish":true,"rss":true,"note":"86"},"__N_SSG":true}