{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><blockquote class=\"callout info\">\n                    \n                        <div class=\"callout-title\">\n                            <div class=\"callout-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg></div>\n                            <div class=\"callout-title-inner\">info</div>\n                        </div>\n                    \n                    <div class=\"callout-content\">\n                        <p>Contenu archivé</p>\n                    </div>\n                </blockquote><p>Afin d&#x27;éviter de réinstaller manuellement <a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a> chaque année j&#x27;ai automatisé son installation à l&#x27;aide d&#x27;un fichier makefile. Fini la configuration manuelle de LVM, LUKS, UEFI, Grub, Nvidia, Alsa, Xorg, i3, vim, tmux, mutt, gtk etc...</p>\n<p><strong>ATTENTION ! Les commandes <code>make</code> décrites dans cet article ont été créé seulement pour mon usage personnel, elles seront mises à jour plus tard pour un usage plus général. Je vous conseille de lire le fichier makefile si vous souhaitez les utiliser.</strong></p><h2>TL;DR</h2><p><a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/dotfiles\">https://github.com/johackim/dotfiles</a></p><h2>Étapes d&#x27;installation</h2><p>De manière générale l&#x27;installation de <a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a> comprend de nombreuses étapes :</p>\n<ul>\n<li>Création, formatage et chiffrement des partitions</li>\n<li>\nInstallation des fichiers de base de <a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a>\n\n</li>\n<li>Configuration du fichier <code>/etc/fstab</code></li>\n<li>Configuration du clavier (<code>/etc/vconsole.conf</code>)</li>\n<li>Configuration du hostname</li>\n<li>Configuration du fuseau horaire (<code>/etc/localtime</code>)</li>\n<li>Configuration de l&#x27;heure</li>\n<li>Configuration de la langue</li>\n<li>Configuration du bootloader grub</li>\n<li>Configuration du mot de passe root</li>\n<li>Configuration du dépôt multilib</li>\n<li>Configuration de sudo</li>\n<li>Configuration des services</li>\n<li>Installation d&#x27;un package manager pour AUR (Arch User Repository)</li>\n<li>Installation du serveur graphique Xorg</li>\n<li>Installation des drivers graphique (Nvidia, Intel)</li>\n<li>Installation des drivers audio (alsa, pulseaudio)</li>\n<li>Installation d&#x27;un gestionnaire de réseau (NetworkManager)</li>\n<li>Installation d&#x27;un gestionnaire de fenêtre léger (i3)</li>\n<li>Installation de mes packages</li>\n</ul><p>J&#x27;ai créé un <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/dotfiles/blob/3670f49216c8ffc70e1ea2f79617f12c681cbade/makefile\">fichier makefile</a> qui contient toutes les commandes shell à exécuter lors de l&#x27;installation. Dorénavant, si je souhaite faire une installation complète, j&#x27;ai uniquement 2 commandes à entrer, une pour la création des partitions et l&#x27;autre pour l&#x27;installation de <a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a>.</p>\n<div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">make create-new-partitions\nmake install-new-arch\n</code></pre></div><p>Dans le cas où mon système plante ou que je souhaite simplement réinstaller Arch Linux, seul la commande <code>make install-new-arch</code> suffit. Les partitions <code>root</code>, <code>boot</code> et <code>efi</code> seront réinitialisés et la partition <code>home</code> restera intacte.</p><h2>Dotfiles</h2><p>Toutes les configurations de mes applications (vim, tmux, mutt, i3, gtk etc..) mes raccourcis clavier, mes aliases, mon thème (fonts, fond d&#x27;écran, icons, les couleurs, etc...) sont personnalisés et versionnés. Une simple commande permet de tout installer :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">make install-dotfiles\n</code></pre></div><h2>Conclusion</h2><ol>\n<li>Créer une clé USB bootable de <a class=\"\" target=\"_blank\" href=\"https://archlinux.org/download/\">Arch Linux</a> avec <a class=\"\" target=\"_blank\" href=\"https://github.com/balena-io/etcher\">etcher</a></li>\n<li>Booter son ordinateur sur la clé bootable</li>\n<li>Connecter l&#x27;ordinateur à internet avec la command <code>wifi-menu</code></li>\n<li>Installer les packages git et make avec la commande <code>pacman -S git make</code></li>\n<li>Cloner le repository avec la commande <code>git clone https://github.com/johackim/dotfiles</code></li>\n<li>Éxecuter les commandes <code>make create-new-partitions</code> et <code>make install-new-arch</code></li>\n</ol><p>Je dispose d&#x27;un seul <a class=\"\" target=\"_blank\" href=\"https://github.com/johackim/dotfiles\">dépôt</a> qui contient toute la configuration de mon PC. Pratique non ?</p><hr/><p>Références :</p><ul>\n<li>https://github.com/johackim/dotfiles</li>\n<li>https://gist.github.com/mattiaslundberg/8620837</li>\n<li>https://github.com/helmuthdu/aui</li>\n<li>https://github.com/MatMoul/archfi</li>\n<li>\n<a title=\"Note bientôt disponible\" class=\"!no-underline border-b-2 border-dotted border-cyan-700\" href=\"/soon?title=Arch%20Linux\">Arch Linux</a>\n\n</li>\n</ul></div>","isIndex":false,"file":"Automatiser l'installation de Arch Linux.md","fileName":"Automatiser l'installation de Arch Linux","title":"Comment automatiser l'installation de Arch Linux ?","comments":true,"permalink":"comment-automatiser-installation-arch-linux","datePublished":"2018-07-30T12:45","dateUpdated":"2018-07-30T12:45","description":"Afin d'éviter de réinstaller manuellement Arch Linux chaque année j'ai automatisé son installation à l'aide d'un fichier makefile.","publish":true,"rss":true},"__N_SSG":true}