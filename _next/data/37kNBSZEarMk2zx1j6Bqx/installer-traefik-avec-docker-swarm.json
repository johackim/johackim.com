{"pageProps":{"source":"<div class=\"space-y-4 whitespace-normal *:first:mt-0 *:last:mb-0\"><p>Pour installer Traefik avec <a class=\"\" href=\"/docker-swarm\">Docker Swarm</a>, on créer une stack Docker <code>traefik.yml</code> :</p>\n<div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-yaml\"># traefik.yml\nversion: &#x27;3.8&#x27;\n\nservices:\n  traefik:\n    image: traefik:${VERSION:-2.4.8}\n    command:\n      - --providers.docker\n      - --providers.docker.network=traefik-net\n      - --providers.docker.exposedByDefault=false\n      - --providers.docker.swarmMode=true\n      - --providers.docker.endpoint=unix:///var/run/docker.sock\n      - --entrypoints.http.address=:80\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    ports:\n      - {target: 80, published: 80, mode: host, protocol: tcp}\n\nnetworks:\n  default:\n    external: true\n    name: traefik-net\n</code></pre></div><p>On créer un réseau docker :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker network create --driver=overlay traefik-net\n</code></pre></div><p>On déploie traefik :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker stack deploy -c traefik.yml traefik\n</code></pre></div><p>Il est à présent possible de déployer une application (ex: Ghost) avec un nom de domaine associé (ex: ghost.localhost) :</p><div class=\"relative group\"><button type=\"button\" class=\"invisible group-hover:visible absolute top-0 right-0 rounded-md text-xs bg-gray-300 m-3 p-1.5 cursor-pointer leading-none\">Copier</button><pre><code class=\"language-bash\">docker service create --network traefik-net \\\n-l traefik.enable=true \\\n-l traefik.http.routers.my-container.rule=&#x27;Host(`ghost.localhost`)&#x27; \\\n-l traefik.http.services.my-service.loadbalancer.server.port=2368 ghost\n</code></pre></div><p>Vous pouvez accédez à votre application en vous rendant sur http://ghost.localhost.</p></div>","isIndex":false,"file":"Installer Traefik avec Docker Swarm.md","fileName":"Installer Traefik avec Docker Swarm","title":"Installer Traefik avec Docker Swarm","comments":true,"permalink":"installer-traefik-avec-docker-swarm","datePublished":"2021-05-17T17:32","dateUpdated":"2021-05-17T17:32","publish":true,"rss":true,"note":"57"},"__N_SSG":true}