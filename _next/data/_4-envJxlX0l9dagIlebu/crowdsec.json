{"pageProps":{"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    code: \"code\",\n    h2: \"h2\",\n    hr: \"hr\",\n    li: \"li\",\n    p: \"p\",\n    pre: \"pre\",\n    strong: \"strong\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.p, {\n      children: [_jsx(_components.a, {\n        href: \"https://github.com/crowdsecurity/crowdsec\",\n        children: \"CrowdSec\"\n      }), \" est un \", _jsx(_components.a, {\n        href: \"/pare-feu\",\n        title: \"Pare-feu\",\n        children: \"Pare-feu\"\n      }), \" communautaire open-source pour se prot√©ger des attaques informatiques.\"]\n    }), \"\\n\\n\", _jsx(_components.p, {\n      children: \"Il analyse le comportement des visiteurs via les logs et r√©pond de mani√®re adapt√©e :\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"Bloquer l'adresse IP\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Ajouter un captcha\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Ajouter un code HTTP 403\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"ect...\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Les adresses IP agressives sont envoy√©es √† CrowdSec pour √™tre partag√©s entre tous les utilisateurs afin d'am√©liorer la s√©curit√© de chacun.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Installation\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Pour l'installer sur \", _jsx(_components.strong, {\n        children: \"Ubuntu\"\n      }), \" ou \", _jsx(_components.strong, {\n        children: \"Debian\"\n      }), \" :\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"curl -s https://packagecloud.io/install/repositories/crowdsec/crowdsec/script.deb.sh | sudo bash\\nsudo apt install -y crowdsec\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Pour l'installer sur \", _jsx(_components.strong, {\n        children: \"Arch Linux\"\n      }), \" :\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"yay -S --noconfirm crowdsec-bin\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Pour les autres syst√®mes, \", _jsx(_components.a, {\n        href: \"https://doc.crowdsec.net/docs/getting_started/install_crowdsec/\",\n        children: \"voir la documentation\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Utilisation classique\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"CrowdSec a plusieurs composants :\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Parser\"\n        }), \" : Analyse les logs pour les transformer en √©v√©nements.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Scenario\"\n        }), \" : Analyse les √©v√©nements pour les transformer en d√©cisions.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Decision\"\n        }), \" : Action √† effectuer suite √† un √©v√©nement.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Bouncer\"\n        }), \" : Outil pour appliquer les d√©cisions.\"]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [_jsx(_components.strong, {\n          children: \"Collection\"\n        }), \" : Ensemble de parsers, scenarios et bouncers.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour d√©marrer CrowdSec, il faut lancer le service :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"sudo systemctl start crowdsec\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour bloquer les adresses IP, il faut installer le bouncer iptables (ou nftables) :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"apt install -y crowdsec-firewall-bouncer-iptables # Ubuntu/Debian\\n# ou\\nyay -S --noconfirm crowdsec-firewall-bouncer-iptables # Arch Linux\\n\\n# D√©marrer le service\\nsudo systemctl start crowdsec-firewall-bouncer\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour bannir une adresse IP :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"cscli decisions add -t ban -i <IP>\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Il n'est pas possible de bannir une IP d√©finitivement, mais vous pouvez mettre une dur√©e de +100ans avec le param√®tre \", _jsx(_components.code, {\n        children: \"-d 999999h\"\n      }), \" üòÖ.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour inspecter une attaque :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"cscli alerts inspect -d <id>\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Et si vous souhaitez relier votre serveur √† la Console de CrowdSec (facultatif) :\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Inscrivez-vous gratuitement sur \", _jsx(_components.a, {\n          href: \"https://app.crowdsec.net/signup\",\n          children: \"https://app.crowdsec.net/signup\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Ex√©cuter la commande \", _jsx(_components.code, {\n          children: \"cscli console enroll <key>\"\n        }), \" (la cl√© est affich√© sur \", _jsx(_components.a, {\n          href: \"https://app.crowdsec.net/security-engines\",\n          children: \"https://app.crowdsec.net/security-engines\"\n        }), \")\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Cela vous permettra d'ajouter des blocklists facilement.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Autrement, vous pouvez toujours ex√©cuter une commande comme celle-ci :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"# https://github.com/firehol/blocklist-ipsets/\\nwhile read -r ip; do cscli decisions add -t ban -i $ip; done < blocklist.txt\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Et si vous souhaitez whitelister des IPs (ex: \", _jsx(_components.a, {\n        href: \"https://api.github.com/meta\",\n        children: \"les IPs de Github\"\n      }), \"), √©ditez le fichier \", _jsx(_components.code, {\n        children: \"/etc/crowdsec/parsers/s02-enrich/whitelists.yaml\"\n      }), \" et relancez le service crowdsec.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour avoir un visuel de l'√©tat de crowdsec :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"cscli metrics\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Si vous rencontrez un faux positif, vous pouvez identifier la raison du bannissement avec \", _jsx(_components.code, {\n        children: \"cscli alerts inspect -d <id>\"\n      }), \" et d√©sactiver le ban avec \", _jsx(_components.code, {\n        children: \"cscli decisions remove --id <id>\"\n      }), \" ou le sc√©nario en question avec \", _jsx(_components.code, {\n        children: \"cscli scenarios remove <scenario>\"\n      }), \".\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Exemples :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"cscli scenarios remove --force crowdsecurity/http-probing\\ncscli scenarios remove --force crowdsecurity/http-crawl-non_statics\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Utilisation avec Traefik\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Pour utiliser CrowdSec avec Traefik, j'utilise ces 2 stacks docker :\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/ethibox/awesome-stacks/blob/master/stacks/traefik-crowdsec.yml\",\n          children: \"Traefik\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/ethibox/awesome-stacks/blob/master/stacks/crowdsec.yml\",\n          children: \"Crowdsec\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Une fois install√©, j'ajoute la configuration suivante dans le fichier \", _jsx(_components.code, {\n        children: \"/etc/crowdsec/acquis.yaml\"\n      }), \" √† l'int√©rieur du conteneur Crowdsec :\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-txt\",\n        children: \"filenames:\\n  - /var/log/traefik/access.log\\nlabels:\\n  type: traefik\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Ensuite, je rentre la commande suivante √† l'int√©rieur du conteneur CrowdSec :\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"cscli bouncers add traefik-bouncer\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Et je red√©marre la stack docker avec la variable d'environnement \", _jsx(_components.code, {\n        children: \"CROWDSEC_BOUNCER_API_KEY\"\n      }), \" qui contient la cl√© d'api qui s'affiche en sortie de la commande pr√©c√©dente.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Chaque service reli√© √† Traefik sera prot√©g√© par CrowdSec.\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Si vous ex√©cutez une commande comme \", _jsx(_components.code, {\n        children: \"dirsearch -u https://example.com\"\n      }), \" sur un de vos sites internet, votre IP sera automatiquement banni pendant 4h.\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.p, {\n      children: \"R√©f√©rences :\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://youtu.be/5K7Aj5ya7uI\",\n          children: \"Korben - D√©couverte et installation de Crowdsec\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://crowdsec.net/blog/enhance-docker-compose-security\",\n          children: \"https://crowdsec.net/blog/enhance-docker-compose-security\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://blog.levassb.ovh/post/crowdsec/\",\n          children: \"https://blog.levassb.ovh/post/crowdsec/\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/crowdsecurity/hub/blob/master/collections/crowdsecurity/traefik.yaml\",\n          children: \"https://github.com/crowdsecurity/hub/blob/master/collections/crowdsecurity/traefik.yaml\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/maxlerebourg/crowdsec-bouncer-traefik-plugin\",\n          children: \"https://github.com/maxlerebourg/crowdsec-bouncer-traefik-plugin\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/fbonalair/traefik-crowdsec-bouncer\",\n          children: \"https://github.com/fbonalair/traefik-crowdsec-bouncer\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://app.crowdsec.net/hub/author/crowdsecurity/collections/traefik\",\n          children: \"https://app.crowdsec.net/hub/author/crowdsecurity/collections/traefik\"\n        })\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{"title":"CrowdSec","permalink":"crowdsec","description":"CrowdSec est un pare-feu communautaire open-source pour se prot√©ger des attaques informatiques.","publish":true,"rss":true,"datePublished":"2024-04-22T10:00:00","dateUpdated":"2024-05-30T10:00:00"},"scope":{}},"isIndex":false,"file":"CrowdSec.md","fileName":"CrowdSec","comments":true,"title":"CrowdSec","permalink":"crowdsec","description":"CrowdSec est un pare-feu communautaire open-source pour se prot√©ger des attaques informatiques.","publish":true,"rss":true,"datePublished":"2024-04-22T10:00:00","dateUpdated":"2024-05-30T10:00:00"},"__N_SSG":true}