{"pageProps":{"source":{"compiledSource":"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    blockquote: \"blockquote\",\n    circle: \"circle\",\n    code: \"code\",\n    div: \"div\",\n    h2: \"h2\",\n    h3: \"h3\",\n    li: \"li\",\n    line: \"line\",\n    ol: \"ol\",\n    p: \"p\",\n    pre: \"pre\",\n    svg: \"svg\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsxs(_components.blockquote, {\n      className: \"callout info\",\n      children: [\"\\n                    \\n                        \", _jsxs(_components.div, {\n        className: \"callout-title\",\n        children: [\"\\n                            \", _jsx(_components.div, {\n          className: \"callout-icon\",\n          children: _jsxs(_components.svg, {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            width: \"24\",\n            height: \"24\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [_jsx(_components.circle, {\n              cx: \"12\",\n              cy: \"12\",\n              r: \"10\"\n            }), _jsx(_components.line, {\n              x1: \"12\",\n              y1: \"16\",\n              x2: \"12\",\n              y2: \"12\"\n            }), _jsx(_components.line, {\n              x1: \"12\",\n              y1: \"8\",\n              x2: \"12.01\",\n              y2: \"8\"\n            })]\n          })\n        }), \"\\n                            \", _jsx(_components.div, {\n          className: \"callout-title-inner\",\n          children: \"info\"\n        }), \"\\n                        \"]\n      }), \"\\n                    \\n                    \", _jsxs(_components.div, {\n        className: \"callout-content\",\n        children: [\"\\n                        \", _jsx(_components.p, {\n          children: \"Archived content\"\n        }), \"\\n                    \"]\n      }), \"\\n                \"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"I looked for solutions to expose a local server behind a NAT or firewall. Here's what I found.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Solution 1: VPN with port forwarding (with docker)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"For this solution, you must have a server outside your local network, a \", _jsx(_components.a, {\n        href: \"https://scaleway.com/pricing/\",\n        children: \"scaleway C1 server\"\n      }), \" is enough.\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"1. Install VPN on your server with docker (server-side)\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"CID=$(docker run -d --name dockvpn --restart=always --privileged --net=host ston3o/dockvpn)\\n\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"docker run -t -i -p 8080:8080 --volumes-from $CID ston3o/dockvpn serveconfig\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"2. Port forwarding (server-side)\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"iptables -A PREROUTING -t nat -i eth0 -p tcp -d <src_ip> -j DNAT --to-destination <dest_ip>\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"3. Download ovpn file and connect to your VPN (client-side)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Go to \", _jsx(_components.a, {\n        href: \"http://server:8080\",\n        children: \"http://server:8080\"\n      }), \" and execute \", _jsx(_components.code, {\n        children: \"openvpn myvpn.ovpn\"\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Solution 2: VPN with dedicated IP\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"You can use a VPN like \", _jsx(_components.a, {\n        href: \"https://purevpn.com/dedicated-ip.php\",\n        children: \"purvpn\"\n      }), \" to obtain a dedicated IP for 1,99$ per month or \", _jsx(_components.a, {\n        href: \"https://ipjetable.net/\",\n        children: \"ipjetable\"\n      }), \" for free.\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Solution 3: UPNP\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"You can open ports with UPNP protocol (only 1024-65535 ports are allowed):\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"upnpc -a <ip> <port> <external_port> <protocol>\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"Example: \", _jsx(_components.code, {\n        children: \"upnpc -a 192.168.1.25 8888 8888 tcp\"\n      })]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Solution 4: tor2web\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"Use tor network and tor2web to expose your web server:\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Install tor: \", _jsx(_components.code, {\n          children: \"apt-get install tor\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Bind your web server with tor\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-conf\",\n        children: \"# /etc/tor/torrc\\nHiddenServiceDir /var/lib/tor/hidden_service/\\nHiddenServicePort 80 127.0.0.1:80\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsxs(_components.li, {\n        children: [\"Start tor: \", _jsx(_components.code, {\n          children: \"systemctl start tor\"\n        })]\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"Get your hostname.onion \", _jsx(_components.code, {\n          children: \"cat /var/lib/tor/hidden_service/hostname\"\n        })]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Go to your website *.onion.sh (tor2web)\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Solution 5: Tunnels\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://ngrok.com/\",\n          children: \"ngrok\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://pagekite.net/\",\n          children: \"pagekite\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://localtunnel.me/\",\n          children: \"localtunnel\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://yaler.net/\",\n          children: \"yaler\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/andydunstall/pico\",\n          children: \"pico\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/amalshaji/portr\",\n          children: \"portr\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/ekzhang/bore\",\n          children: \"bore\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://github.com/fosrl/pangolin\",\n          children: \"pangolin\"\n        })\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"\\n\", _jsx(_components.a, {\n          href: \"/zerotier\",\n          title: \"Zerotier\",\n          children: \"Zerotier\"\n        }), \"\\n\\n\"]\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"Cloudflare Tunnel\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"AWS Direct Connect\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{"title":"Multiple ways to expose a local server behind NAT or firewall","permalink":"how-to-expose-local-server-behind-firewall","description":"I looked for solutions to expose a local server behind a NAT or firewall. Here's what I found.","datePublished":"2017-08-14T12:20","dateUpdated":"2017-08-14T12:20","aliases":["Multiple ways to expose a local server behind NAT or firewall"],"publish":true,"rss":true},"scope":{}},"isIndex":false,"file":"Tunneling.md","fileName":"Tunneling","title":"Multiple ways to expose a local server behind NAT or firewall","comments":true,"permalink":"how-to-expose-local-server-behind-firewall","description":"I looked for solutions to expose a local server behind a NAT or firewall. Here's what I found.","datePublished":"2017-08-14T12:20","dateUpdated":"2017-08-14T12:20","aliases":"","publish":true,"rss":true},"__N_SSG":true}