(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{2552:()=>{},2784:(e,t,i)=>{"use strict";var r=i(5364);i(2552);var s=i(4232),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(s),o=void 0!==r&&r.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,i=t.name,r=void 0===i?"stylesheet":i,s=t.optimizeForSpeed,n=void 0===s?o:s;c(a(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",c("boolean"==typeof n,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=n,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var l=document.querySelector('meta[property="csp-nonce"]');this._nonce=l?l.getAttribute("content"):null}var t,i=e.prototype;return i.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},i.isOptimizeForSpeed=function(){return this._optimizeForSpeed},i.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,i){return"number"==typeof i?e._serverSheet.cssRules[i]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),i},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},i.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},i.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},i.insertRule=function(e,t){if(c(a(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var i=this.getSheet();"number"!=typeof t&&(t=i.cssRules.length);try{i.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},i.replaceRule=function(e,t){if(this._optimizeForSpeed){var i=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!i.cssRules[e])return e;i.deleteRule(e);try{i.insertRule(t,e)}catch(r){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),i.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];c(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},i.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},i.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},i.cssRules=function(){var e=this;return this._tags.reduce(function(t,i){return i?t=t.concat(Array.prototype.map.call(e.getSheetForTag(i).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},i.makeStyleTag=function(e,t,i){t&&c(a(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var s=document.head||document.getElementsByTagName("head")[0];return i?s.insertBefore(r,i):s.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var u=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return t>>>0},d={};function h(e,t){if(!t)return"jsx-"+e;var i=String(t),r=e+i;return d[r]||(d[r]="jsx-"+u(e+"-"+i)),d[r]}function _(e,t){var i=e+t;return d[i]||(d[i]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[i]}var p=function(){function e(e){var t=void 0===e?{}:e,i=t.styleSheet,r=void 0===i?null:i,s=t.optimizeForSpeed,n=void 0!==s&&s;this._sheet=r||new l({name:"styled-jsx",optimizeForSpeed:n}),this._sheet.inject(),r&&"boolean"==typeof n&&(this._sheet.setOptimizeForSpeed(n),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var i=this.getIdAndRules(e),r=i.styleId,s=i.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var n=s.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=n,this._instancesCounts[r]=1},t.remove=function(e){var t=this,i=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(i in this._instancesCounts,"styleId: `"+i+"` not found"),this._instancesCounts[i]-=1,this._instancesCounts[i]<1){var r=this._fromServer&&this._fromServer[i];r?(r.parentNode.removeChild(r),delete this._fromServer[i]):(this._indices[i].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[i]),delete this._instancesCounts[i]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],i=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return i[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,i;return t=this.cssRules(),void 0===(i=e)&&(i={}),t.map(function(e){var t=e[0],r=e[1];return n.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:i.nonce?i.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,i=e.dynamic,r=e.id;if(i){var s=h(r,i);return{styleId:s,rules:Array.isArray(t)?t.map(function(e){return _(s,e)}):[_(s,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),g=s.createContext(null);g.displayName="StyleSheetContext";var f=n.default.useInsertionEffect||n.default.useLayoutEffect,v=new p;function m(e){var t=v||s.useContext(g);return t&&f(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}m.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},t.style=m},2867:(e,t,i)=>{"use strict";i.d(t,{FR:()=>p,bV:()=>g,dp:()=>I});var r=i(4232),s=i(7328),n=i.n(s);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(this,arguments)}function a(e,t){if(null==e)return{};var i,r,s={},n=Object.keys(e);for(r=0;r<n.length;r++)i=n[r],t.indexOf(i)>=0||(s[i]=e[i]);return s}var l=["keyOverride"],c=["crossOrigin"],u={templateTitle:"",noindex:!1,nofollow:!1,norobots:!1,defaultOpenGraphImageWidth:0,defaultOpenGraphImageHeight:0,defaultOpenGraphVideoWidth:0,defaultOpenGraphVideoHeight:0},d=function(e,t,i){void 0===t&&(t=[]);var s=void 0===i?{}:i,n=s.defaultWidth,o=s.defaultHeight;return t.reduce(function(t,i,s){return t.push(r.createElement("meta",{key:"og:"+e+":0"+s,property:"og:"+e,content:i.url})),i.alt&&t.push(r.createElement("meta",{key:"og:"+e+":alt0"+s,property:"og:"+e+":alt",content:i.alt})),i.secureUrl&&t.push(r.createElement("meta",{key:"og:"+e+":secure_url0"+s,property:"og:"+e+":secure_url",content:i.secureUrl.toString()})),i.type&&t.push(r.createElement("meta",{key:"og:"+e+":type0"+s,property:"og:"+e+":type",content:i.type.toString()})),i.width?t.push(r.createElement("meta",{key:"og:"+e+":width0"+s,property:"og:"+e+":width",content:i.width.toString()})):n&&t.push(r.createElement("meta",{key:"og:"+e+":width0"+s,property:"og:"+e+":width",content:n.toString()})),i.height?t.push(r.createElement("meta",{key:"og:"+e+":height"+s,property:"og:"+e+":height",content:i.height.toString()})):o&&t.push(r.createElement("meta",{key:"og:"+e+":height"+s,property:"og:"+e+":height",content:o.toString()})),t},[])},h=function(e){var t,i,s,n,h,_=[];e.titleTemplate&&(u.templateTitle=e.titleTemplate);var p="";e.title?(p=e.title,u.templateTitle&&(p=u.templateTitle.replace(/%s/g,function(){return p}))):e.defaultTitle&&(p=e.defaultTitle),p&&_.push(r.createElement("title",{key:"title"},p));var g=void 0===e.noindex?u.noindex||e.dangerouslySetAllPagesToNoIndex:e.noindex,f=void 0===e.nofollow?u.nofollow||e.dangerouslySetAllPagesToNoFollow:e.nofollow,v=e.norobots||u.norobots,m="";if(e.robotsProps){var y=e.robotsProps,b=y.nosnippet,w=y.maxSnippet,S=y.maxImagePreview,k=y.maxVideoPreview,E=y.noarchive,x=y.noimageindex,I=y.notranslate,R=y.unavailableAfter;m=(b?",nosnippet":"")+(w?",max-snippet:"+w:"")+(S?",max-image-preview:"+S:"")+(E?",noarchive":"")+(R?",unavailable_after:"+R:"")+(x?",noimageindex":"")+(k?",max-video-preview:"+k:"")+(I?",notranslate":"")}if(e.norobots&&(u.norobots=!0),g||f?(e.dangerouslySetAllPagesToNoIndex&&(u.noindex=!0),e.dangerouslySetAllPagesToNoFollow&&(u.nofollow=!0),_.push(r.createElement("meta",{key:"robots",name:"robots",content:(g?"noindex":"index")+","+(f?"nofollow":"follow")+m}))):(!v||m)&&_.push(r.createElement("meta",{key:"robots",name:"robots",content:"index,follow"+m})),e.description&&_.push(r.createElement("meta",{key:"description",name:"description",content:e.description})),e.themeColor&&_.push(r.createElement("meta",{key:"theme-color",name:"theme-color",content:e.themeColor})),e.mobileAlternate&&_.push(r.createElement("link",{rel:"alternate",key:"mobileAlternate",media:e.mobileAlternate.media,href:e.mobileAlternate.href})),e.languageAlternates&&e.languageAlternates.length>0&&e.languageAlternates.forEach(function(e){_.push(r.createElement("link",{rel:"alternate",key:"languageAlternate-"+e.hrefLang,hrefLang:e.hrefLang,href:e.href}))}),e.twitter&&(e.twitter.cardType&&_.push(r.createElement("meta",{key:"twitter:card",name:"twitter:card",content:e.twitter.cardType})),e.twitter.site&&_.push(r.createElement("meta",{key:"twitter:site",name:"twitter:site",content:e.twitter.site})),e.twitter.handle&&_.push(r.createElement("meta",{key:"twitter:creator",name:"twitter:creator",content:e.twitter.handle}))),e.facebook&&e.facebook.appId&&_.push(r.createElement("meta",{key:"fb:app_id",property:"fb:app_id",content:e.facebook.appId})),(null!=(t=e.openGraph)&&t.title||p)&&_.push(r.createElement("meta",{key:"og:title",property:"og:title",content:(null==(n=e.openGraph)?void 0:n.title)||p})),(null!=(i=e.openGraph)&&i.description||e.description)&&_.push(r.createElement("meta",{key:"og:description",property:"og:description",content:(null==(h=e.openGraph)?void 0:h.description)||e.description})),e.openGraph){if((e.openGraph.url||e.canonical)&&_.push(r.createElement("meta",{key:"og:url",property:"og:url",content:e.openGraph.url||e.canonical})),e.openGraph.type){var T=e.openGraph.type.toLowerCase();_.push(r.createElement("meta",{key:"og:type",property:"og:type",content:T})),"profile"===T&&e.openGraph.profile?(e.openGraph.profile.firstName&&_.push(r.createElement("meta",{key:"profile:first_name",property:"profile:first_name",content:e.openGraph.profile.firstName})),e.openGraph.profile.lastName&&_.push(r.createElement("meta",{key:"profile:last_name",property:"profile:last_name",content:e.openGraph.profile.lastName})),e.openGraph.profile.username&&_.push(r.createElement("meta",{key:"profile:username",property:"profile:username",content:e.openGraph.profile.username})),e.openGraph.profile.gender&&_.push(r.createElement("meta",{key:"profile:gender",property:"profile:gender",content:e.openGraph.profile.gender}))):"book"===T&&e.openGraph.book?(e.openGraph.book.authors&&e.openGraph.book.authors.length&&e.openGraph.book.authors.forEach(function(e,t){_.push(r.createElement("meta",{key:"book:author:0"+t,property:"book:author",content:e}))}),e.openGraph.book.isbn&&_.push(r.createElement("meta",{key:"book:isbn",property:"book:isbn",content:e.openGraph.book.isbn})),e.openGraph.book.releaseDate&&_.push(r.createElement("meta",{key:"book:release_date",property:"book:release_date",content:e.openGraph.book.releaseDate})),e.openGraph.book.tags&&e.openGraph.book.tags.length&&e.openGraph.book.tags.forEach(function(e,t){_.push(r.createElement("meta",{key:"book:tag:0"+t,property:"book:tag",content:e}))})):"article"===T&&e.openGraph.article?(e.openGraph.article.publishedTime&&_.push(r.createElement("meta",{key:"article:published_time",property:"article:published_time",content:e.openGraph.article.publishedTime})),e.openGraph.article.modifiedTime&&_.push(r.createElement("meta",{key:"article:modified_time",property:"article:modified_time",content:e.openGraph.article.modifiedTime})),e.openGraph.article.expirationTime&&_.push(r.createElement("meta",{key:"article:expiration_time",property:"article:expiration_time",content:e.openGraph.article.expirationTime})),e.openGraph.article.authors&&e.openGraph.article.authors.length&&e.openGraph.article.authors.forEach(function(e,t){_.push(r.createElement("meta",{key:"article:author:0"+t,property:"article:author",content:e}))}),e.openGraph.article.section&&_.push(r.createElement("meta",{key:"article:section",property:"article:section",content:e.openGraph.article.section})),e.openGraph.article.tags&&e.openGraph.article.tags.length&&e.openGraph.article.tags.forEach(function(e,t){_.push(r.createElement("meta",{key:"article:tag:0"+t,property:"article:tag",content:e}))})):("video.movie"===T||"video.episode"===T||"video.tv_show"===T||"video.other"===T)&&e.openGraph.video&&(e.openGraph.video.actors&&e.openGraph.video.actors.length&&e.openGraph.video.actors.forEach(function(e,t){e.profile&&_.push(r.createElement("meta",{key:"video:actor:0"+t,property:"video:actor",content:e.profile})),e.role&&_.push(r.createElement("meta",{key:"video:actor:role:0"+t,property:"video:actor:role",content:e.role}))}),e.openGraph.video.directors&&e.openGraph.video.directors.length&&e.openGraph.video.directors.forEach(function(e,t){_.push(r.createElement("meta",{key:"video:director:0"+t,property:"video:director",content:e}))}),e.openGraph.video.writers&&e.openGraph.video.writers.length&&e.openGraph.video.writers.forEach(function(e,t){_.push(r.createElement("meta",{key:"video:writer:0"+t,property:"video:writer",content:e}))}),e.openGraph.video.duration&&_.push(r.createElement("meta",{key:"video:duration",property:"video:duration",content:e.openGraph.video.duration.toString()})),e.openGraph.video.releaseDate&&_.push(r.createElement("meta",{key:"video:release_date",property:"video:release_date",content:e.openGraph.video.releaseDate})),e.openGraph.video.tags&&e.openGraph.video.tags.length&&e.openGraph.video.tags.forEach(function(e,t){_.push(r.createElement("meta",{key:"video:tag:0"+t,property:"video:tag",content:e}))}),e.openGraph.video.series&&_.push(r.createElement("meta",{key:"video:series",property:"video:series",content:e.openGraph.video.series})))}e.defaultOpenGraphImageWidth&&(u.defaultOpenGraphImageWidth=e.defaultOpenGraphImageWidth),e.defaultOpenGraphImageHeight&&(u.defaultOpenGraphImageHeight=e.defaultOpenGraphImageHeight),e.openGraph.images&&e.openGraph.images.length&&_.push.apply(_,d("image",e.openGraph.images,{defaultWidth:u.defaultOpenGraphImageWidth,defaultHeight:u.defaultOpenGraphImageHeight})),e.defaultOpenGraphVideoWidth&&(u.defaultOpenGraphVideoWidth=e.defaultOpenGraphVideoWidth),e.defaultOpenGraphVideoHeight&&(u.defaultOpenGraphVideoHeight=e.defaultOpenGraphVideoHeight),e.openGraph.videos&&e.openGraph.videos.length&&_.push.apply(_,d("video",e.openGraph.videos,{defaultWidth:u.defaultOpenGraphVideoWidth,defaultHeight:u.defaultOpenGraphVideoHeight})),e.openGraph.audio&&_.push.apply(_,d("audio",e.openGraph.audio)),e.openGraph.locale&&_.push(r.createElement("meta",{key:"og:locale",property:"og:locale",content:e.openGraph.locale})),(e.openGraph.siteName||e.openGraph.site_name)&&_.push(r.createElement("meta",{key:"og:site_name",property:"og:site_name",content:e.openGraph.siteName||e.openGraph.site_name}))}return e.canonical&&_.push(r.createElement("link",{rel:"canonical",href:e.canonical,key:"canonical"})),e.additionalMetaTags&&e.additionalMetaTags.length>0&&e.additionalMetaTags.forEach(function(e){var t,i,s=e.keyOverride,n=a(e,l);_.push(r.createElement("meta",o({key:"meta:"+(null!=(t=null!=(i=null!=s?s:n.name)?i:n.property)?t:n.httpEquiv)},n)))}),null!=(s=e.additionalLinkTags)&&s.length&&e.additionalLinkTags.forEach(function(e){var t,i=e.crossOrigin,s=a(e,c);_.push(r.createElement("link",o({key:"link"+(null!=(t=s.keyOverride)?t:s.href)+s.rel},s,{crossOrigin:"anonymous"===i||"use-credentials"===i||""===i?i:void 0})))}),_},_=function(e){return r.createElement(n(),null,h(e))},p=function(e){var t=e.title,i=e.titleTemplate,s=e.defaultTitle,n=e.themeColor,o=e.dangerouslySetAllPagesToNoIndex,a=e.dangerouslySetAllPagesToNoFollow,l=e.description,c=e.canonical,u=e.facebook,d=e.openGraph,h=e.additionalMetaTags,p=e.twitter,g=e.defaultOpenGraphImageWidth,f=e.defaultOpenGraphImageHeight,v=e.defaultOpenGraphVideoWidth,m=e.defaultOpenGraphVideoHeight,y=e.mobileAlternate,b=e.languageAlternates,w=e.additionalLinkTags,S=e.robotsProps,k=e.norobots;return r.createElement(_,{title:t,titleTemplate:i,defaultTitle:s,themeColor:n,dangerouslySetAllPagesToNoIndex:void 0!==o&&o,dangerouslySetAllPagesToNoFollow:void 0!==a&&a,description:l,canonical:c,facebook:u,openGraph:d,additionalMetaTags:h,twitter:p,defaultOpenGraphImageWidth:g,defaultOpenGraphImageHeight:f,defaultOpenGraphVideoWidth:v,defaultOpenGraphVideoHeight:m,mobileAlternate:y,languageAlternates:b,additionalLinkTags:w,robotsProps:S,norobots:k})},g=function(e){var t=e.title,i=e.themeColor,s=e.noindex,n=e.nofollow,o=e.robotsProps,a=e.description,l=e.canonical,c=e.openGraph,u=e.facebook,d=e.twitter,h=e.additionalMetaTags,p=e.titleTemplate,g=e.defaultTitle,f=e.mobileAlternate,v=e.languageAlternates,m=e.additionalLinkTags;return r.createElement(r.Fragment,null,r.createElement(_,{title:t,themeColor:i,noindex:s,nofollow:n,robotsProps:o,description:a,canonical:l,facebook:u,openGraph:c,additionalMetaTags:h,twitter:d,titleTemplate:p,defaultTitle:g,mobileAlternate:f,languageAlternates:v,additionalLinkTags:m}))},f=function(e,t){var i=t;return Array.isArray(i)&&1===i.length&&(i=o({},t[0])),{__html:JSON.stringify(Array.isArray(i)?i.map(function(t){return v(e,t)}):v(e,i),w)}},v=function(e,t){var i=t.id,r=o({},(void 0===i?void 0:i)?{"@id":t.id}:{},t);return delete r.id,o({"@context":"https://schema.org","@type":e},r)},m=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}),y=RegExp("["+Object.keys(m).join("")+"]","g"),b=function(e){return m[e]},w=function(e,t){switch(typeof t){case"object":if(null===t)return;return t;case"number":case"boolean":case"bigint":return t;case"string":return t.replace(y,b);default:return}},S=["type","keyOverride","scriptKey","scriptId","dataArray","useAppDir"];function k(e){var t=e.type,i=void 0===t?"Thing":t,s=e.keyOverride,l=e.scriptKey,c=e.scriptId,u=void 0===c?void 0:c,d=e.dataArray,h=e.useAppDir,_=a(e,S),p=function(){return r.createElement("script",{type:"application/ld+json",id:u,"data-testid":u,dangerouslySetInnerHTML:f(i,void 0===d?o({},_):d),key:"jsonld-"+l+(s?"-"+s:"")})};return void 0!==h&&h?r.createElement(p,null):r.createElement(n(),null,p())}function E(e){if("string"==typeof e)return{"@type":"Person",name:e};if(e.name){var t;return{"@type":null!=(t=null==e?void 0:e.type)?t:"Person",name:e.name,url:null==e?void 0:e.url}}}var x=["type","keyOverride","url","title","images","datePublished","dateModified","authorName","publisherName","publisherLogo","description","isAccessibleForFree"];function I(e){var t=e.type,i=e.keyOverride,s=e.url,n=e.title,l=e.images,c=e.datePublished,u=e.dateModified,d=e.authorName,h=e.publisherName,_=e.publisherLogo,p=e.description,g=e.isAccessibleForFree,f=a(e,x),v=o({datePublished:c,description:p,mainEntityOfPage:{"@type":"WebPage","@id":s},headline:n,image:l,dateModified:u||c,author:Array.isArray(d)?d.map(function(e){return E(e)}).filter(function(e){return!!e}):d?E(d):void 0,publisher:function(e,t){if(e)return{"@type":"Organization",name:e,logo:function(e){if(e)return{"@type":"ImageObject",url:e}}(t)}}(void 0===h?void 0:h,void 0===_?void 0:_),isAccessibleForFree:g},f);return r.createElement(k,o({type:void 0===t?"Article":t,keyOverride:i},v,{scriptKey:"article"}))}},3860:e=>{e.exports={style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontStyle:"normal"},className:"__className_22ceb1"}},5379:()=>{},5961:(e,t,i)=>{"use strict";e.exports=i(2784).style},6556:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return i(9814)}])},7328:(e,t,i)=>{e.exports=i(9269)},9099:(e,t,i)=>{e.exports=i(6296)},9814:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>nX});var r=i(7876),s=i(5961),n=i.n(s);function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}).apply(null,arguments)}function a(e,t){if(null==e)return{};var i={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}i(5379);var l="undefined"!=typeof window?window:void 0,c="undefined"!=typeof globalThis?globalThis:l,u=Array.prototype,d=u.forEach,h=u.indexOf,_=null==c?void 0:c.navigator,p=null==c?void 0:c.document,g=null==c?void 0:c.location,f=null==c?void 0:c.fetch,v=null!=c&&c.XMLHttpRequest&&"withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:void 0,m=null==c?void 0:c.AbortController,y=null==_?void 0:_.userAgent,b=null!=l?l:{},w={DEBUG:!1,LIB_VERSION:"1.261.7"},S=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function k(e,t){return -1!==e.indexOf(t)}var E=function(e){return e.trim()},x=function(e){return e.replace(/^\$/,"")},I=Array.isArray,R=Object.prototype,T=R.hasOwnProperty,C=R.toString,F=I||function(e){return"[object Array]"===C.call(e)},P=e=>"function"==typeof e,O=e=>e===Object(e)&&!F(e),$=e=>{if(O(e)){for(var t in e)if(T.call(e,t))return!1;return!0}return!1},A=e=>void 0===e,M=e=>"[object String]"==C.call(e),L=e=>M(e)&&0===e.trim().length,D=e=>null===e,N=e=>A(e)||D(e),q=e=>"[object Number]"==C.call(e),G=e=>"[object Boolean]"===C.call(e),B=e=>k(S,e),z=[!0,"true",1,"1","yes"],j=e=>k(z,e),H=[!1,"false",0,"0","no"];function U(e,t,i,r,s){return t>i&&(r.warn("min cannot be greater than max."),t=i),q(e)?e>i?(r.warn(" cannot be  greater than max: "+i+". Using max value instead."),i):e<t?(r.warn(" cannot be less than min: "+t+". Using min value instead."),t):e:(r.warn(" must be a number. using max or fallback. max: "+i+", fallback: "+s),U(s||i,t,i,r))}class W{stop(){this._removeInterval&&(clearInterval(this._removeInterval),this._removeInterval=void 0)}constructor(e){this._options=e,this._buckets={},this._refillBuckets=()=>{Object.keys(this._buckets).forEach(e=>{var t=this._getBucket(e)+this._refillRate;t>=this._bucketSize?delete this._buckets[e]:this._setBucket(e,t)})},this._getBucket=e=>this._buckets[String(e)],this._setBucket=(e,t)=>{this._buckets[String(e)]=t},this.consumeRateLimit=e=>{var t,i=null!=(t=this._getBucket(e))?t:this._bucketSize;if(0===(i=Math.max(i-1,0)))return!0;this._setBucket(e,i);var r,s=0===i;return s&&(null==(r=this._onBucketRateLimited)||r.call(this,e)),s},this._onBucketRateLimited=this._options._onBucketRateLimited,this._bucketSize=U(this._options.bucketSize,0,100,this._options._logger),this._refillRate=U(this._options.refillRate,0,this._bucketSize,this._options._logger),this._refillInterval=U(this._options.refillInterval,0,864e5,this._options._logger),this._removeInterval=setInterval(()=>{this._refillBuckets()},this._refillInterval)}}var V=e=>{var t={_log:function(t){if(l&&(w.DEBUG||b.POSTHOG_DEBUG)&&!A(l.console)&&l.console){for(var i=("__rrweb_original__"in l.console[t])?l.console[t].__rrweb_original__:l.console[t],r=arguments.length,s=Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];i(e,...s)}},info:function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];t._log("log",...i)},warn:function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];t._log("warn",...i)},error:function(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];t._log("error",...i)},critical:function(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];console.error(e,...i)},uninitializedWarning:e=>{t.error("You must initialize PostHog before calling "+e)},createLogger:t=>V(e+" "+t)};return t},Y=V("[PostHog.js]"),J=Y.createLogger,K={};function X(e,t,i){if(F(e)){if(d&&e.forEach===d)e.forEach(t,i);else if("length"in e&&e.length===+e.length){for(var r=0,s=e.length;r<s;r++)if(r in e&&t.call(i,e[r],r)===K)return}}}function Q(e,t,i){if(!N(e)){if(F(e))return X(e,t,i);if(e instanceof FormData){for(var r of e.entries())if(t.call(i,r[1],r[0])===K)return}else for(var s in e)if(T.call(e,s)&&t.call(i,e[s],s)===K)return}}var Z=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return X(i,function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])}),e},ee=function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return X(i,function(t){X(t,function(t){e.push(t)})}),e};function et(e){for(var t=Object.keys(e),i=t.length,r=Array(i);i--;)r[i]=[t[i],e[t[i]]];return r}var ei=function(e){try{return e()}catch(e){return}},er=function(e){return function(){try{for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return e.apply(this,i)}catch(e){Y.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Y.critical(e)}}},es=function(e){var t={};return Q(e,function(e,i){(M(e)&&e.length>0||q(e))&&(t[i]=e)}),t},en=["herokuapp.com","vercel.app","netlify.app"];function eo(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return e[i]}function ea(e,t,i,r){var{capture:s=!1,passive:n=!0}=null!=r?r:{};null==e||e.addEventListener(t,i,{capture:s,passive:n})}var el="$people_distinct_id",ec="__alias",eu="__timers",ed="$autocapture_disabled_server_side",eh="$heatmaps_enabled_server_side",e_="$exception_capture_enabled_server_side",ep="$error_tracking_suppression_rules",eg="$error_tracking_capture_extension_exceptions",ef="$web_vitals_enabled_server_side",ev="$dead_clicks_enabled_server_side",em="$web_vitals_allowed_metrics",ey="$session_recording_enabled_server_side",eb="$console_log_recording_enabled_server_side",ew="$session_recording_network_payload_capture",eS="$session_recording_masking",ek="$session_recording_canvas_recording",eE="$replay_sample_rate",ex="$replay_minimum_duration",eI="$replay_script_config",eR="$sesid",eT="$session_is_sampled",eC="$session_recording_url_trigger_activated_session",eF="$session_recording_event_trigger_activated_session",eP="$enabled_feature_flags",eO="$early_access_features",e$="$feature_flag_details",eA="$stored_person_properties",eM="$stored_group_properties",eL="$surveys",eD="$surveys_activated",eN="$flag_call_reported",eq="$user_state",eG="$client_session_props",eB="$capture_rate_limit",ez="$initial_campaign_params",ej="$initial_referrer_info",eH="$initial_person_info",eU="$epp",eW="__POSTHOG_TOOLBAR__",eV="$posthog_cookieless",eY=[el,ec,"__cmpns",eu,ey,eh,eR,eP,ep,eq,eO,e$,eM,eA,eL,eN,eG,eB,ez,ej,eU,eH];function eJ(e){return e instanceof Element&&(e.id===eW||!(null==e.closest||!e.closest(".toolbar-global-fade-container")))}function eK(e){return!!e&&1===e.nodeType}function eX(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function eQ(e){return!!e&&3===e.nodeType}function eZ(e){return!!e&&11===e.nodeType}function e0(e){return e?E(e).split(/\s+/):[]}function e1(e){var t=null==l?void 0:l.location.href;return!!(t&&e&&e.some(e=>t.match(e)))}function e2(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return e0(t)}function e3(e){return N(e)?null:E(e).split(/(\s+)/).filter(e=>to(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function e5(e){var t="";return e7(e)&&!e9(e)&&e.childNodes&&e.childNodes.length&&Q(e.childNodes,function(e){var i;eQ(e)&&e.textContent&&(t+=null!=(i=e3(e.textContent))?i:"")}),E(t)}function e6(e){var t;return A(e.target)?e.srcElement||null:null!=(t=e.target)&&t.shadowRoot?e.composedPath()[0]||null:e.target||null}var e8=["a","button","form","input","select","textarea","label"];function e4(e){var t=e.parentNode;return!(!t||!eK(t))&&t}function e7(e){for(var t=e;t.parentNode&&!eX(t,"body");t=t.parentNode){var i=e2(t);if(k(i,"ph-sensitive")||k(i,"ph-no-capture"))return!1}if(k(e2(e),"ph-include"))return!0;var r=e.type||"";if(M(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var s=e.name||e.id||"";return!(M(s)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(s.replace(/[^a-zA-Z0-9]/g,"")))}function e9(e){return!!(eX(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||eX(e,"select")||eX(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var te="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",tt=RegExp("^(?:"+te+")$"),ti=new RegExp(te),tr="\\d{3}-?\\d{2}-?\\d{4}",ts=RegExp("^("+tr+")$"),tn=RegExp("("+tr+")");function to(e,t){return void 0===t&&(t=!0),!(N(e)||M(e)&&(e=E(e),(t?tt:ti).test((e||"").replace(/[- ]/g,""))||(t?ts:tn).test(e)))&&!0}function ta(e){var t=e5(e);return to(t=(t+" "+function e(t){var i="";return t&&t.childNodes&&t.childNodes.length&&Q(t.childNodes,function(t){var r;if(t&&"span"===(null==(r=t.tagName)?void 0:r.toLowerCase()))try{var s=e5(t);i=(i+" "+s).trim(),t.childNodes&&t.childNodes.length&&(i=(i+" "+e(t)).trim())}catch(e){Y.error("[AutoCapture]",e)}}),i}(e)).trim())?t:""}function tl(e){return e.replace(/"|\\"/g,'\\"')}class tc{constructor(){this.clicks=[]}isRageClick(e,t,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(t-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:i}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:i}];return!1}}var tu="$copy_autocapture",td=function(e){return e.GZipJS="gzip-js",e.Base64="base64",e}({}),th=["fatal","error","warning","log","info","debug"],t_=["localhost","127.0.0.1"],tp=e=>{var t=null==p?void 0:p.createElement("a");return A(t)?null:(t.href=e,t)},tg=function(e,t){void 0===t&&(t="&");var i,r,s=[];return Q(e,function(e,t){A(e)||A(t)||"undefined"===t||(i=encodeURIComponent(e instanceof File?e.name:e.toString()),r=encodeURIComponent(t),s[s.length]=r+"="+i)}),s.join(t)},tf=function(e,t){for(var i,r=((e.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),s=0;s<r.length;s++){var n=r[s].split("=");if(n[0]===t){i=n;break}}if(!F(i)||i.length<2)return"";var o=i[1];try{o=decodeURIComponent(o)}catch(e){Y.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},tv=function(e,t,i){if(!e||!t||!t.length)return e;for(var r=e.split("#"),s=r[0]||"",n=r[1],o=s.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");F(h)&&(t.includes(h[0])?u.push(h[0]+"="+i):u.push(c[d]))}var _=l;return null!=a&&(_+="?"+u.join("&")),null!=n&&(_+="#"+n),_},tm=function(e,t){var i=e.match(RegExp(t+"=([^&]*)"));return i?i[1]:null},ty=J("[AutoCapture]");function tb(e,t){return t.length>e?t.slice(0,e)+"...":t}class tw{constructor(e){this._initialized=!1,this._isDisabledServerSide=null,this.rageclicks=new tc,this._elementsChainAsString=!1,this.instance=e,this._elementSelectors=null}get _config(){var e,t,i=O(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null==(e=i.url_allowlist)?void 0:e.map(e=>new RegExp(e)),i.url_ignorelist=null==(t=i.url_ignorelist)?void 0:t.map(e=>new RegExp(e)),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(l&&p){var e=e=>{e=e||(null==l?void 0:l.event);try{this._captureEvent(e)}catch(e){ty.error("Failed to capture event",e)}};if(ea(p,"submit",e,{capture:!0}),ea(p,"change",e,{capture:!0}),ea(p,"click",e,{capture:!0}),this._config.capture_copied_text){var t=e=>{e=e||(null==l?void 0:l.event),this._captureEvent(e,tu)};ea(p,"copy",t,{capture:!0}),ea(p,"cut",t,{capture:!0})}}}else ty.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[ed]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t,i=[];return null==(t=this._elementSelectors)||t.forEach(t=>{var r=null==p?void 0:p.querySelectorAll(t);null==r||r.forEach(r=>{e===r&&i.push(t)})}),i}get isEnabled(){var e,t,i=null==(e=this.instance.persistence)?void 0:e.props[ed];if(D(this._isDisabledServerSide)&&!G(i)&&!this.instance._shouldDisableFlags())return!1;var r=null!=(t=this._isDisabledServerSide)?t:!!i;return!!this.instance.config.autocapture&&!r}_captureEvent(e,t){if(void 0===t&&(t="$autocapture"),this.isEnabled){var i,r=e6(e);eQ(r)&&(r=r.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!=(i=this.rageclicks)&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var s=t===tu;if(r&&function(e,t,i,r,s){if(void 0===i&&(i=void 0),!l||!e||eX(e,"html")||!eK(e)||null!=(n=i)&&n.url_allowlist&&!e1(i.url_allowlist)||null!=(o=i)&&o.url_ignorelist&&e1(i.url_ignorelist))return!1;if(null!=(a=i)&&a.dom_event_allowlist){var n,o,a,c=i.dom_event_allowlist;if(c&&!c.some(e=>t.type===e))return!1}for(var u=!1,d=[e],h=!0,_=e;_.parentNode&&!eX(_,"body");)if(eZ(_.parentNode))d.push(_.parentNode.host),_=_.parentNode.host;else{if(!(h=e4(_)))break;if(r||e8.indexOf(h.tagName.toLowerCase())>-1)u=!0;else{var p=l.getComputedStyle(h);p&&"pointer"===p.getPropertyValue("cursor")&&(u=!0)}d.push(h),_=h}if(!function(e,t){var i=null==t?void 0:t.element_allowlist;if(A(i))return!0;var r,s=function(e){if(i.some(t=>e.tagName.toLowerCase()===t))return{v:!0}};for(var n of e)if(r=s(n))return r.v;return!1}(d,i)||!function(e,t){var i=null==t?void 0:t.css_selector_allowlist;if(A(i))return!0;var r,s=function(e){if(i.some(t=>e.matches(t)))return{v:!0}};for(var n of e)if(r=s(n))return r.v;return!1}(d,i))return!1;var g=l.getComputedStyle(e);if(g&&"pointer"===g.getPropertyValue("cursor")&&"click"===t.type)return!0;var f=e.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(s||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(t.type)>=0;default:return u?(s||["click"]).indexOf(t.type)>=0:(s||["click"]).indexOf(t.type)>=0&&(e8.indexOf(f)>-1||"true"===e.getAttribute("contenteditable"))}}(r,e,this._config,s,s?["copy","cut"]:void 0)){var{props:n,explicitNoCapture:a}=function(e,t){for(var i,r,{e:s,maskAllElementAttributes:n,maskAllText:a,elementAttributeIgnoreList:c,elementsChainAsString:u}=t,d=[e],h=e;h.parentNode&&!eX(h,"body");)eZ(h.parentNode)?(d.push(h.parentNode.host),h=h.parentNode.host):(d.push(h.parentNode),h=h.parentNode);var _,p=[],g={},f=!1,v=!1;if(Q(d,e=>{var t=e7(e);"a"===e.tagName.toLowerCase()&&(f=e.getAttribute("href"),f=t&&f&&to(f)&&f),k(e2(e),"ph-no-capture")&&(v=!0),p.push(function(e,t,i,r){var s=e.tagName.toLowerCase(),n={tag_name:s};e8.indexOf(s)>-1&&!i&&("a"===s.toLowerCase()||"button"===s.toLowerCase()?n.$el_text=tb(1024,ta(e)):n.$el_text=tb(1024,e5(e)));var o=e2(e);o.length>0&&(n.classes=o.filter(function(e){return""!==e})),Q(e.attributes,function(i){var s;if((!e9(e)||-1!==["name","id","class","aria-label"].indexOf(i.name))&&(null==r||!r.includes(i.name))&&!t&&to(i.value)&&(!M(s=i.name)||"_ngcontent"!==s.substring(0,10)&&"_nghost"!==s.substring(0,7))){var o=i.value;"class"===i.name&&(o=e0(o).join(" ")),n["attr__"+i.name]=tb(1024,o)}});for(var a=1,l=1,c=e;c=function(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do t=t.previousSibling;while(t&&!eK(t));return t}(c);)a++,c.tagName===e.tagName&&l++;return n.nth_child=a,n.nth_of_type=l,n}(e,n,a,c)),Z(g,function(e){if(!e7(e))return{};var t={};return Q(e.attributes,function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var i=e.name.replace("data-ph-capture-attribute-",""),r=e.value;i&&r&&to(r)&&(t[i]=r)}}),t}(e))}),v)return{props:{},explicitNoCapture:v};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?p[0].$el_text=ta(e):p[0].$el_text=e5(e)),f){p[0].attr__href=f;var m,y,b=null==(m=tp(f))?void 0:m.host,w=null==l||null==(y=l.location)?void 0:y.host;b&&w&&b!==w&&(_=f)}return{props:Z({$event_type:s.type,$ce_version:1},u?{}:{$elements:p},{$elements_chain:p.map(e=>{var t,i,r,s={text:null==(i=e.$el_text)?void 0:i.slice(0,400),tag_name:e.tag_name,href:null==(r=e.attr__href)?void 0:r.slice(0,2048),attr_class:(t=e.attr__class)?F(t)?t:e0(t):void 0,attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return et(e).filter(e=>{var[t]=e;return 0===t.indexOf("attr__")}).forEach(e=>{var[t,i]=e;return s.attributes[t]=i}),s}).map(e=>{var t,i,r="";if(e.tag_name&&(r+=e.tag_name),e.attr_class)for(var s of(e.attr_class.sort(),e.attr_class))r+="."+s.replace(/"/g,"");var n=o({},e.text?{text:e.text}:{},{"nth-child":null!=(t=e.nth_child)?t:0,"nth-of-type":null!=(i=e.nth_of_type)?i:0},e.href?{href:e.href}:{},e.attr_id?{attr_id:e.attr_id}:{},e.attributes),a={};return et(n).sort((e,t)=>{var[i]=e,[r]=t;return i.localeCompare(r)}).forEach(e=>{var[t,i]=e;return a[tl(t.toString())]=tl(i.toString())}),r+=":",r+=et(a).map(e=>{var[t,i]=e;return t+'="'+i+'"'}).join("")}).join(";")},null!=(i=p[0])&&i.$el_text?{$el_text:null==(r=p[0])?void 0:r.$el_text}:{},_&&"click"===s.type?{$external_click_url:_}:{},g)}}(r,{e:e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this._config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var c=this.getElementSelectors(r);if(c&&c.length>0&&(n.$element_selectors=c),t===tu){var u,d=e3(null==l||null==(u=l.getSelection())?void 0:u.toString()),h=e.type||"clipboard";if(!d)return!1;n.$selected_content=d,n.$copy_type=h}return this.instance.capture(t,n),!0}}}isBrowserSupported(){return P(null==p?void 0:p.querySelectorAll)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return q(e)&&isFinite(e)&&Math.floor(e)===e});var tS="0123456789abcdef";class tk{constructor(e){if(this.bytes=e,16!==e.length)throw TypeError("not 128-bit length")}static fromFieldsV7(e,t,i,r){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||t<0||i<0||r<0||e>0xffffffffffff||t>4095||i>0x3fffffff||r>0xffffffff)throw RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/0x10000000000,s[1]=e/0x100000000,s[2]=e/0x1000000,s[3]=e/65536,s[4]=e/256,s[5]=e,s[6]=112|t>>>8,s[7]=t,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new tk(s)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+tS.charAt(this.bytes[t]>>>4)+tS.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw Error("Invalid UUIDv7 was generated");return e}clone(){return new tk(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var i=this.bytes[t]-e.bytes[t];if(0!==i)return Math.sign(i)}return 0}}class tE{constructor(){this._timestamp=0,this._counter=0,this._random=new tR}generate(){var e=this.generateOrAbort();if(A(e)){this._timestamp=0;var t=this.generateOrAbort();if(A(t))throw Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this._timestamp)this._timestamp=e,this._resetCounter();else{if(!(e+1e4>this._timestamp))return;this._counter++,this._counter>0x3ffffffffff&&(this._timestamp++,this._resetCounter())}return tk.fromFieldsV7(this._timestamp,Math.trunc(this._counter/0x40000000),0x3fffffff&this._counter,this._random.nextUint32())}_resetCounter(){this._counter=1024*this._random.nextUint32()+(1023&this._random.nextUint32())}}var tx,tI=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};l&&!A(l.crypto)&&crypto.getRandomValues&&(tI=e=>crypto.getRandomValues(e));class tR{constructor(){this._buffer=new Uint32Array(8),this._cursor=1/0}nextUint32(){return this._cursor>=this._buffer.length&&(tI(this._buffer),this._cursor=0),this._buffer[this._cursor++]}}var tT=()=>tC().toString(),tC=()=>(tx||(tx=new tE)).generate(),tF="",tP=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,tO={_is_supported:()=>!!p,_error:function(e){Y.error("cookieStore error: "+e)},_get:function(e){if(p){try{for(var t=e+"=",i=p.cookie.split(";").filter(e=>e.length),r=0;r<i.length;r++){for(var s=i[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return decodeURIComponent(s.substring(t.length,s.length))}}catch(e){}return null}},_parse:function(e){var t;try{t=JSON.parse(tO._get(e))||{}}catch(e){}return t},_set:function(e,t,i,r,s){if(p)try{var n="",o="",a=function(e,t){if(t){var i=function(e,t){if(void 0===t&&(t=p),tF)return tF;if(!t||["localhost","127.0.0.1"].includes(e))return"";for(var i=e.split("."),r=Math.min(i.length,8),s="dmn_chk_"+tT();!tF&&r--;){var n=i.slice(r).join("."),o=s+"=1;domain=."+n+";path=/";t.cookie=o+";max-age=3",t.cookie.includes(s)&&(t.cookie=o+";max-age=0",tF=n)}return tF}(e);if(!i){var r,s=(r=e.match(tP))?r[0]:"";s!==i&&Y.info("Warning: cookie subdomain discovery mismatch",s,i),i=s}return i?"; domain=."+i:""}return""}(p.location.hostname,r);if(i){var l=new Date;l.setTime(l.getTime()+24*i*36e5),n="; expires="+l.toUTCString()}s&&(o="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+n+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Y.warn("cookieStore warning: large cookie, len="+c.length),p.cookie=c,c}catch(e){return}},_remove:function(e,t){if(null!=p&&p.cookie)try{tO._set(e,"",-1,t)}catch(e){return}}},t$=null,tA={_is_supported:function(){if(!D(t$))return t$;var e=!0;if(A(l))e=!1;else try{var t="__mplssupport__";tA._set(t,"xyz"),'"xyz"'!==tA._get(t)&&(e=!1),tA._remove(t)}catch(t){e=!1}return e||Y.error("localStorage unsupported; falling back to cookie store"),t$=e,e},_error:function(e){Y.error("localStorage error: "+e)},_get:function(e){try{return null==l?void 0:l.localStorage.getItem(e)}catch(e){tA._error(e)}return null},_parse:function(e){try{return JSON.parse(tA._get(e))||{}}catch(e){}return null},_set:function(e,t){try{null==l||l.localStorage.setItem(e,JSON.stringify(t))}catch(e){tA._error(e)}},_remove:function(e){try{null==l||l.localStorage.removeItem(e)}catch(e){tA._error(e)}}},tM=["distinct_id",eR,eT,eU,eH],tL=o({},tA,{_parse:function(e){try{var t={};try{t=tO._parse(e)||{}}catch(e){}var i=Z(t,JSON.parse(tA._get(e)||"{}"));return tA._set(e,i),i}catch(e){}return null},_set:function(e,t,i,r,s,n){try{tA._set(e,t,void 0,void 0,n);var o={};tM.forEach(e=>{t[e]&&(o[e]=t[e])}),Object.keys(o).length&&tO._set(e,o,i,r,s,n)}catch(e){tA._error(e)}},_remove:function(e,t){try{null==l||l.localStorage.removeItem(e),tO._remove(e,t)}catch(e){tA._error(e)}}}),tD={},tN={_is_supported:function(){return!0},_error:function(e){Y.error("memoryStorage error: "+e)},_get:function(e){return tD[e]||null},_parse:function(e){return tD[e]||null},_set:function(e,t){tD[e]=t},_remove:function(e){delete tD[e]}},tq=null,tG={_is_supported:function(){if(!D(tq))return tq;if(tq=!0,A(l))tq=!1;else try{var e="__support__";tG._set(e,"xyz"),'"xyz"'!==tG._get(e)&&(tq=!1),tG._remove(e)}catch(e){tq=!1}return tq},_error:function(e){Y.error("sessionStorage error: ",e)},_get:function(e){try{return null==l?void 0:l.sessionStorage.getItem(e)}catch(e){tG._error(e)}return null},_parse:function(e){try{return JSON.parse(tG._get(e))||null}catch(e){}return null},_set:function(e,t){try{null==l||l.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){tG._error(e)}},_remove:function(e){try{null==l||l.sessionStorage.removeItem(e)}catch(e){tG._error(e)}}},tB=function(e){return e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED",e}({});class tz{constructor(e){this._instance=e}get _config(){return this._instance.config}get consent(){return this._getDnt()?tB.DENIED:this._storedConsent}isOptedOut(){return"always"===this._config.cookieless_mode||this.consent===tB.DENIED||this.consent===tB.PENDING&&(this._config.opt_out_capturing_by_default||"on_reject"===this._config.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===tB.DENIED}optInOut(e){this._storage._set(this._storageKey,+!!e,this._config.cookie_expiration,this._config.cross_subdomain_cookie,this._config.secure_cookie)}reset(){this._storage._remove(this._storageKey,this._config.cross_subdomain_cookie)}get _storageKey(){var{token:e,opt_out_capturing_cookie_prefix:t,consent_persistence_name:i}=this._instance.config;return i||(t?t+e:"__ph_opt_in_out_"+e)}get _storedConsent(){var e=this._storage._get(this._storageKey);return j(e)?tB.GRANTED:k(H,e)?tB.DENIED:tB.PENDING}get _storage(){if(!this._persistentStore){var e=this._config.opt_out_capturing_persistence_type;this._persistentStore="localStorage"===e?tA:tO;var t="localStorage"===e?tO:tA;t._get(this._storageKey)&&(this._persistentStore._get(this._storageKey)||this.optInOut(j(t._get(this._storageKey))),t._remove(this._storageKey,this._config.cross_subdomain_cookie))}return this._persistentStore}_getDnt(){return!!this._config.respect_dnt&&!!eo([null==_?void 0:_.doNotTrack,null==_?void 0:_.msDoNotTrack,b.doNotTrack],e=>j(e))}}var tj=J("[Dead Clicks]"),tH=()=>!0,tU=e=>{var t,i=!(null==(t=e.instance.persistence)||!t.get_property(ev)),r=e.instance.config.capture_dead_clicks;return G(r)?r:i};class tW{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,t,i){this.instance=e,this.isEnabled=t,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[ev]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this._loadScript(()=>{this._start()})}_loadScript(e){var t,i;null!=(t=b.__PosthogExtensions__)&&t.initDeadClicksAutocapture&&e(),null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",t=>{t?tj.error("failed to load script",t):e()})}_start(){var e;if(p){if(!this._lazyLoadedDeadClicksAutocapture&&null!=(e=b.__PosthogExtensions__)&&e.initDeadClicksAutocapture){var t=O(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=b.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this._lazyLoadedDeadClicksAutocapture.start(p),tj.info("starting...")}}else tj.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,tj.info("stopping..."))}}var tV=J("[ExceptionAutocapture]");class tY{constructor(e){var t,i,r;this._startCapturing=()=>{var e;if(l&&this.isEnabled&&null!=(e=b.__PosthogExtensions__)&&e.errorWrappingFunctions){var t=b.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,i=b.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,r=b.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this._unwrapOnError&&this._config.capture_unhandled_errors&&(this._unwrapOnError=t(this.captureException.bind(this))),!this._unwrapUnhandledRejection&&this._config.capture_unhandled_rejections&&(this._unwrapUnhandledRejection=i(this.captureException.bind(this))),!this._unwrapConsoleError&&this._config.capture_console_errors&&(this._unwrapConsoleError=r(this.captureException.bind(this)))}catch(e){tV.error("failed to start",e),this._stopCapturing()}}},this._instance=e,this._remoteEnabled=!(null==(t=this._instance.persistence)||!t.props[e_]),this._config=this._requiredConfig(),this._rateLimiter=new W({refillRate:null!=(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?i:1,bucketSize:null!=(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?r:10,refillInterval:1e4,_logger:tV}),this.startIfEnabled()}_requiredConfig(){var e=this._instance.config.capture_exceptions,t={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return O(e)?t=o({},t,e):(A(e)?this._remoteEnabled:e)&&(t=o({},t,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),t}get isEnabled(){return this._config.capture_console_errors||this._config.capture_unhandled_errors||this._config.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(tV.info("enabled"),this._loadScript(this._startCapturing))}_loadScript(e){var t,i;null!=(t=b.__PosthogExtensions__)&&t.errorWrappingFunctions&&e(),null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"exception-autocapture",t=>{if(t)return tV.error("failed to load script",t);e()})}_stopCapturing(){var e,t,i;null==(e=this._unwrapOnError)||e.call(this),this._unwrapOnError=void 0,null==(t=this._unwrapUnhandledRejection)||t.call(this),this._unwrapUnhandledRejection=void 0,null==(i=this._unwrapConsoleError)||i.call(this),this._unwrapConsoleError=void 0}onRemoteConfig(e){var t=e.autocaptureExceptions;this._remoteEnabled=!!t,this._config=this._requiredConfig(),this._instance.persistence&&this._instance.persistence.register({[e_]:this._remoteEnabled}),this.startIfEnabled()}captureException(e){e.$exception_personURL=this._instance.requestRouter.endpointFor("ui")+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var t,i=null!=(t=e.$exception_list[0].type)?t:"Exception";this._rateLimiter.consumeRateLimit(i)?tV.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}}function tJ(e){return!A(Event)&&tK(e,Event)}function tK(e,t){try{return e instanceof t}catch(e){return!1}}function tX(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return tK(e,Error)}}function tQ(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function tZ(e){return tQ(e,"DOMError")}var t0=/\(error: (.*)\)/;function t1(e,t,i,r){var s={platform:"web:javascript",filename:e,function:"<anonymous>"===t?"?":t,in_app:!0};return A(i)||(s.lineno=i),A(r)||(s.colno=r),s}var t2,t3,t5,t6=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,t8=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,t4=/\((\S*)(?::(\d+))(?::(\d+))\)/,t7=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,t9=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ie=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return function(e,t){void 0===t&&(t=0);for(var i=[],s=e.split("\n"),n=t;n<s.length;n++){var a=s[n];if(!(a.length>1024)){var l=t0.test(a)?a.replace(t0,"$1"):a;if(!l.match(/\S*Error: /)){for(var c of r){var u=c(l);if(u){i.push(u);break}}if(i.length>=50)break}}}if(!i.length)return[];var d=Array.from(i);return d.reverse(),d.slice(0,50).map(e=>{var t;return o({},e,{filename:e.filename||((t=d)[t.length-1]||{}).filename,function:e.function||"?"})})}}([30,e=>{var t=t6.exec(e);if(t){var[,i,r,s]=t;return t1(i,"?",+r,+s)}var n=t8.exec(e);if(n){if(n[2]&&0===n[2].indexOf("eval")){var o=t4.exec(n[2]);o&&(n[2]=o[1],n[3]=o[2],n[4]=o[3])}var[a,l]=it(n[1]||"?",n[2]);return t1(l,a,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}}],[50,e=>{var t=t7.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){var i=t9.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}var r=t[3],s=t[1]||"?";return[s,r]=it(s,r),t1(r,s,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]),it=(e,t)=>{var i=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return i||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",i?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]},ii=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function ir(e,t){void 0===t&&(t=0);var i=e.stacktrace||e.stack||"",r=e&&is.test(e.message)?1:0;try{var s,n,o=(s=ie(i,r),n=function(e){var t=globalThis._posthogChunkIds;if(!t)return{};var i=Object.keys(t);return t5&&i.length===t3||(t3=i.length,t5=i.reduce((i,r)=>{t2||(t2={});var s=t2[r];if(s)i[s[0]]=s[1];else for(var n=e(r),o=n.length-1;o>=0;o--){var a=n[o],l=null==a?void 0:a.filename,c=t[r];if(l&&c){i[l]=c,t2[r]=[l,c];break}}return i},{})),t5}(ie),s.forEach(e=>{e.filename&&(e.chunk_id=n[e.filename])}),s);return o.slice(0,o.length-t)}catch(e){}return[]}var is=/Minified React error #\d+;/i;function io(e,t){return{$exception_list:function e(t,i){var r,s,n,o,a,l,c,u,d=(r=t,s=i,l=ir(r),c=null==(o=null==s?void 0:s.handled)||o,u=null!=(a=null==s?void 0:s.synthetic)&&a,{type:null!=s&&s.overrideExceptionType?s.overrideExceptionType:r.name,value:(n=r.message).error&&"string"==typeof n.error.message?String(n.error.message):String(n),stacktrace:{frames:l,type:"raw"},mechanism:{handled:c,synthetic:u}});return t.cause&&tX(t.cause)&&t.cause!==t?[d,...e(t.cause,{handled:null==i?void 0:i.handled,synthetic:null==i?void 0:i.synthetic})]:[d]}(e,t),$exception_level:"error"}}function ia(e,t){var i,r,s,n=null==(i=null==t?void 0:t.handled)||i,o=null==(r=null==t?void 0:t.synthetic)||r,a={type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:null!=(s=null==t?void 0:t.defaultExceptionType)?s:"Error",value:e||(null==t?void 0:t.defaultExceptionMessage),mechanism:{handled:n,synthetic:o}};if(null!=t&&t.syntheticException){var l=ir(t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function il(e,t,i){try{if(!(t in e))return()=>{};var r=e[t],s=i(r);return P(s)&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__posthog_wrapped__:{enumerable:!1,value:!0}})),e[t]=s,()=>{e[t]=r}}catch(e){return()=>{}}}class ic{constructor(e){var t;this._instance=e,this._lastPathname=(null==l||null==(t=l.location)?void 0:t.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(Y.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this._popstateListener&&this._popstateListener(),this._popstateListener=void 0,Y.info("History API monitoring stopped")}monitorHistoryChanges(){var e,t;if(l&&l.history){var i=this;null!=(e=l.history.pushState)&&e.__posthog_wrapped__||il(l.history,"pushState",e=>function(t,r,s){e.call(this,t,r,s),i._capturePageview("pushState")}),null!=(t=l.history.replaceState)&&t.__posthog_wrapped__||il(l.history,"replaceState",e=>function(t,r,s){e.call(this,t,r,s),i._capturePageview("replaceState")}),this._setupPopstateListener()}}_capturePageview(e){try{var t,i=null==l||null==(t=l.location)?void 0:t.pathname;if(!i)return;i!==this._lastPathname&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this._lastPathname=i}catch(t){Y.error("Error capturing "+e+" pageview",t)}}_setupPopstateListener(){if(!this._popstateListener){var e=()=>{this._capturePageview("popstate")};ea(l,"popstate",e),this._popstateListener=()=>{l&&l.removeEventListener("popstate",e)}}}}function iu(e){var t,i;return(null==(t=JSON.stringify(e,(i=[],function(e,t){if(O(t)){for(;i.length>0&&i[i.length-1]!==this;)i.pop();return i.includes(t)?"[Circular]":(i.push(t),t)}return t})))?void 0:t.length)||0}var id=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(id||{}),ih=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ih||{}),i_="[SessionRecording]",ip="redacted",ig={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},iv=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],im=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],iy=["/s/","/e/","/i/"];function ib(e,t,i,r){if(N(e))return e;var s=(null==t?void 0:t["content-length"])||new Blob([e]).size;return M(s)&&(s=parseInt(s)),s>i?i_+" "+r+" body too large to record ("+s+" bytes)":e}function iw(e,t){if(N(e))return e;var i=e;return to(i,!1)||(i=i_+" "+t+" body "+ip),Q(im,e=>{var r,s;null!=(r=i)&&r.length&&-1!==(null==(s=i)?void 0:s.indexOf(e))&&(i=i_+" "+t+" body "+ip+" as might contain: "+e)}),i}class iS{constructor(e,t){var i,r;void 0===t&&(t={}),this._loggedTracker={},this._onNodeRateLimited=e=>{if(!this._loggedTracker[e]){this._loggedTracker[e]=!0;var t,i,r=this._getNode(e);null==(t=(i=this._options).onBlockedNode)||t.call(i,e,r)}},this._getNodeOrRelevantParent=e=>{var t=this._getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var i=t.closest("svg");if(i)return[this._rrweb.mirror.getId(i),i]}return[e,t]},this._getNode=e=>this._rrweb.mirror.getNode(e),this._numberOfChanges=e=>{var t,i,r,s,n,o,a,l;return(null!=(t=null==(i=e.removes)?void 0:i.length)?t:0)+(null!=(r=null==(s=e.attributes)?void 0:s.length)?r:0)+(null!=(n=null==(o=e.texts)?void 0:o.length)?n:0)+(null!=(a=null==(l=e.adds)?void 0:l.length)?a:0)},this.throttleMutations=e=>{if(3!==e.type||0!==e.data.source)return e;var t=e.data,i=this._numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter(e=>{var[t]=this._getNodeOrRelevantParent(e.id);return!this._rateLimiter.consumeRateLimit(t)&&e}));var r=this._numberOfChanges(t);return 0!==r||i===r?e:void 0},this._rrweb=e,this._options=t,this._rateLimiter=new W({bucketSize:null!=(i=this._options.bucketSize)?i:100,refillRate:null!=(r=this._options.refillRate)?r:10,refillInterval:1e3,_onBucketRateLimited:this._onNodeRateLimited,_logger:Y})}}var ik=Uint8Array,iE=Uint16Array,ix=Uint32Array,iI=new ik([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),iR=new ik([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),iT=new ik([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iC=function(e,t){for(var i=new iE(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];var s=new ix(i[30]);for(r=1;r<30;++r)for(var n=i[r];n<i[r+1];++n)s[n]=n-i[r]<<5|r;return[i,s]},iF=iC(iI,2),iP=iF[0],iO=iF[1];iP[28]=258,iO[258]=28;for(var i$=iC(iR,0)[1],iA=new iE(32768),iM=0;iM<32768;++iM){var iL=(43690&iM)>>>1|(21845&iM)<<1;iL=(61680&(iL=(52428&iL)>>>2|(13107&iL)<<2))>>>4|(3855&iL)<<4,iA[iM]=((65280&iL)>>>8|(255&iL)<<8)>>>1}var iD=function(e,t,i){for(var r=e.length,s=0,n=new iE(t);s<r;++s)++n[e[s]-1];var o,a=new iE(t);for(s=0;s<t;++s)a[s]=a[s-1]+n[s-1]<<1;if(i){o=new iE(1<<t);var l=15-t;for(s=0;s<r;++s)if(e[s])for(var c=s<<4|e[s],u=t-e[s],d=a[e[s]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[iA[d]>>>l]=c}else for(o=new iE(r),s=0;s<r;++s)o[s]=iA[a[e[s]-1]++]>>>15-e[s];return o},iN=new ik(288);for(iM=0;iM<144;++iM)iN[iM]=8;for(iM=144;iM<256;++iM)iN[iM]=9;for(iM=256;iM<280;++iM)iN[iM]=7;for(iM=280;iM<288;++iM)iN[iM]=8;var iq=new ik(32);for(iM=0;iM<32;++iM)iq[iM]=5;var iG=iD(iN,9,0),iB=iD(iq,5,0),iz=function(e){return(e/8|0)+(7&e&&1)},ij=function(e,t,i){(null==i||i>e.length)&&(i=e.length);var r=new(e instanceof iE?iE:e instanceof ix?ix:ik)(i-t);return r.set(e.subarray(t,i)),r},iH=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8},iU=function(e,t,i){i<<=7&t;var r=t/8|0;e[r]|=i,e[r+1]|=i>>>8,e[r+2]|=i>>>16},iW=function(e,t){for(var i=[],r=0;r<e.length;++r)e[r]&&i.push({s:r,f:e[r]});var s=i.length,n=i.slice();if(!s)return[new ik(0),0];if(1==s){var o=new ik(i[0].s+1);return o[i[0].s]=1,[o,1]}i.sort(function(e,t){return e.f-t.f}),i.push({s:-1,f:25001});var a=i[0],l=i[1],c=0,u=1,d=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=s-1;)a=i[i[c].f<i[d].f?c++:d++],l=i[c!=u&&i[c].f<i[d].f?c++:d++],i[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=n[0].s;for(r=1;r<s;++r)n[r].s>h&&(h=n[r].s);var _=new iE(h+1),p=iV(i[u-1],_,0);if(p>t){r=0;var g=0,f=p-t,v=1<<f;for(n.sort(function(e,t){return _[t.s]-_[e.s]||e.f-t.f});r<s;++r){var m=n[r].s;if(!(_[m]>t))break;g+=v-(1<<p-_[m]),_[m]=t}for(g>>>=f;g>0;){var y=n[r].s;_[y]<t?g-=1<<t-_[y]++-1:++r}for(;r>=0&&g;--r){var b=n[r].s;_[b]==t&&(--_[b],++g)}p=t}return[new ik(_),p]},iV=function(e,t,i){return -1==e.s?Math.max(iV(e.l,t,i+1),iV(e.r,t,i+1)):t[e.s]=i},iY=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new iE(++t),r=0,s=e[0],n=1,o=function(e){i[r++]=e},a=1;a<=t;++a)if(e[a]==s&&a!=t)++n;else{if(!s&&n>2){for(;n>138;n-=138)o(32754);n>2&&(o(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(o(s),--n;n>6;n-=6)o(8304);n>2&&(o(n-3<<5|8208),n=0)}for(;n--;)o(s);n=1,s=e[a]}return[i.subarray(0,r),t]},iJ=function(e,t){for(var i=0,r=0;r<t.length;++r)i+=e[r]*t[r];return i},iK=function(e,t,i){var r=i.length,s=iz(t+2);e[s]=255&r,e[s+1]=r>>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var n=0;n<r;++n)e[s+n+4]=i[n];return 8*(s+4+r)},iX=function(e,t,i,r,s,n,o,a,l,c,u){iH(t,u++,i),++s[256];for(var d=iW(s,15),h=d[0],_=d[1],p=iW(n,15),g=p[0],f=p[1],v=iY(h),m=v[0],y=v[1],b=iY(g),w=b[0],S=b[1],k=new iE(19),E=0;E<m.length;++E)k[31&m[E]]++;for(E=0;E<w.length;++E)k[31&w[E]]++;for(var x=iW(k,7),I=x[0],R=x[1],T=19;T>4&&!I[iT[T-1]];--T);var C,F,P,O,$=c+5<<3,A=iJ(s,iN)+iJ(n,iq)+o,M=iJ(s,h)+iJ(n,g)+o+14+3*T+iJ(k,I)+(2*k[16]+3*k[17]+7*k[18]);if($<=A&&$<=M)return iK(t,u,e.subarray(l,l+c));if(iH(t,u,1+(M<A)),u+=2,M<A){C=iD(h,_,0),F=h,P=iD(g,f,0),O=g;var L=iD(I,R,0);for(iH(t,u,y-257),iH(t,u+5,S-1),iH(t,u+10,T-4),u+=14,E=0;E<T;++E)iH(t,u+3*E,I[iT[E]]);u+=3*T;for(var D=[m,w],N=0;N<2;++N){var q=D[N];for(E=0;E<q.length;++E){var G=31&q[E];iH(t,u,L[G]),u+=I[G],G>15&&(iH(t,u,q[E]>>>5&127),u+=q[E]>>>12)}}}else C=iG,F=iN,P=iB,O=iq;for(E=0;E<a;++E)if(r[E]>255){iU(t,u,C[(G=r[E]>>>18&31)+257]),u+=F[G+257],G>7&&(iH(t,u,r[E]>>>23&31),u+=iI[G]);var B=31&r[E];iU(t,u,P[B]),u+=O[B],B>3&&(iU(t,u,r[E]>>>5&8191),u+=iR[B])}else iU(t,u,C[r[E]]),u+=F[r[E]];return iU(t,u,C[256]),u+F[256]},iQ=new ix([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),iZ=function(){for(var e=new ix(256),t=0;t<256;++t){for(var i=t,r=9;--r;)i=(1&i&&0xedb88320)^i>>>1;e[t]=i}return e}(),i0=function(){var e=0xffffffff;return{p:function(t){for(var i=e,r=0;r<t.length;++r)i=iZ[255&i^t[r]]^i>>>8;e=i},d:function(){return 0xffffffff^e}}},i1=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8},i2=function(e,t){var i=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:2*(9==t.level),e[9]=3,0!=t.mtime&&i1(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){e[3]=8;for(var r=0;r<=i.length;++r)e[r+10]=i.charCodeAt(r)}};function i3(e,t){void 0===t&&(t={});var i,r,s,n=i0(),o=e.length;n.p(e);var a=(r=t,s=10+((i=t).filename&&i.filename.length+1||0),function(e,t,i,r,s,n){var o=e.length,a=new ik(r+o+5*(1+Math.floor(o/7e3))+8),l=a.subarray(r,a.length-s),c=0;if(!t||o<8)for(var u=0;u<=o;u+=65535){var d=u+65535;d<o?c=iK(l,c,e.subarray(u,d)):(l[u]=n,c=iK(l,c,e.subarray(u,o)))}else{for(var h=iQ[t-1],_=h>>>13,p=8191&h,g=(1<<i)-1,f=new iE(32768),v=new iE(g+1),m=Math.ceil(i/3),y=2*m,b=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<y)&g},w=new ix(25e3),S=new iE(288),k=new iE(32),E=0,x=0,I=(u=0,0),R=0,T=0;u<o;++u){var C=b(u),F=32767&u,P=v[C];if(f[F]=P,v[C]=F,R<=u){var O=o-u;if((E>7e3||I>24576)&&O>423){c=iX(e,l,0,w,S,k,x,I,T,u-T,c),I=E=x=0,T=u;for(var $=0;$<286;++$)S[$]=0;for($=0;$<30;++$)k[$]=0}var A=2,M=0,L=p,D=F-P&32767;if(O>2&&C==b(u-D))for(var N=Math.min(_,O)-1,q=Math.min(32767,u),G=Math.min(258,O);D<=q&&--L&&F!=P;){if(e[u+A]==e[u+A-D]){for(var B=0;B<G&&e[u+B]==e[u+B-D];++B);if(B>A){if(A=B,M=D,B>N)break;var z=Math.min(D,B-2),j=0;for($=0;$<z;++$){var H=u-D+$+32768&32767,U=H-f[H]+32768&32767;U>j&&(j=U,P=H)}}}D+=(F=P)-(P=f[F])+32768&32767}if(M){w[I++]=0x10000000|iO[A]<<18|i$[M];var W=31&iO[A],V=31&i$[M];x+=iI[W]+iR[V],++S[257+W],++k[V],R=u+A,++E}else w[I++]=e[u],++S[e[u]]}}c=iX(e,l,n,w,S,k,x,I,T,u-T,c)}return ij(a,0,r+iz(c)+s)}(e,null==r.level?6:r.level,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+r.mem,s,8,!0)),l=a.length;return i2(a,t),i1(a,l-8,n.d()),i1(a,l-4,o),a}function i5(e,t){var i=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new ik(e.length+(e.length>>>1)),s=0,n=function(e){r[s++]=e},o=0;o<i;++o){if(s+5>r.length){var a=new ik(s+8+(i-o<<1));a.set(r),r=a}var l=e.charCodeAt(o);l<128||t?n(l):(l<2048?n(192|l>>>6):(l>55295&&l<57344?(n(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),n(128|l>>>12&63)):n(224|l>>>12),n(128|l>>>6&63)),n(128|63&l))}return ij(r,0,s)}var i6="disabled",i8="sampled",i4="active",i7="buffering",i9="paused",re="trigger",rt=re+"_activated",ri=re+"_pending",rr=re+"_"+i6;function rs(e,t){return t.some(t=>"regex"===t.matching&&new RegExp(t.url).test(e))}class rn{constructor(e){this._matchers=e}triggerStatus(e){var t=this._matchers.map(t=>t.triggerStatus(e));return t.includes(rt)?rt:t.includes(ri)?ri:rr}stop(){this._matchers.forEach(e=>e.stop())}}class ro{constructor(e){this._matchers=e}triggerStatus(e){var t=new Set;for(var i of this._matchers)t.add(i.triggerStatus(e));switch(t.delete(rr),t.size){case 0:return rr;case 1:return Array.from(t)[0];default:return ri}}stop(){this._matchers.forEach(e=>e.stop())}}class ra{triggerStatus(){return ri}stop(){}}class rl{constructor(e){this._urlTriggers=[],this._urlBlocklist=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var t,i;this._urlTriggers=(null==(t=e.sessionRecording)?void 0:t.urlTriggers)||[],this._urlBlocklist=(null==(i=e.sessionRecording)?void 0:i.urlBlocklist)||[]}_urlTriggerStatus(e){var t;return 0===this._urlTriggers.length?rr:(null==(t=this._instance)?void 0:t.get_property(eC))===e?rt:ri}triggerStatus(e){var t=this._urlTriggerStatus(e),i=t===rt?rt:t===ri?ri:rr;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,t,i){if(void 0!==l&&l.location.href){var r=l.location.href,s=this.urlBlocked,n=rs(r,this._urlBlocklist);s&&n||(n&&!s?e():!n&&s&&t(),rs(r,this._urlTriggers)&&i("url"))}}stop(){}}class rc{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this._flaglistenerCleanup=()=>{},this._instance=e}triggerStatus(){var e=ri;return N(this.linkedFlag)&&(e=rr),this.linkedFlagSeen&&(e=rt),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,t){var i;if(this.linkedFlag=(null==(i=e.sessionRecording)?void 0:i.linkedFlag)||null,!N(this.linkedFlag)&&!this.linkedFlagSeen){var r=M(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=M(this.linkedFlag)?null:this.linkedFlag.variant;this._flaglistenerCleanup=this._instance.onFeatureFlags((e,i)=>{var n=!1;if(O(i)&&r in i){var o=i[r];n=G(o)?!0===o:s?o===s:!!o}this.linkedFlagSeen=n,n&&t(r,s)})}}stop(){this._flaglistenerCleanup()}}class ru{constructor(e){this._eventTriggers=[],this._instance=e}onRemoteConfig(e){var t;this._eventTriggers=(null==(t=e.sessionRecording)?void 0:t.eventTriggers)||[]}_eventTriggerStatus(e){var t;return 0===this._eventTriggers.length?rr:(null==(t=this._instance)?void 0:t.get_property(eF))===e?rt:ri}triggerStatus(e){var t=this._eventTriggerStatus(e),i=t===rt?rt:t===ri?ri:rr;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}}function rd(e){return e.isRecordingEnabled?i7:i6}function rh(e){if(!e.receivedFlags)return i7;if(!e.isRecordingEnabled)return i6;if(e.urlTriggerMatching.urlBlocked)return i9;var t=!0===e.isSampled,i=new rn([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId);return t?i8:i===rt?i4:i===ri?i7:!1===e.isSampled?i6:i4}function r_(e){if(!e.receivedFlags)return i7;if(!e.isRecordingEnabled)return i6;if(e.urlTriggerMatching.urlBlocked)return i9;var t=new ro([e.eventTriggerMatching,e.urlTriggerMatching,e.linkedFlagMatching]).triggerStatus(e.sessionId),i=t!==rr,r=G(e.isSampled);return i&&t===ri?i7:i&&t===rr||r&&!e.isSampled?i6:!0===e.isSampled?i8:i4}var rp="[SessionRecording]",rg=J(rp);function rf(){var e;return null==b||null==(e=b.__PosthogExtensions__)||null==(e=e.rrweb)?void 0:e.record}var rv=[ih.MouseMove,ih.MouseInteraction,ih.Scroll,ih.ViewportResize,ih.Input,ih.TouchMove,ih.MediaInteraction,ih.Drag],rm=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function ry(e){return function(e,t){for(var i="",r=0;r<e.length;)i+=String.fromCharCode(e[r++]);return i}(i3(i5(JSON.stringify(e))))}function rb(e){return e.type===id.Custom&&"sessionIdle"===e.data.tag}class rw{get sessionId(){return this._sessionId}get _sessionIdleThresholdMilliseconds(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this._captureStarted}get _sessionManager(){if(!this._instance.sessionManager)throw Error(rp+" must be started with a valid sessionManager.");return this._instance.sessionManager}get _fullSnapshotIntervalMillis(){var e,t;return this._triggerMatching.triggerStatus(this.sessionId)===ri?6e4:null!=(e=null==(t=this._instance.config.session_recording)?void 0:t.full_snapshot_interval_millis)?e:3e5}get _isSampled(){var e=this._instance.get_property(eT);return G(e)?e:null}get _sessionDuration(){var e,t,i=null==(e=this._buffer)?void 0:e.data[(null==(t=this._buffer)?void 0:t.data.length)-1],{sessionStartTimestamp:r}=this._sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get _isRecordingEnabled(){var e=!!this._instance.get_property(ey),t=!this._instance.config.disable_session_recording;return l&&e&&t}get _isConsoleLogCaptureEnabled(){var e=!!this._instance.get_property(eb),t=this._instance.config.enable_recording_console_log;return null!=t?t:e}get _canvasRecording(){var e,t,i,r,s,n,o=this._instance.config.session_recording.captureCanvas,a=this._instance.get_property(ek),l=null!=(e=null!=(t=null==o?void 0:o.recordCanvas)?t:null==a?void 0:a.enabled)&&e,c=null!=(i=null!=(r=null==o?void 0:o.canvasFps)?r:null==a?void 0:a.fps)?i:4,u=null!=(s=null!=(n=null==o?void 0:o.canvasQuality)?n:null==a?void 0:a.quality)?s:.4;if("string"==typeof u){var d=parseFloat(u);u=isNaN(d)?.4:d}return{enabled:l,fps:U(c,0,12,rg.createLogger("canvas recording fps"),4),quality:U(u,0,1,rg.createLogger("canvas recording quality"),.4)}}get _networkPayloadCapture(){var e,t,i=this._instance.get_property(ew),r={recordHeaders:null==(e=this._instance.config.session_recording)?void 0:e.recordHeaders,recordBody:null==(t=this._instance.config.session_recording)?void 0:t.recordBody},s=(null==r?void 0:r.recordHeaders)||(null==i?void 0:i.recordHeaders),n=(null==r?void 0:r.recordBody)||(null==i?void 0:i.recordBody),o=O(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,a=!!(G(o)?o:null==i?void 0:i.capturePerformance);return s||n||a?{recordHeaders:s,recordBody:n,recordPerformance:a}:void 0}get _masking(){var e,t,i,r,s,n,o=this._instance.get_property(eS),a={maskAllInputs:null==(e=this._instance.config.session_recording)?void 0:e.maskAllInputs,maskTextSelector:null==(t=this._instance.config.session_recording)?void 0:t.maskTextSelector,blockSelector:null==(i=this._instance.config.session_recording)?void 0:i.blockSelector},l=null!=(r=null==a?void 0:a.maskAllInputs)?r:null==o?void 0:o.maskAllInputs,c=null!=(s=null==a?void 0:a.maskTextSelector)?s:null==o?void 0:o.maskTextSelector,u=null!=(n=null==a?void 0:a.blockSelector)?n:null==o?void 0:o.blockSelector;return A(l)&&A(c)&&A(u)?void 0:{maskAllInputs:null==l||l,maskTextSelector:c,blockSelector:u}}get _sampleRate(){var e=this._instance.get_property(eE);return q(e)?e:null}get _minimumDuration(){var e=this._instance.get_property(ex);return q(e)?e:null}get status(){return this._receivedFlags?this._statusMatcher({receivedFlags:this._receivedFlags,isRecordingEnabled:this._isRecordingEnabled,isSampled:this._isSampled,urlTriggerMatching:this._urlTriggerMatching,eventTriggerMatching:this._eventTriggerMatching,linkedFlagMatching:this._linkedFlagMatching,sessionId:this.sessionId}):i7}constructor(e){if(this._statusMatcher=rd,this._receivedFlags=!1,this._queuedRRWebEvents=[],this._isIdle="unknown",this._lastActivityTimestamp=Date.now(),this._triggerMatching=new ra,this._removePageViewCaptureHook=void 0,this._onSessionIdListener=void 0,this._persistFlagsOnSessionListener=void 0,this._samplingSessionListener=void 0,this._removeEventTriggerCaptureHook=void 0,this._forceAllowLocalhostNetworkCapture=!1,this._onBeforeUnload=()=>{this._flushBuffer()},this._onOffline=()=>{this._tryAddCustomEvent("browser offline",{})},this._onOnline=()=>{this._tryAddCustomEvent("browser online",{})},this._onVisibilityChange=()=>{if(null!=p&&p.visibilityState){var e="window "+p.visibilityState;this._tryAddCustomEvent(e,{})}},this._instance=e,this._captureStarted=!1,this._endpoint="/s/",this._stopRrweb=void 0,this._receivedFlags=!1,!this._instance.sessionManager)throw rg.error("started without valid sessionManager"),Error(rp+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(rp+' cannot be used with cookieless_mode="always"');this._linkedFlagMatching=new rc(this._instance),this._urlTriggerMatching=new rl(this._instance),this._eventTriggerMatching=new ru(this._instance);var{sessionId:t,windowId:i}=this._sessionManager.checkAndGetSessionAndWindowId();this._sessionId=t,this._windowId=i,this._buffer=this._clearBuffer(),this._sessionIdleThresholdMilliseconds>=this._sessionManager.sessionTimeoutMs&&rg.warn("session_idle_threshold_ms ("+this._sessionIdleThresholdMilliseconds+") is greater than the session timeout ("+this._sessionManager.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this._isRecordingEnabled?(this._startCapture(e),ea(l,"beforeunload",this._onBeforeUnload),ea(l,"offline",this._onOffline),ea(l,"online",this._onOnline),ea(l,"visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),N(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this._instance.on("eventCaptured",e=>{try{if("$pageview"===e.event){var t=null!=e&&e.properties.$current_url?this._maskUrl(null==e?void 0:e.properties.$current_url):"";if(!t)return;this._tryAddCustomEvent("$pageview",{href:t})}}catch(e){rg.error("Could not add $pageview to rrweb session",e)}})),this._onSessionIdListener||(this._onSessionIdListener=this._sessionManager.onSessionId((e,t,i)=>{var r,s;i&&(this._tryAddCustomEvent("$session_id_change",{sessionId:e,windowId:t,changeReason:i}),null==(r=this._instance)||null==(r=r.persistence)||r.unregister(eF),null==(s=this._instance)||null==(s=s.persistence)||s.unregister(eC))}))):this.stopRecording()}stopRecording(){var e,t,i,r;this._captureStarted&&this._stopRrweb&&(this._stopRrweb(),this._stopRrweb=void 0,this._captureStarted=!1,null==l||l.removeEventListener("beforeunload",this._onBeforeUnload),null==l||l.removeEventListener("offline",this._onOffline),null==l||l.removeEventListener("online",this._onOnline),null==l||l.removeEventListener("visibilitychange",this._onVisibilityChange),this._clearBuffer(),clearInterval(this._fullSnapshotTimer),null==(e=this._removePageViewCaptureHook)||e.call(this),this._removePageViewCaptureHook=void 0,null==(t=this._removeEventTriggerCaptureHook)||t.call(this),this._removeEventTriggerCaptureHook=void 0,null==(i=this._onSessionIdListener)||i.call(this),this._onSessionIdListener=void 0,null==(r=this._samplingSessionListener)||r.call(this),this._samplingSessionListener=void 0,this._eventTriggerMatching.stop(),this._urlTriggerMatching.stop(),this._linkedFlagMatching.stop(),rg.info("stopped"))}_resetSampling(){var e;null==(e=this._instance.persistence)||e.unregister(eT)}_makeSamplingDecision(e){var t,i=this._sessionId!==e,r=this._sampleRate;if(q(r)){var s=this._isSampled,n=i||!G(s),o=n?function(e){for(var t=0,i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i)|0;return Math.abs(t)}(e)%100<U(100*r,0,100,Y):s;n&&(o?this._reportStarted(i8):rg.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:r,isSampled:o})),null==(t=this._instance.persistence)||t.register({[eT]:o})}else this._resetSampling()}onRemoteConfig(e){var t,i,r,s;this._tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),null!=(t=e.sessionRecording)&&t.endpoint&&(this._endpoint=null==(s=e.sessionRecording)?void 0:s.endpoint),this._setupSampling(),"any"===(null==(i=e.sessionRecording)?void 0:i.triggerMatchType)?(this._statusMatcher=rh,this._triggerMatching=new rn([this._eventTriggerMatching,this._urlTriggerMatching])):(this._statusMatcher=r_,this._triggerMatching=new ro([this._eventTriggerMatching,this._urlTriggerMatching])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:null==(r=e.sessionRecording)?void 0:r.triggerMatchType}),this._urlTriggerMatching.onRemoteConfig(e),this._eventTriggerMatching.onRemoteConfig(e),this._linkedFlagMatching.onRemoteConfig(e,(e,t)=>{this._reportStarted("linked_flag_matched",{flag:e,variant:t})}),this._receivedFlags=!0,this.startIfEnabledOrStop()}_setupSampling(){q(this._sampleRate)&&N(this._samplingSessionListener)&&(this._samplingSessionListener=this._sessionManager.onSessionId(e=>{this._makeSamplingDecision(e)}))}_persistRemoteConfig(e){if(this._instance.persistence){var t,i=this._instance.persistence,r=()=>{var t,r,s,n,a,l,c,u,d,h=null==(t=e.sessionRecording)?void 0:t.sampleRate,_=N(h)?null:parseFloat(h);N(_)&&this._resetSampling();var p=null==(r=e.sessionRecording)?void 0:r.minimumDurationMilliseconds;i.register({[ey]:!!e.sessionRecording,[eb]:null==(s=e.sessionRecording)?void 0:s.consoleLogRecordingEnabled,[ew]:o({capturePerformance:e.capturePerformance},null==(n=e.sessionRecording)?void 0:n.networkPayloadCapture),[eS]:null==(a=e.sessionRecording)?void 0:a.masking,[ek]:{enabled:null==(l=e.sessionRecording)?void 0:l.recordCanvas,fps:null==(c=e.sessionRecording)?void 0:c.canvasFps,quality:null==(u=e.sessionRecording)?void 0:u.canvasQuality},[eE]:_,[ex]:A(p)?null:p,[eI]:null==(d=e.sessionRecording)?void 0:d.scriptConfig})};r(),null==(t=this._persistFlagsOnSessionListener)||t.call(this),this._persistFlagsOnSessionListener=this._sessionManager.onSessionId(r)}}log(e,t){var i;void 0===t&&(t="log"),null==(i=this._instance.sessionRecording)||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:t,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){if(!A(Object.assign)&&!A(Array.from)&&!(this._captureStarted||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var t;(this._captureStarted=!0,this._sessionManager.checkAndGetSessionAndWindowId(),rf())?this._onScriptLoaded():null==(t=b.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this._instance,this._scriptName,e=>{if(e)return rg.error("could not load recorder",e);this._onScriptLoaded()}),rg.info("starting"),this.status===i4&&this._reportStarted(e||"recording_initialized")}}get _scriptName(){var e;return(null==(e=this._instance)||null==(e=e.persistence)||null==(e=e.get_property(eI))?void 0:e.script)||"recorder"}_isInteractiveEvent(e){var t;return 3===e.type&&-1!==rv.indexOf(null==(t=e.data)?void 0:t.source)}_updateWindowAndSessionIds(e){var t=this._isInteractiveEvent(e);t||this._isIdle||e.timestamp-this._lastActivityTimestamp>this._sessionIdleThresholdMilliseconds&&(this._isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this._sessionIdleThresholdMilliseconds,bufferLength:this._buffer.data.length,bufferSize:this._buffer.size}),this._flushBuffer());var i=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this._isIdle)){var r="unknown"===this._isIdle;this._isIdle=!1,r||(this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this._isIdle){var{windowId:s,sessionId:n}=this._sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),o=this._sessionId!==n,a=this._windowId!==s;this._windowId=s,this._sessionId=n,o||a?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(t){return this._queuedRRWebEvents.length<10?this._queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):rg.warn("could not emit queued rrweb event.",t,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(rm(()=>rf().addCustomEvent(e,t)))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(rm(()=>rf().takeFullSnapshot()))}_onScriptLoaded(){var e,t,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};for(var[n,a]of Object.entries(this._instance.config.session_recording||{}))n in s&&("maskInputOptions"===n?s.maskInputOptions=o({password:!0},a):s[n]=a);this._canvasRecording&&this._canvasRecording.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this._canvasRecording.fps},s.dataURLOptions={type:"image/webp",quality:this._canvasRecording.quality}),this._masking&&(s.maskAllInputs=null==(t=this._masking.maskAllInputs)||t,s.maskTextSelector=null!=(i=this._masking.maskTextSelector)?i:void 0,s.blockSelector=null!=(r=this._masking.blockSelector)?r:void 0);var l=rf();if(l){this._mutationThrottler=null!=(e=this._mutationThrottler)?e:new iS(l,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(e,t)=>{var i="Too many mutations on node '"+e+"'. Rate limiting. This could be due to SVG animations or something similar";rg.info(i,{node:t}),this.log(rp+" "+i,"warn")}});var c=this._gatherRRWebPlugins();this._stopRrweb=l(o({emit:e=>{this.onRRwebEmit(e)},plugins:c},s)),this._lastActivityTimestamp=Date.now(),this._isIdle=G(this._isIdle)?this._isIdle:"unknown",this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:s,activePlugins:c.map(e=>null==e?void 0:e.name)}),this._tryAddCustomEvent("$posthog_config",{config:this._instance.config})}else rg.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!0!==this._isIdle){var e=this._fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval(()=>{this._tryTakeFullSnapshot()},e))}}_gatherRRWebPlugins(){var e,t,i,r,s,n,a,l,c,u,d,h,_,p=[],g=null==(h=b.__PosthogExtensions__)||null==(h=h.rrwebPlugins)?void 0:h.getRecordConsolePlugin;g&&this._isConsoleLogCaptureEnabled&&p.push(g());var f=null==(_=b.__PosthogExtensions__)||null==(_=_.rrwebPlugins)?void 0:_.getRecordNetworkPlugin;return this._networkPayloadCapture&&P(f)&&(!t_.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?p.push(f((e=this._instance.config,t=this._networkPayloadCapture,s={payloadSizeLimitBytes:ig.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...ig.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...ig.payloadHostDenyList]},n=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,l=!1!==e.capture_performance&&t.recordPerformance,r=Math.min(1e6,null!=(i=s.payloadSizeLimitBytes)?i:1e6),c=e=>(null!=e&&e.requestBody&&(e.requestBody=ib(e.requestBody,e.requestHeaders,r,"Request")),null!=e&&e.responseBody&&(e.responseBody=ib(e.responseBody,e.responseHeaders,r,"Response")),e),u=t=>{var i;return c(((e,t)=>{var i,r=tp(e.name),s=0===t.indexOf("http")?null==(i=tp(t))?void 0:i.pathname:t;"/"===s&&(s="");var n=null==r?void 0:r.pathname.replace(s||"","");if(!(r&&n&&iy.some(e=>0===n.indexOf(e))))return e})((N(i=t.requestHeaders)||Q(Object.keys(null!=i?i:{}),e=>{iv.includes(e.toLowerCase())&&(i[e]=ip)}),t),e.api_host))},(d=P(e.session_recording.maskNetworkRequestFn))&&P(e.session_recording.maskCapturedNetworkRequestFn)&&Y.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{var i=e.session_recording.maskNetworkRequestFn({url:t.name});return o({},t,{name:null==i?void 0:i.url})}),s.maskRequestFn=P(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var i,r=u(t);return r&&null!=(i=null==e.session_recording.maskCapturedNetworkRequestFn?void 0:e.session_recording.maskCapturedNetworkRequestFn(r))?i:void 0}:e=>(function(e){if(!A(e))return e.requestBody=iw(e.requestBody,"Request"),e.responseBody=iw(e.responseBody,"Response"),e})(u(e)),o({},ig,s,{recordHeaders:n,recordBody:a,recordPerformance:l,recordInitialRequests:l})))):rg.info("NetworkCapture not started because we are on localhost.")),p}onRRwebEmit(e){var t;if(this._processQueuedEvents(),e&&O(e)){if(e.type===id.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._urlTriggerMatching.checkUrlTriggerConditions(()=>this._pauseRecording(),()=>this._resumeRecording(),e=>this._activateTrigger(e)),!this._urlTriggerMatching.urlBlocked||e.type===id.Custom&&"recording paused"===e.data.tag){e.type===id.FullSnapshot&&this._scheduleFullSnapshot(),e.type===id.FullSnapshot&&this._receivedFlags&&this._triggerMatching.triggerStatus(this.sessionId)===ri&&this._clearBuffer();var r=this._mutationThrottler?this._mutationThrottler.throttleMutations(e):e;if(r){var s=function(e){if(e&&O(e)&&6===e.type&&O(e.data)&&"rrweb/console@1"===e.data.plugin){e.data.payload.payload.length>10&&(e.data.payload.payload=e.data.payload.payload.slice(0,10),e.data.payload.payload.push("...[truncated]"));for(var t=[],i=0;i<e.data.payload.payload.length;i++)e.data.payload.payload[i]&&e.data.payload.payload[i].length>2e3?t.push(e.data.payload.payload[i].slice(0,2e3)+"...[truncated]"):t.push(e.data.payload.payload[i]);return e.data.payload.payload=t,e}return e}(r);if(this._updateWindowAndSessionIds(s),!0!==this._isIdle||rb(s)){if(rb(s)){var n=s.data.payload;n&&(s.timestamp=n.lastActivityTimestamp+n.threshold)}var a=null==(t=this._instance.config.session_recording.compress_events)||t?function(e){if(1024>iu(e))return e;try{if(e.type===id.FullSnapshot)return o({},e,{data:ry(e.data),cv:"2024-10"});if(e.type===id.IncrementalSnapshot&&e.data.source===ih.Mutation)return o({},e,{cv:"2024-10",data:o({},e.data,{texts:ry(e.data.texts),attributes:ry(e.data.attributes),removes:ry(e.data.removes),adds:ry(e.data.adds)})});if(e.type===id.IncrementalSnapshot&&e.data.source===ih.StyleSheetRule)return o({},e,{cv:"2024-10",data:o({},e.data,{adds:e.data.adds?ry(e.data.adds):void 0,removes:e.data.removes?ry(e.data.removes):void 0})})}catch(e){rg.error("could not compress event - will use uncompressed event",e)}return e}(s):s,l={$snapshot_bytes:iu(a),$snapshot_data:a,$session_id:this._sessionId,$window_id:this._windowId};this.status!==i6?this._captureSnapshotBuffered(l):this._clearBuffer()}}}}}_pageViewFallBack(){if(!this._instance.config.capture_pageview&&l){var e=this._maskUrl(l.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this._queuedRRWebEvents.length){var e=[...this._queuedRRWebEvents];this._queuedRRWebEvents=[],e.forEach(e=>{Date.now()-e.enqueuedAt<=2e3&&this._tryRRWebMethod(e)})}}_maskUrl(e){var t=this._instance.config.session_recording;if(t.maskNetworkRequestFn){var i,r={url:e};return null==(i=r=t.maskNetworkRequestFn(r))?void 0:i.url}return e}_clearBuffer(){return this._buffer={size:0,data:[],sessionId:this._sessionId,windowId:this._windowId},this._buffer}_flushBuffer(){this._flushBufferTimer&&(clearTimeout(this._flushBufferTimer),this._flushBufferTimer=void 0);var e=this._minimumDuration,t=this._sessionDuration,i=q(t)&&t>=0,r=q(e)&&i&&t<e;return this.status===i7||this.status===i9||this.status===i6||r?(this._flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3),this._buffer):(this._buffer.data.length>0&&(function e(t,i){if(void 0===i&&(i=6606028.8),t.size>=i&&t.data.length>1){var r=Math.floor(t.data.length/2),s=t.data.slice(0,r),n=t.data.slice(r);return[e({size:iu(s),data:s,sessionId:t.sessionId,windowId:t.windowId}),e({size:iu(n),data:n,sessionId:t.sessionId,windowId:t.windowId})].flatMap(e=>e)}return[t]})(this._buffer).forEach(e=>{this._captureSnapshot({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId,$lib:"web",$lib_version:w.LIB_VERSION})}),this._clearBuffer())}_captureSnapshotBuffered(e){var t,i=2+((null==(t=this._buffer)?void 0:t.data.length)||0);!this._isIdle&&(this._buffer.size+e.$snapshot_bytes+i>943718.4||this._buffer.sessionId!==this._sessionId)&&(this._buffer=this._flushBuffer()),this._buffer.size+=e.$snapshot_bytes,this._buffer.data.push(e.$snapshot_data),this._flushBufferTimer||this._isIdle||(this._flushBufferTimer=setTimeout(()=>{this._flushBuffer()},2e3))}_captureSnapshot(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_activateTrigger(e){var t;this._triggerMatching.triggerStatus(this.sessionId)===ri&&(null==(t=this._instance)||null==(t=t.persistence)||t.register({["url"===e?eC:eF]:this._sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){this._urlTriggerMatching.urlBlocked||(this._urlTriggerMatching.urlBlocked=!0,clearInterval(this._fullSnapshotTimer),rg.info("recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){this._urlTriggerMatching.urlBlocked&&(this._urlTriggerMatching.urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),rg.info("recording resumed"))}_addEventTriggerListener(){0!==this._eventTriggerMatching._eventTriggers.length&&N(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this._instance.on("eventCaptured",e=>{try{this._eventTriggerMatching._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(e){rg.error("Could not activate event trigger",e)}}))}overrideLinkedFlag(){this._linkedFlagMatching.linkedFlagSeen=!0,this._tryTakeFullSnapshot(),this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;null==(e=this._instance.persistence)||e.register({[eT]:!0}),this._tryTakeFullSnapshot(),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,t){this._instance.register_for_session({$session_recording_start_reason:e}),rg.info(e.replace("_"," "),t),k(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,t)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this._sessionManager.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this._buffer.data.length,$sdk_debug_replay_internal_buffer_size:this._buffer.size,$sdk_debug_current_session_duration:this._sessionDuration,$sdk_debug_session_start:e}}}var rS=J("[SegmentIntegration]"),rk="posthog-js";function rE(e,t){var{organization:i,projectId:r,prefix:s,severityAllowList:n=["error"]}=void 0===t?{}:t;return t=>{if(!("*"===n||n.includes(t.level))||!e.__loaded)return t;t.tags||(t.tags={});var a,l,c,u,d,h=e.requestRouter.endpointFor("ui","/project/"+e.config.token+"/person/"+e.get_distinct_id());t.tags["PostHog Person URL"]=h,e.sessionRecordingStarted()&&(t.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var _=(null==(a=t.exception)?void 0:a.values)||[],p=_.map(e=>o({},e,{stacktrace:e.stacktrace?o({},e.stacktrace,{type:"raw",frames:(e.stacktrace.frames||[]).map(e=>o({},e,{platform:"web:javascript"}))}):void 0})),g={$exception_message:(null==(l=_[0])?void 0:l.value)||t.message,$exception_type:null==(c=_[0])?void 0:c.type,$exception_personURL:h,$exception_level:t.level,$exception_list:p,$sentry_event_id:t.event_id,$sentry_exception:t.exception,$sentry_exception_message:(null==(u=_[0])?void 0:u.value)||t.message,$sentry_exception_type:null==(d=_[0])?void 0:d.type,$sentry_tags:t.tags};return i&&r&&(g.$sentry_url=(s||"https://sentry.io/organizations/")+i+"/issues/?project="+r+"&query="+t.event_id),e.exceptions.sendExceptionEvent(g),t}}class rx{constructor(e,t,i,r,s){this.name=rk,this.setupOnce=function(n){n(rE(e,{organization:t,projectId:i,prefix:r,severityAllowList:s}))}}}var rI=null!=l&&l.location?tm(l.location.hash,"__posthog")||tm(location.hash,"state"):null,rR="_postHogToolbarParams",rT=J("[Toolbar]"),rC=function(e){return e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED",e}(rC||{});class rF{constructor(e){this.instance=e}_setToolbarState(e){b.ph_toolbar_state=e}_getToolbarState(){var e;return null!=(e=b.ph_toolbar_state)?e:rC.UNINITIALIZED}maybeLoadToolbar(e,t,i){if(void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===i&&(i=void 0),!l||!p)return!1;e=null!=e?e:l.location,i=null!=i?i:l.history;try{if(!t){try{l.localStorage.setItem("test","test"),l.localStorage.removeItem("test")}catch(e){return!1}t=null==l?void 0:l.localStorage}var r,s=rI||tm(e.hash,"__posthog")||tm(e.hash,"state"),n=s?ei(()=>JSON.parse(atob(decodeURIComponent(s))))||ei(()=>JSON.parse(decodeURIComponent(s))):null;return n&&"ph_authorize"===n.action?((r=n).source="url",r&&Object.keys(r).length>0&&(n.desiredHash?e.hash=n.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(t.getItem(rR)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch(e){return!1}}_callLoadToolbar(e){var t=b.ph_load_toolbar||b.ph_load_editor;!N(t)&&P(t)?t(e,this.instance):rT.warn("No toolbar load function found")}loadToolbar(e){var t,i=!(null==p||!p.getElementById(eW));if(!l||i)return!1;var r="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,s=o({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},r?{instrument:!1}:{});return(l.localStorage.setItem(rR,JSON.stringify(o({},s,{source:void 0}))),this._getToolbarState()===rC.LOADED)?this._callLoadToolbar(s):this._getToolbarState()===rC.UNINITIALIZED&&(this._setToolbarState(rC.LOADING),null==(t=b.__PosthogExtensions__)||null==t.loadExternalDependency||t.loadExternalDependency(this.instance,"toolbar",e=>{if(e)return rT.error("[Toolbar] Failed to load",e),void this._setToolbarState(rC.UNINITIALIZED);this._setToolbarState(rC.LOADED),this._callLoadToolbar(s)}),ea(l,"turbolinks:load",()=>{this._setToolbarState(rC.UNINITIALIZED),this.loadToolbar(s)})),!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(e,t,i){return void 0===e&&(e=void 0),void 0===t&&(t=void 0),void 0===i&&(i=void 0),this.maybeLoadToolbar(e,t,i)}}var rP=J("[TracingHeaders]");class rO{constructor(e){this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0,this._startCapturing=()=>{var e,t;A(this._restoreXHRPatch)&&(null==(e=b.__PosthogExtensions__)||null==(e=e.tracingHeadersPatchFns)||e._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),A(this._restoreFetchPatch)&&(null==(t=b.__PosthogExtensions__)||null==(t=t.tracingHeadersPatchFns)||t._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}_loadScript(e){var t,i;null!=(t=b.__PosthogExtensions__)&&t.tracingHeadersPatchFns&&e(),null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"tracing-headers",t=>{if(t)return rP.error("failed to load script",t);e()})}startIfEnabledOrStop(){var e,t;this._instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null==(e=this._restoreXHRPatch)||e.call(this),null==(t=this._restoreFetchPatch)||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}var r$=J("[Web Vitals]");class rA{constructor(e){var t;this._enabledServerSide=!1,this._initialized=!1,this._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0},this._flushToCapture=()=>{clearTimeout(this._delayedFlushTimer),0!==this._buffer.metrics.length&&(this._instance.capture("$web_vitals",this._buffer.metrics.reduce((e,t)=>o({},e,{["$web_vitals_"+t.name+"_event"]:o({},t),["$web_vitals_"+t.name+"_value"]:t.value}),{})),this._buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this._addToBuffer=e=>{var t,i=null==(t=this._instance.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0);if(A(i))r$.error("Could not read session ID. Dropping metrics!");else{this._buffer=this._buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var r=this._currentURL();A(r)||(N(null==e?void 0:e.name)||N(null==e?void 0:e.value)?r$.error("Invalid metric received",e):this._maxAllowedValue&&e.value>=this._maxAllowedValue?r$.error("Ignoring metric with value >= "+this._maxAllowedValue,e):(this._buffer.url!==r&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),A(this._buffer.url)&&(this._buffer.url=r),this._buffer.firstMetricTimestamp=A(this._buffer.firstMetricTimestamp)?Date.now():this._buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this._buffer.metrics.push(o({},e,{$current_url:r,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this._buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}},this._startCapturing=()=>{var e,t,i,r,s=b.__PosthogExtensions__;A(s)||A(s.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:i,onINP:r}=s.postHogWebVitalsCallbacks),e&&t&&i&&r?(this.allowedMetrics.indexOf("LCP")>-1&&e(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&r(this._addToBuffer.bind(this)),this._initialized=!0):r$.error("web vitals callbacks not loaded - not starting")},this._instance=e,this._enabledServerSide=!(null==(t=this._instance.persistence)||!t.props[ef]),this.startIfEnabled()}get allowedMetrics(){var e,t,i=O(this._instance.config.capture_performance)?null==(e=this._instance.config.capture_performance)?void 0:e.web_vitals_allowed_metrics:void 0;return A(i)?(null==(t=this._instance.persistence)?void 0:t.props[em])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(O(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=O(this._instance.config.capture_performance)&&q(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<e&&e<=6e4?9e5:e}get isEnabled(){var e=null==g?void 0:g.protocol;if("http:"!==e&&"https:"!==e)return r$.info("Web Vitals are disabled on non-http/https protocols"),!1;var t=O(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:G(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return G(t)?t:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(r$.info("enabled, starting..."),this._loadScript(this._startCapturing))}onRemoteConfig(e){var t=O(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=O(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[ef]:t}),this._instance.persistence.register({[em]:i})),this._enabledServerSide=t,this.startIfEnabled()}_loadScript(e){var t,i;null!=(t=b.__PosthogExtensions__)&&t.postHogWebVitalsCallbacks&&e(),null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"web-vitals",t=>{t?r$.error("failed to load script",t):e()})}_currentURL(){var e=l?l.location.href:void 0;return e||r$.error("Could not determine current URL"),e}}var rM=J("[Heatmaps]");function rL(e){return O(e)&&"clientX"in e&&"clientY"in e&&q(e.clientX)&&q(e.clientY)}class rD{constructor(e){var t;this.rageclicks=new tc,this._enabledServerSide=!1,this._initialized=!1,this._flushInterval=null,this.instance=e,this._enabledServerSide=!(null==(t=this.instance.persistence)||!t.props[eh])}get flushIntervalMilliseconds(){var e=5e3;return O(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return A(this.instance.config.capture_heatmaps)?A(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this._initialized||(rM.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this._flush.bind(this),this.flushIntervalMilliseconds));else{var e,t;clearInterval(null!=(e=this._flushInterval)?e:void 0),null==(t=this._deadClicksCapture)||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[eh]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){var e=this._buffer;return this._buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){l&&p&&(ea(l,"beforeunload",this._flush.bind(this)),ea(p,"click",e=>this._onClick(e||(null==l?void 0:l.event)),{capture:!0}),ea(p,"mousemove",e=>this._onMouseMove(e||(null==l?void 0:l.event)),{capture:!0}),this._deadClicksCapture=new tW(this.instance,tH,this._onDeadClick.bind(this)),this._deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,t){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),n=function(e,t,i){for(var r=e;r&&eK(r)&&!eX(r,"body")&&r!==i;){if(k(t,null==l?void 0:l.getComputedStyle(r).position))return!0;r=e4(r)}return!1}(e6(e),["fixed","sticky"],s);return{x:e.clientX+(n?0:r),y:e.clientY+(n?0:i),target_fixed:n,type:t}}_onClick(e,t){var i;if(void 0===t&&(t="click"),!eJ(e.target)&&rL(e)){var r=this._getProperties(e,t);null!=(i=this.rageclicks)&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(o({},r,{type:"rageclick"})),this._capture(r)}}_onMouseMove(e){!eJ(e.target)&&rL(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout(()=>{this._capture(this._getProperties(e,"mousemove"))},500))}_capture(e){if(l){var t=l.location.href;this._buffer=this._buffer||{},this._buffer[t]||(this._buffer[t]=[]),this._buffer[t].push(e)}}_flush(){this._buffer&&!$(this._buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class rN{constructor(e){this._instance=e}doPageView(e,t){var i,r=this._previousPageViewProperties(e,t);return this._currentPageview={pathname:null!=(i=null==l?void 0:l.location.pathname)?i:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var t;return this._previousPageViewProperties(e,null==(t=this._currentPageview)?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null==(e=this._currentPageview)?void 0:e.pageViewId}}_previousPageViewProperties(e,t){var i=this._currentPageview;if(!i)return{$pageview_id:t};var r={$pageview_id:t,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:n,lastScrollY:o,maxScrollY:a,maxContentHeight:l,lastContentY:c,maxContentY:u}=s;if(!(A(n)||A(o)||A(a)||A(l)||A(c)||A(u))){n=Math.ceil(n),o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=n<=1?1:U(o/n,0,1,Y),h=n<=1?1:U(a/n,0,1,Y),_=l<=1?1:U(c/l,0,1,Y),p=l<=1?1:U(u/l,0,1,Y);r=Z(r,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:_,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:p})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var rq=function(e){var t,i,r,s,n="";for(t=i=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,s=0;s<r;s++){var o=e.charCodeAt(s),a=null;o<128?i++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),D(a)||(i>t&&(n+=e.substring(t,i)),n+=a,t=i=s+1)}return i>t&&(n+=e.substring(t,e.length)),n},rG=!!v||!!f,rB="text/plain",rz=(e,t)=>{var[i,r]=e.split("?"),s=o({},t);null==r||r.split("&").forEach(e=>{var[t]=e.split("=");delete s[t]});var n=tg(s);return i+"?"+(n=n?(r?r+"&":"")+n:r)},rj=(e,t)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,t),rH=e=>{var{data:t,compression:i}=e;if(t){if(i===td.GZipJS){var r=new Blob([i3(i5(rj(t)),{mtime:0})],{type:rB});return{contentType:rB,body:r,estimatedSize:r.size}}if(i===td.Base64){var s=(e=>"data="+encodeURIComponent("string"==typeof e?e:rj(e)))(function(e){var t,i,r,s,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!e)return e;e=rq(e);do t=(n=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,i=n>>12&63,r=n>>6&63,s=63&n,u[l++]=o.charAt(t)+o.charAt(i)+o.charAt(r)+o.charAt(s);while(a<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(rj(t)));return{contentType:"application/x-www-form-urlencoded",body:s,estimatedSize:new Blob([s]).size}}var n=rj(t);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},rU=[];f&&rU.push({transport:"fetch",method:e=>{var t,i,{contentType:r,body:s,estimatedSize:n}=null!=(t=rH(e))?t:{},a=new Headers;Q(e.headers,function(e,t){a.append(t,e)}),r&&a.append("Content-Type",r);var l=e.url,c=null;if(m){var u=new m;c={signal:u.signal,timeout:setTimeout(()=>u.abort(),e.timeout)}}f(l,o({method:(null==e?void 0:e.method)||"GET",headers:a,keepalive:"POST"===e.method&&52428.8>(n||0),body:s,signal:null==(i=c)?void 0:i.signal},e.fetchOptions)).then(t=>t.text().then(i=>{var r={statusCode:t.status,text:i};if(200===t.status)try{r.json=JSON.parse(i)}catch(e){Y.error(e)}null==e.callback||e.callback(r)})).catch(t=>{Y.error(t),null==e.callback||e.callback({statusCode:0,text:t})}).finally(()=>c?clearTimeout(c.timeout):null)}}),v&&rU.push({transport:"XHR",method:e=>{var t,i=new v;i.open(e.method||"GET",e.url,!0);var{contentType:r,body:s}=null!=(t=rH(e))?t:{};Q(e.headers,function(e,t){i.setRequestHeader(t,e)}),r&&i.setRequestHeader("Content-Type",r),e.timeout&&(i.timeout=e.timeout),i.withCredentials=!0,i.onreadystatechange=()=>{if(4===i.readyState){var t={statusCode:i.status,text:i.responseText};if(200===i.status)try{t.json=JSON.parse(i.responseText)}catch(e){}null==e.callback||e.callback(t)}},i.send(s)}}),null!=_&&_.sendBeacon&&rU.push({transport:"sendBeacon",method:e=>{var t=rz(e.url,{beacon:"1"});try{var i,{contentType:r,body:s}=null!=(i=rH(e))?i:{},n="string"==typeof s?new Blob([s],{type:r}):s;_.sendBeacon(t,n)}catch(e){}}});var rW=function(e,t){if(!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t))return!1;try{return new RegExp(t).test(e)}catch(e){return!1}};function rV(e,t,i){return rj({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:i})}var rY={exact:(e,t)=>t.some(t=>e.some(e=>t===e)),is_not:(e,t)=>t.every(t=>e.every(e=>t!==e)),regex:(e,t)=>t.some(t=>e.some(e=>rW(t,e))),not_regex:(e,t)=>t.every(t=>e.every(e=>!rW(t,e))),icontains:(e,t)=>t.map(rJ).some(t=>e.map(rJ).some(e=>t.includes(e))),not_icontains:(e,t)=>t.map(rJ).every(t=>e.map(rJ).every(e=>!t.includes(e)))},rJ=e=>e.toLowerCase(),rK=J("[Error tracking]");class rX{constructor(e){var t,i;this._suppressionRules=[],this._instance=e,this._suppressionRules=null!=(t=null==(i=this._instance.persistence)?void 0:i.get_property(ep))?t:[]}onRemoteConfig(e){var t,i,r,s=null!=(t=null==(i=e.errorTracking)?void 0:i.suppressionRules)?t:[],n=null==(r=e.errorTracking)?void 0:r.captureExtensionExceptions;this._suppressionRules=s,this._instance.persistence&&this._instance.persistence.register({[ep]:this._suppressionRules,[eg]:n})}get _captureExtensionExceptions(){var e,t=!!this._instance.get_property(eg),i=this._instance.config.error_tracking.captureExtensionExceptions;return null!=(e=null!=i?i:t)&&e}sendExceptionEvent(e){if(this._matchesSuppressionRule(e))rK.info("Skipping exception capture because a suppression rule matched");else{if(this._captureExtensionExceptions||!this._isExtensionException(e))return this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"});rK.info("Skipping exception capture because it was thrown by an extension")}}_matchesSuppressionRule(e){var t=e.$exception_list;if(!t||!F(t)||0===t.length)return!1;var i=t.reduce((e,t)=>{var{type:i,value:r}=t;return M(i)&&i.length>0&&e.$exception_types.push(i),M(r)&&r.length>0&&e.$exception_values.push(r),e},{$exception_types:[],$exception_values:[]});return this._suppressionRules.some(e=>{var t=e.values.map(e=>{var t,r=rY[e.operator],s=F(e.value)?e.value:[e.value],n=null!=(t=i[e.key])?t:[];return s.length>0&&r(s,n)});return"OR"===e.type?t.some(Boolean):t.every(Boolean)})}_isExtensionException(e){var t=e.$exception_list;return!(!t||!F(t))&&t.flatMap(e=>{var t,i;return null!=(t=null==(i=e.stacktrace)?void 0:i.frames)?t:[]}).some(e=>e.filename&&e.filename.startsWith("chrome-extension://"))}}var rQ="Mobile",rZ="Android",r0="Tablet",r1=rZ+" "+r0,r2="iPad",r3="Apple",r5=r3+" Watch",r6="Safari",r8="BlackBerry",r4="Samsung",r7=r4+"Browser",r9=r4+" Internet",se="Chrome",st=se+" OS",si=se+" iOS",sr="Internet Explorer",ss=sr+" "+rQ,sn="Opera",so=sn+" Mini",sa="Edge",sl="Microsoft "+sa,sc="Firefox",su=sc+" iOS",sd="Nintendo",sh="PlayStation",s_="Xbox",sp=rZ+" "+rQ,sg=rQ+" "+r6,sf="Windows",sv=sf+" Phone",sm="Nokia",sy="Ouya",sb="Generic",sw=sb+" "+rQ.toLowerCase(),sS=sb+" "+r0.toLowerCase(),sk="Konqueror",sE="(\\d+(\\.\\d+)?)",sx=RegExp("Version/"+sE),sI=RegExp(s_,"i"),sR=RegExp(sh+" \\w+","i"),sT=RegExp(sd+" \\w+","i"),sC=RegExp(r8+"|PlayBook|BB10","i"),sF={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},sP=function(e,t){let i;return t=t||"",k(e," OPR/")&&k(e,"Mini")?so:k(e," OPR/")?sn:sC.test(e)?r8:k(e,"IE"+rQ)||k(e,"WPDesktop")?ss:k(e,r7)?r9:k(e,sa)||k(e,"Edg/")?sl:k(e,"FBIOS")?"Facebook "+rQ:k(e,"UCWEB")||k(e,"UCBrowser")?"UC Browser":k(e,"CriOS")?si:k(e,"CrMo")||k(e,se)?se:k(e,rZ)&&k(e,r6)?sp:k(e,"FxiOS")?su:k(e.toLowerCase(),sk.toLowerCase())?sk:(i=t)&&k(i,r3)||k(e,r6)&&!k(e,se)&&!k(e,rZ)?k(e,rQ)?sg:r6:k(e,sc)?sc:k(e,"MSIE")||k(e,"Trident/")?sr:k(e,"Gecko")?sc:""},sO={[ss]:[RegExp("rv:"+sE)],[sl]:[RegExp(sa+"?\\/"+sE)],[se]:[RegExp("("+se+"|CrMo)\\/"+sE)],[si]:[RegExp("CriOS\\/"+sE)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+sE)],[r6]:[sx],[sg]:[sx],[sn]:[RegExp("(Opera|OPR)\\/"+sE)],[sc]:[RegExp(sc+"\\/"+sE)],[su]:[RegExp("FxiOS\\/"+sE)],[sk]:[RegExp("Konqueror[:/]?"+sE,"i")],[r8]:[RegExp(r8+" "+sE),sx],[sp]:[RegExp("android\\s"+sE,"i")],[r9]:[RegExp(r7+"\\/"+sE)],[sr]:[RegExp("(rv:|MSIE )"+sE)],Mozilla:[RegExp("rv:"+sE)]},s$=function(e,t){var i=sO[sP(e,t)];if(A(i))return null;for(var r=0;r<i.length;r++){var s=i[r],n=e.match(s);if(n)return parseFloat(n[n.length-2])}return null},sA=[[RegExp(s_+"; "+s_+" (.*?)[);]","i"),e=>[s_,e&&e[1]||""]],[RegExp(sd,"i"),[sd,""]],[RegExp(sh,"i"),[sh,""]],[sC,[r8,""]],[RegExp(sf,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[sv,""];if(new RegExp(rQ).test(t)&&!/IEMobile\b/.test(t))return[sf+" "+rQ,""];var i=/Windows NT ([0-9.]+)/i.exec(t);if(i&&i[1]){var r=sF[i[1]]||"";return/arm/i.test(t)&&(r="RT"),[sf,r]}return[sf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>e&&e[3]?["iOS",[e[3],e[4],e[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=A(e[2])?e[3]:e[2]),["watchOS",t]}],[RegExp("("+rZ+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+rZ+")","i"),e=>e&&e[2]?[rZ,[e[2],e[3],e[4]||"0"].join(".")]:[rZ,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var i=[e[1],e[2],e[3]||"0"];t[1]=i.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[st,""]],[/Linux|debian/i,["Linux",""]]],sM=function(e){return sT.test(e)?sd:sR.test(e)?sh:sI.test(e)?s_:RegExp(sy,"i").test(e)?sy:RegExp("("+sv+"|WPDesktop)","i").test(e)?sv:/iPad/.test(e)?r2:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?r5:sC.test(e)?r8:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":RegExp(sm,"i").test(e)?sm:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(rQ).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?rZ:r1:rZ:RegExp("(pda|"+rQ+")","i").test(e)?sw:RegExp(r0,"i").test(e)&&!RegExp(r0+" pc","i").test(e)?sS:""},sL="https?://(.*)",sD=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],sN=ee(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],sD),sq="<masked>",sG=["li_fat_id"];function sB(e,t,i){if(!p)return{};var r,s=t?ee([],sD,i||[]):[],n=sz(tv(p.URL,s,sq),e);return Z((r={},Q(sG,function(e){var t=tO._get(e);r[e]=t||null}),r),n)}function sz(e,t){var i=sN.concat(t||[]),r={};return Q(i,function(t){var i=tf(e,t);r[t]=i||null}),r}function sj(e){var t=e?0===e.search(sL+"google.([^/?]*)")?"google":0===e.search(sL+"bing.com")?"bing":0===e.search(sL+"yahoo.com")?"yahoo":0===e.search(sL+"duckduckgo.com")?"duckduckgo":null:null,i={};if(!D(t)){i.$search_engine=t;var r=p?tf(p.referrer,"yahoo"!=t?"q":"p"):"";r.length&&(i.ph_keyword=r)}return i}function sH(){return navigator.language||navigator.userLanguage}function sU(){return(null==p?void 0:p.referrer)||"$direct"}function sW(e,t){var i=e?ee([],sD,t||[]):[],r=null==g?void 0:g.href.substring(0,1e3);return{r:sU().substring(0,1e3),u:r?tv(r,i,sq):void 0}}function sV(e){var t,{r:i,u:r}=e,s={$referrer:i,$referring_domain:null==i?void 0:"$direct"==i?"$direct":null==(t=tp(i))?void 0:t.host};if(r){s.$current_url=r;var n=tp(r);s.$host=null==n?void 0:n.host,s.$pathname=null==n?void 0:n.pathname,Z(s,sz(r))}return i&&Z(s,sj(i)),s}function sY(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}}var sJ=J("[FeatureFlags]"),sK="$active_feature_flags",sX="$override_feature_flags",sQ="$feature_flag_payloads",sZ="$override_feature_flag_payloads",s0="$feature_flag_request_id",s1=e=>{var t={};for(var[i,r]of et(e||{}))r&&(t[i]=r);return t},s2=function(e){return e.FeatureFlags="feature_flags",e.Recordings="recordings",e}({});class s3{constructor(e){this._override_warning=!1,this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this._flagsCalled=!0;else{var e=!this._reloadDebouncer&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this._callFlagsEndpoint({disableFlags:e})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(e$),t=this._instance.get_property(sX),i=this._instance.get_property(sZ);if(!i&&!t)return e||{};var r=Z({},e||{});for(var s of[...new Set([...Object.keys(i||{}),...Object.keys(t||{})])]){var n,a,l=r[s],c=null==t?void 0:t[s],u=A(c)?null!=(n=null==l?void 0:l.enabled)&&n:!!c,d=A(c)?l.variant:"string"==typeof c?c:void 0,h=null==i?void 0:i[s],_=o({},l,{enabled:u,variant:u?null!=d?d:null==l?void 0:l.variant:void 0});u!==(null==l?void 0:l.enabled)&&(_.original_enabled=null==l?void 0:l.enabled),d!==(null==l?void 0:l.variant)&&(_.original_variant=null==l?void 0:l.variant),h&&(_.metadata=o({},null==l?void 0:l.metadata,{payload:h,original_payload:null==l||null==(a=l.metadata)?void 0:a.payload})),r[s]=_}return this._override_warning||(sJ.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this._override_warning=!0),r}getFlagVariants(){var e=this._instance.get_property(eP),t=this._instance.get_property(sX);if(!t)return e||{};for(var i=Z({},e),r=Object.keys(t),s=0;s<r.length;s++)i[r[s]]=t[r[s]];return this._override_warning||(sJ.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){var e=this._instance.get_property(sQ),t=this._instance.get_property(sZ);if(!t)return e||{};for(var i=Z({},e||{}),r=Object.keys(t),s=0;s<r.length;s++)i[r[s]]=t[r[s]];return this._override_warning||(sJ.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:t,finalPayloads:i}),this._override_warning=!0),i}reloadFeatureFlags(){this._reloadingDisabled||this._instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout(()=>{this._callFlagsEndpoint()},5))}_clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this._reloadingDisabled=e}_callFlagsEndpoint(e){var t;if(this._clearDebouncer(),!this._instance._shouldDisableFlags())if(this._requestInFlight)this._additionalReloadRequested=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:o({},(null==(t=this._instance.persistence)?void 0:t.get_initial_props())||{},this._instance.get_property(eA)||{}),group_properties:this._instance.get_property(eM)};(null!=e&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_remote_config,s=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",n=this._instance.requestRouter.endpointFor("api",(r?"/flags/?v=2":"/flags/?v=2&config=true")+s);r&&(i.timezone=sY()),this._requestInFlight=!0,this._instance._send_request({method:"POST",url:n,data:i,compression:this._instance.config.disable_compression?void 0:td.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:e=>{var t,r,s,n=!0;200===e.statusCode&&(this._additionalReloadRequested||(this.$anon_distinct_id=void 0),n=!1),this._requestInFlight=!1,this._flagsCalled||(this._flagsCalled=!0,this._instance._onRemoteConfig(null!=(s=e.json)?s:{})),(!i.disable_flags||this._additionalReloadRequested)&&((this._flagsLoadedFromRemote=!n,e.json&&null!=(r=e.json.quotaLimited)&&r.includes(s2.FeatureFlags))?sJ.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(i.disable_flags||this.receivedFeatureFlags(null!=(t=e.json)?t:{},n),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callFlagsEndpoint())))}})}}getFeatureFlag(e,t){if(void 0===t&&(t={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(s0)||void 0,n=this._instance.get_property(eN)||{};if((t.send_event||!("send_event"in t))&&(!(e in n)||!n[e].includes(r))){F(n[e])?n[e].push(r):n[e]=[r],null==(l=this._instance.persistence)||l.register({[eN]:n});var o=this.getFeatureFlagDetails(e),a={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:(null==(c=this._instance.config.bootstrap)||null==(c=c.featureFlags)?void 0:c[e])||null,$feature_flag_bootstrapped_payload:(null==(u=this._instance.config.bootstrap)||null==(u=u.featureFlagPayloads)?void 0:u[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote};A(null==o||null==(d=o.metadata)?void 0:d.version)||(a.$feature_flag_version=o.metadata.version);var l,c,u,d,h,_,p,g,f,v,m=null!=(h=null==o||null==(_=o.reason)?void 0:_.description)?h:null==o||null==(p=o.reason)?void 0:p.code;m&&(a.$feature_flag_reason=m),null!=o&&null!=(g=o.metadata)&&g.id&&(a.$feature_flag_id=o.metadata.id),A(null==o?void 0:o.original_variant)&&A(null==o?void 0:o.original_enabled)||(a.$feature_flag_original_response=A(o.original_variant)?o.original_enabled:o.original_variant),null!=o&&null!=(f=o.metadata)&&f.original_payload&&(a.$feature_flag_original_payload=null==o||null==(v=o.metadata)?void 0:v.original_payload),this._instance.capture("$feature_flag_called",a)}return i}sJ.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,t){var i=this._instance.config.token;this._instance._send_request({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:td.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:i=>{var r,s=null==(r=i.json)?void 0:r.featureFlagPayloads;t((null==s?void 0:s[e])||void 0)}})}isFeatureEnabled(e,t){if(void 0===t&&(t={}),this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);sJ.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(t=>t!==e)}receivedFeatureFlags(e,t){if(this._instance.persistence){this._hasLoadedFlags=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();!function(e,t,i,r,s){void 0===i&&(i={}),void 0===r&&(r={}),void 0===s&&(s={});var n,a=((n=e.flags)?(e.featureFlags=Object.fromEntries(Object.keys(n).map(e=>{var t;return[e,null!=(t=n[e].variant)?t:n[e].enabled]})),e.featureFlagPayloads=Object.fromEntries(Object.keys(n).filter(e=>n[e].enabled).filter(e=>{var t;return null==(t=n[e].metadata)?void 0:t.payload}).map(e=>{var t;return[e,null==(t=n[e].metadata)?void 0:t.payload]}))):sJ.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),e),l=a.flags,c=a.featureFlags,u=a.featureFlagPayloads;if(c){var d=e.requestId;if(F(c)){sJ.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var h={};if(c)for(var _=0;_<c.length;_++)h[c[_]]=!0;t&&t.register({[sK]:c,[eP]:h})}else{var p=c,g=u,f=l;e.errorsWhileComputingFlags&&(p=o({},i,p),g=o({},r,g),f=o({},s,f)),t&&t.register(o({[sK]:Object.keys(s1(p)),[eP]:p||{},[sQ]:g||{},[e$]:f||{}},d?{[s0]:d}:{}))}}}(e,this._instance.persistence,i,r,s),this._fireFeatureFlagsCallbacks(t)}}override(e,t){void 0===t&&(t=!1),sJ.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:t})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return sJ.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===e)return this._instance.persistence.unregister(sX),this._instance.persistence.unregister(sZ),void this._fireFeatureFlagsCallbacks();if(e&&"object"==typeof e&&("flags"in e||"payloads"in e)){var t;if(this._override_warning=!!(null!=(t=e.suppressWarning)&&t),"flags"in e){if(!1===e.flags)this._instance.persistence.unregister(sX);else if(e.flags)if(F(e.flags)){for(var i={},r=0;r<e.flags.length;r++)i[e.flags[r]]=!0;this._instance.persistence.register({[sX]:i})}else this._instance.persistence.register({[sX]:e.flags})}return"payloads"in e&&(!1===e.payloads?this._instance.persistence.unregister(sZ):e.payloads&&this._instance.persistence.register({[sZ]:e.payloads})),void this._fireFeatureFlagsCallbacks()}this._fireFeatureFlagsCallbacks()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(t,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t,i){var r,s=(this._instance.get_property(eO)||[]).find(t=>t.flagKey===e),n={["$feature_enrollment/"+e]:t},a={$feature_flag:e,$feature_enrollment:t,$set:n};s&&(a.$early_access_feature_name=s.name),i&&(a.$feature_enrollment_stage=i),this._instance.capture("$feature_enrollment_update",a),this.setPersonPropertiesForFlags(n,!1);var l=o({},this.getFlagVariants(),{[e]:t});null==(r=this._instance.persistence)||r.register({[sK]:Object.keys(s1(l)),[eP]:l}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e,t,i){void 0===t&&(t=!1);var r=this._instance.get_property(eO),s=i?"&"+i.map(e=>"stage="+e).join("&"):"";if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:t=>{var i,r;if(t.json){var s=t.json.earlyAccessFeatures;return null==(i=this._instance.persistence)||i.unregister(eO),null==(r=this._instance.persistence)||r.register({[eO]:s}),e(s)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter(e=>t[e]),flagVariants:Object.keys(t).filter(e=>t[e]).reduce((e,i)=>(e[i]=t[i],e),{})}}_fireFeatureFlagsCallbacks(e){var{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach(r=>r(t,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(eA)||{};this._instance.register({[eA]:o({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(eA)}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0);var i=this._instance.get_property(eM)||{};0!==Object.keys(i).length&&Object.keys(i).forEach(t=>{i[t]=o({},i[t],e[t]),delete e[t]}),this._instance.register({[eM]:o({},i,e)}),t&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this._instance.get_property(eM)||{};this._instance.register({[eM]:o({},t,{[e]:{}})})}else this._instance.unregister(eM)}reset(){this._hasLoadedFlags=!1,this._requestInFlight=!1,this._reloadingDisabled=!1,this._additionalReloadRequested=!1,this._flagsCalled=!1,this._flagsLoadedFromRemote=!1,this.$anon_distinct_id=void 0,this._clearDebouncer(),this._override_warning=!1}}var s5=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class s6{constructor(e,t){this._config=e,this.props={},this._campaign_params_saved=!1,this._name=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this._storage=this._buildStorage(e),this.load(),e.debug&&Y.info("Persistence loaded",e.persistence,o({},this.props)),this.update_config(e,e,t),this.save()}isDisabled(){return!!this._disabled}_buildStorage(e){-1===s5.indexOf(e.persistence.toLowerCase())&&(Y.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&tA._is_supported()?tA:"localstorage+cookie"===t&&tL._is_supported()?tL:"sessionstorage"===t&&tG._is_supported()?tG:"memory"===t?tN:"cookie"===t?tO:tL._is_supported()?tL:tO}properties(){var e={};return Q(this.props,function(t,i){if(i===eP&&O(t))for(var r,s=Object.keys(t),n=0;n<s.length;n++)e["$feature/"+s[n]]=t[s[n]];else r=!1,(D(eY)?r:h&&eY.indexOf===h?-1!=eY.indexOf(i):(Q(eY,function(e){if(r||(r=e===i))return K}),r))||(e[i]=t)}),e}load(){if(!this._disabled){var e=this._storage._parse(this._name);e&&(this.props=Z({},e))}}save(){this._disabled||this._storage._set(this._name,this.props,this._expire_days,this._cross_subdomain,this._secure,this._config.debug)}remove(){this._storage._remove(this._name,!1),this._storage._remove(this._name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,i){if(O(e)){A(t)&&(t="None"),this._expire_days=A(i)?this._default_expiry:i;var r=!1;if(Q(e,(e,i)=>{this.props.hasOwnProperty(i)&&this.props[i]!==t||(this.props[i]=e,r=!0)}),r)return this.save(),!0}return!1}register(e,t){if(O(e)){this._expire_days=A(t)?this._default_expiry:t;var i=!1;if(Q(e,(t,r)=>{e.hasOwnProperty(r)&&this.props[r]!==t&&(this.props[r]=t,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this._campaign_params_saved){var e=sB(this._config.custom_campaign_params,this._config.mask_personal_data_properties,this._config.custom_personal_data_properties);$(es(e))||this.register(e),this._campaign_params_saved=!0}}update_search_keyword(){var e;this.register((e=null==p?void 0:p.referrer)?sj(e):{})}update_referrer_info(){var e;this.register_once({$referrer:sU(),$referring_domain:null!=p&&p.referrer&&(null==(e=tp(p.referrer))?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[ez]||this.props[ej]||this.register_once({[eH]:sW(this._config.mask_personal_data_properties,this._config.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};Q([ej,ez],t=>{var i=this.props[t];i&&Q(i,function(t,i){e["$initial_"+x(i)]=t})});var t,i,r=this.props[eH];return r&&Z(e,(t=sV(r),i={},Q(t,function(e,t){i["$initial_"+x(t)]=e}),i)),e}safe_merge(e){return Q(this.props,function(t,i){i in e||(e[i]=t)}),e}update_config(e,t,i){if(this._default_expiry=this._expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence||!!i),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var r=this._buildStorage(e),s=this.props;this.clear(),this._storage=r,this.props=s,this.save()}}set_disabled(e){this._disabled=e,this._disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this._cross_subdomain&&(this._cross_subdomain=e,this.remove(),this.save())}set_secure(e){e!==this._secure&&(this._secure=e,this.remove(),this.save())}set_event_timer(e,t){var i=this.props[eu]||{};i[e]=t,this.props[eu]=i,this.save()}remove_event_timer(e){var t=(this.props[eu]||{})[e];return A(t)||(delete this.props[eu][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}class s8{constructor(){this._events={},this._events={}}on(e,t){return this._events[e]||(this._events[e]=[]),this._events[e].push(t),()=>{this._events[e]=this._events[e].filter(e=>e!==t)}}emit(e,t){for(var i of this._events[e]||[])i(t);for(var r of this._events["*"]||[])r(e,t)}}class s4{constructor(e){this._debugEventEmitter=new s8,this._checkStep=(e,t)=>this._checkStepEvent(e,t)&&this._checkStepUrl(e,t)&&this._checkStepElement(e,t),this._checkStepEvent=(e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event),this._instance=e,this._actionEvents=new Set,this._actionRegistry=new Set}init(){var e,t;A(null==(e=this._instance)?void 0:e._addCaptureHook)||null==(t=this._instance)||t._addCaptureHook((e,t)=>{this.on(e,t)})}register(e){var t,i;if(!A(null==(t=this._instance)?void 0:t._addCaptureHook)&&(e.forEach(e=>{var t,i;null==(t=this._actionRegistry)||t.add(e),null==(i=e.steps)||i.forEach(e=>{var t;null==(t=this._actionEvents)||t.add((null==e?void 0:e.event)||"")})}),null!=(i=this._instance)&&i.autocapture)){var r,s=new Set;e.forEach(e=>{var t;null==(t=e.steps)||t.forEach(e=>{null!=e&&e.selector&&s.add(null==e?void 0:e.selector)})}),null==(r=this._instance)||r.autocapture.setElementSelectors(s)}}on(e,t){var i;null!=t&&0!=e.length&&(this._actionEvents.has(e)||this._actionEvents.has(null==t?void 0:t.event))&&this._actionRegistry&&(null==(i=this._actionRegistry)?void 0:i.size)>0&&this._actionRegistry.forEach(e=>{this._checkAction(t,e)&&this._debugEventEmitter.emit("actionCaptured",e.name)})}_addActionHook(e){this.onAction("actionCaptured",t=>e(t))}_checkAction(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var i of t.steps)if(this._checkStep(e,i))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}_checkStepUrl(e,t){if(null!=t&&t.url){var i,r=null==e||null==(i=e.properties)?void 0:i.$current_url;if(!r||"string"!=typeof r||!s4._matchString(r,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static _matchString(e,t,i){switch(i){case"regex":return!!l&&rW(e,t);case"exact":return t===e;case"contains":return rW(e,s4._escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*"));default:return!1}}static _escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}_checkStepElement(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this._getElementsList(e).some(e=>!(null!=t&&t.href&&!s4._matchString(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact"))&&(null==t||!t.tag_name||e.tag_name===(null==t?void 0:t.tag_name))&&!(null!=t&&t.text&&!s4._matchString(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!s4._matchString(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact"))))return!1;if(null!=t&&t.selector){var i,r=null==e||null==(i=e.properties)?void 0:i.$element_selectors;if(!r||!r.includes(null==t?void 0:t.selector))return!1}return!0}_getElementsList(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}(function(e){e.Button="button",e.Tab="tab",e.Selector="selector"})({}),function(e){e.TopLeft="top_left",e.TopRight="top_right",e.TopCenter="top_center",e.MiddleLeft="middle_left",e.MiddleRight="middle_right",e.MiddleCenter="middle_center",e.Left="left",e.Center="center",e.Right="right",e.NextToTrigger="next_to_trigger"}({});var s7=function(e){return e.Popover="popover",e.API="api",e.Widget="widget",e.ExternalSurvey="external_survey",e}({}),s9=(function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}({}),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}({}),function(e){e.Once="once",e.Recurring="recurring",e.Always="always"}({}),function(e){return e.SHOWN="survey shown",e.DISMISSED="survey dismissed",e.SENT="survey sent",e}({})),ne=function(e){return e.SURVEY_ID="$survey_id",e.SURVEY_NAME="$survey_name",e.SURVEY_RESPONSE="$survey_response",e.SURVEY_ITERATION="$survey_iteration",e.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",e.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",e.SURVEY_SUBMISSION_ID="$survey_submission_id",e.SURVEY_QUESTIONS="$survey_questions",e.SURVEY_COMPLETED="$survey_completed",e}({}),nt=J("[Surveys]"),ni="seenSurvey_",nr=e=>{var t=""+ni+e.id;return e.current_iteration&&e.current_iteration>0&&(t=""+ni+e.id+"_"+e.current_iteration),t},ns=[s7.Popover,s7.Widget,s7.API];class nn{constructor(e){this._instance=e,this._eventToSurveys=new Map,this._actionToSurveys=new Map}register(e){var t;A(null==(t=this._instance)?void 0:t._addCaptureHook)||(this._setupEventBasedSurveys(e),this._setupActionBasedSurveys(e))}_setupActionBasedSurveys(e){var t=e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.actions)&&(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)?void 0:i.length)>0});0!==t.length&&(null==this._actionMatcher&&(this._actionMatcher=new s4(this._instance),this._actionMatcher.init(),this._actionMatcher._addActionHook(e=>{this.onAction(e)})),t.forEach(e=>{var t,i,r,s,n;e.conditions&&null!=(t=e.conditions)&&t.actions&&null!=(i=e.conditions)&&null!=(i=i.actions)&&i.values&&(null==(r=e.conditions)||null==(r=r.actions)||null==(r=r.values)?void 0:r.length)>0&&(null==(s=this._actionMatcher)||s.register(e.conditions.actions.values),null==(n=e.conditions)||null==(n=n.actions)||null==(n=n.values)||n.forEach(t=>{if(t&&t.name){var i=this._actionToSurveys.get(t.name);i&&i.push(e.id),this._actionToSurveys.set(t.name,i||[e.id])}}))}))}_setupEventBasedSurveys(e){var t;0!==e.filter(e=>{var t,i;return(null==(t=e.conditions)?void 0:t.events)&&(null==(i=e.conditions)||null==(i=i.events)||null==(i=i.values)?void 0:i.length)>0}).length&&(null==(t=this._instance)||t._addCaptureHook((e,t)=>{this.onEvent(e,t)}),e.forEach(e=>{var t;null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||t.forEach(t=>{if(t&&t.name){var i=this._eventToSurveys.get(t.name);i&&i.push(e.id),this._eventToSurveys.set(t.name,i||[e.id])}})}))}onEvent(e,t){var i,r=(null==(i=this._instance)||null==(i=i.persistence)?void 0:i.props[eD])||[];if("survey shown"===e&&t&&r.length>0){nt.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:t,existingActivatedSurveys:r});var s,n=null==t||null==(s=t.properties)?void 0:s.$survey_id;if(n){var o=r.indexOf(n);o>=0&&(r.splice(o,1),this._updateActivatedSurveys(r))}}else this._eventToSurveys.has(e)&&(nt.info("survey event matched, updating activated surveys",{event:e,surveys:this._eventToSurveys.get(e)}),this._updateActivatedSurveys(r.concat(this._eventToSurveys.get(e)||[])))}onAction(e){var t,i=(null==(t=this._instance)||null==(t=t.persistence)?void 0:t.props[eD])||[];this._actionToSurveys.has(e)&&this._updateActivatedSurveys(i.concat(this._actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t;null==(t=this._instance)||null==(t=t.persistence)||t.register({[eD]:[...new Set(e)]})}getSurveys(){var e;return(null==(e=this._instance)||null==(e=e.persistence)?void 0:e.props[eD])||[]}getEventToSurveys(){return this._eventToSurveys}_getActionMatcher(){return this._actionMatcher}}class no{constructor(e){this._isSurveysEnabled=void 0,this._surveyManager=null,this._isFetchingSurveys=!1,this._isInitializingSurveys=!1,this._surveyCallbacks=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){if(!this._instance.config.disable_surveys){var t=e.surveys;if(N(t))return nt.warn("Flags not loaded yet. Not loading surveys.");var i=F(t);this._isSurveysEnabled=i?t.length>0:t,nt.info("flags response received, isSurveysEnabled: "+this._isSurveysEnabled),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],t=0;t<localStorage.length;t++){var i=localStorage.key(t);(null!=i&&i.startsWith(ni)||null!=i&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(e=>localStorage.removeItem(e))}loadIfEnabled(){if(!this._surveyManager)if(this._isInitializingSurveys)nt.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)nt.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode)nt.info("Not loading surveys in cookieless mode.");else{var e=null==b?void 0:b.__PosthogExtensions__;if(e){if(!A(this._isSurveysEnabled)||this._instance.config.advanced_enable_surveys){var t=this._isSurveysEnabled||this._instance.config.advanced_enable_surveys;this._isInitializingSurveys=!0;try{var i=e.generateSurveys;if(i)return void this._completeSurveyInitialization(i,t);var r=e.loadExternalDependency;if(!r)return void this._handleSurveyLoadError("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",i=>{i||!e.generateSurveys?this._handleSurveyLoadError("Could not load surveys script",i):this._completeSurveyInitialization(e.generateSurveys,t)})}catch(e){throw this._handleSurveyLoadError("Error initializing surveys",e),e}finally{this._isInitializingSurveys=!1}}}else nt.error("PostHog Extensions not found.")}}_completeSurveyInitialization(e,t){this._surveyManager=e(this._instance,t),this._surveyEventReceiver=new nn(this._instance),nt.info("Surveys loaded successfully"),this._notifySurveyCallbacks({isLoaded:!0})}_handleSurveyLoadError(e,t){nt.error(e,t),this._notifySurveyCallbacks({isLoaded:!1,error:e})}onSurveysLoaded(e){return this._surveyCallbacks.push(e),this._surveyManager&&this._notifySurveyCallbacks({isLoaded:!0}),()=>{this._surveyCallbacks=this._surveyCallbacks.filter(t=>t!==e)}}getSurveys(e,t){if(void 0===t&&(t=!1),this._instance.config.disable_surveys)return nt.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(eL);if(i&&!t)return e(i,{isLoaded:!0});if(this._isFetchingSurveys)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this._isFetchingSurveys=!0,this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:t=>{this._isFetchingSurveys=!1;var i=t.statusCode;if(200!==i||!t.json){var r="Surveys API could not be loaded, status: "+i;return nt.error(r),e([],{isLoaded:!1,error:r})}var s,n,o=t.json.surveys||[],a=o.filter(e=>{var t,i;return!(!e.start_date||e.end_date)&&(!(null==(t=e.conditions)||null==(t=t.events)||null==(t=t.values)||!t.length)||!(null==(i=e.conditions)||null==(i=i.actions)||null==(i=i.values)||!i.length))});return a.length>0&&(null==(n=this._surveyEventReceiver)||n.register(a)),null==(s=this._instance.persistence)||s.register({[eL]:o}),e(o,{isLoaded:!0})}})}catch(e){throw this._isFetchingSurveys=!1,e}}_notifySurveyCallbacks(e){for(var t of this._surveyCallbacks)try{if(!e.isLoaded)return t([],e);this.getSurveys(t)}catch(e){nt.error("Error in survey callback",e)}}getActiveMatchingSurveys(e,t){if(void 0===t&&(t=!1),!N(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(e,t);nt.warn("init was not called")}_getSurveyById(e){var t=null;return this.getSurveys(i=>{var r;t=null!=(r=i.find(t=>t.id===e))?r:null}),t}_checkSurveyEligibility(e){if(N(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var t="string"==typeof e?this._getSurveyById(e):e;return t?this._surveyManager.checkSurveyEligibility(t):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(N(this._surveyManager))return nt.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var t=this._checkSurveyEligibility(e);return{visible:t.eligible,disabledReason:t.reason}}canRenderSurveyAsync(e,t){return N(this._surveyManager)?(nt.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(t=>{var r,s=null!=(r=t.find(t=>t.id===e))?r:null;if(s){var n=this._checkSurveyEligibility(s);i({visible:n.eligible,disabledReason:n.reason})}else i({visible:!1,disabledReason:"Survey not found"})},t)})}renderSurvey(e,t){if(N(this._surveyManager))nt.warn("init was not called");else{var i=this._getSurveyById(e);if(i)if(ns.includes(i.type)){var r=null==p?void 0:p.querySelector(t);r?this._surveyManager.renderSurvey(i,r):nt.warn("Survey element not found")}else nt.warn("Surveys of type "+i.type+" cannot be rendered in the app");else nt.warn("Survey not found")}}}var na=J("[RateLimiter]");class nl{constructor(e){var t,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach(e=>{na.info((e||"events")+" is quota limited."),this.serverLimits[e]=(new Date).getTime()+6e4})}catch(e){return void na.warn('could not rate limit - continuing. Error: "'+(null==e?void 0:e.message)+'"',{text:t})}},this.instance=e,this.captureEventsPerSecond=(null==(t=e.config.rate_limiting)?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(i=e.config.rate_limiting)?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){void 0===e&&(e=!1);var t,i,r,s=(new Date).getTime(),n=null!=(t=null==(i=this.instance.persistence)?void 0:i.get_property(eB))?t:{tokens:this.captureEventsBurstLimit,last:s};n.tokens+=(s-n.last)/1e3*this.captureEventsPerSecond,n.last=s,n.tokens>this.captureEventsBurstLimit&&(n.tokens=this.captureEventsBurstLimit);var o=n.tokens<1;return o||e||(n.tokens=Math.max(0,n.tokens-1)),!o||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null==(r=this.instance.persistence)||r.set_property(eB,n),{isRateLimited:o,remainingTokens:n.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var nc=J("[RemoteConfig]");class nu{constructor(e){this._instance=e}get remoteConfig(){var e;return null==(e=b._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.config}_loadRemoteConfigJs(e){var t,i;null!=(t=b.__PosthogExtensions__)&&t.loadExternalDependency?null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(nc.error("PostHog Extensions not found. Cannot load remote config."),e())}_loadRemoteConfigJSON(e){this._instance._send_request({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return nc.info("Using preloaded remote config",this.remoteConfig),void this._onRemoteConfig(this.remoteConfig);if(this._instance._shouldDisableFlags())return void nc.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs(e=>{if(!e)return nc.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON(e=>{this._onRemoteConfig(e)});this._onRemoteConfig(e)})}catch(e){nc.error("Error loading remote config",e)}}_onRemoteConfig(e){e?this._instance.config.__preview_remote_config?(this._instance._onRemoteConfig(e),!1!==e.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):nc.info("__preview_remote_config is disabled. Logging config instead",e):nc.error("Failed to fetch remote config from PostHog.")}}class nd{constructor(e,t){this._isPaused=!0,this._queue=[],this._flushTimeoutMs=U((null==t?void 0:t.flush_interval_ms)||3e3,250,5e3,Y.createLogger("flush interval"),3e3),this._sendRequest=e}enqueue(e){this._queue.push(e),this._flushTimeout||this._setFlushTimeout()}unload(){this._clearFlushTimeout();var e=Object.values(this._queue.length>0?this._formatQueue():{});[...e.filter(e=>0===e.url.indexOf("/e")),...e.filter(e=>0!==e.url.indexOf("/e"))].map(e=>{this._sendRequest(o({},e,{transport:"sendBeacon"}))})}enable(){this._isPaused=!1,this._setFlushTimeout()}_setFlushTimeout(){var e=this;this._isPaused||(this._flushTimeout=setTimeout(()=>{if(this._clearFlushTimeout(),this._queue.length>0){var t=this._formatQueue();for(var i in t)!function(){var r=t[i],s=(new Date).getTime();r.data&&F(r.data)&&Q(r.data,e=>{e.offset=Math.abs(e.timestamp-s),delete e.timestamp}),e._sendRequest(r)}()}},this._flushTimeoutMs))}_clearFlushTimeout(){clearTimeout(this._flushTimeout),this._flushTimeout=void 0}_formatQueue(){var e={};return Q(this._queue,t=>{var i,r=(t?t.batchKey:null)||t.url;A(e[r])&&(e[r]=o({},t,{data:[]})),null==(i=e[r].data)||i.push(t.data)}),this._queue=[],e}}var nh=["retriesPerformedSoFar"];class n_{constructor(e){this._isPolling=!1,this._pollIntervalMs=3e3,this._queue=[],this._instance=e,this._queue=[],this._areWeOnline=!0,!A(l)&&"onLine"in l.navigator&&(this._areWeOnline=l.navigator.onLine,ea(l,"online",()=>{this._areWeOnline=!0,this._flush()}),ea(l,"offline",()=>{this._areWeOnline=!1}))}get length(){return this._queue.length}retriableRequest(e){var{retriesPerformedSoFar:t}=e,i=a(e,nh);q(t)&&t>0&&(i.url=rz(i.url,{retry_count:t})),this._instance._send_request(o({},i,{callback:e=>{200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this._enqueue(o({retriesPerformedSoFar:t},i)):null==i.callback||i.callback(e)}}))}_enqueue(e){var t,i,r,s=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=s+1;var n=(r=(Math.random()-.5)*((i=Math.min(18e5,t=3e3*Math.pow(2,s)))-t/2),Math.ceil(i+r)),o=Date.now()+n;this._queue.push({retryAt:o,requestOptions:e});var a="Enqueued failed request for retry in "+n;navigator.onLine||(a+=" (Browser is offline)"),Y.warn(a),this._isPolling||(this._isPolling=!0,this._poll())}_poll(){this._poller&&clearTimeout(this._poller),this._poller=setTimeout(()=>{this._areWeOnline&&this._queue.length>0&&this._flush(),this._poll()},this._pollIntervalMs)}_flush(){var e=Date.now(),t=[],i=this._queue.filter(i=>i.retryAt<e||(t.push(i),!1));if(this._queue=t,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this._poller&&(clearTimeout(this._poller),this._poller=void 0),this._queue))try{this._instance._send_request(o({},e,{transport:"sendBeacon"}))}catch(e){Y.error(e)}this._queue=[]}}class np{constructor(e){this._updateScrollData=()=>{this._context||(this._context={});var e,t,i,r,s=this.scrollElement(),n=this.scrollY(),o=s?Math.max(0,s.scrollHeight-s.clientHeight):0,a=n+((null==s?void 0:s.clientHeight)||0),l=(null==s?void 0:s.scrollHeight)||0;this._context.lastScrollY=Math.ceil(n),this._context.maxScrollY=Math.max(n,null!=(e=this._context.maxScrollY)?e:0),this._context.maxScrollHeight=Math.max(o,null!=(t=this._context.maxScrollHeight)?t:0),this._context.lastContentY=a,this._context.maxContentY=Math.max(a,null!=(i=this._context.maxContentY)?i:0),this._context.maxContentHeight=Math.max(l,null!=(r=this._context.maxContentHeight)?r:0)},this._instance=e}getContext(){return this._context}resetContext(){var e=this._context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){ea(l,"scroll",this._updateScrollData,{capture:!0}),ea(l,"scrollend",this._updateScrollData,{capture:!0}),ea(l,"resize",this._updateScrollData)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==l?void 0:l.document.documentElement;for(var e of F(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var t=null==l?void 0:l.document.querySelector(e);if(t)return t}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return l&&(l.scrollY||l.pageYOffset||l.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return l&&(l.scrollX||l.pageXOffset||l.document.documentElement.scrollLeft)||0}}var ng=e=>sW(null==e?void 0:e.config.mask_personal_data_properties,null==e?void 0:e.config.custom_personal_data_properties);class nf{constructor(e,t,i,r){this._onSessionIdCallback=e=>{var t=this._getStored();if(!t||t.sessionId!==e){var i={sessionId:e,props:this._sessionSourceParamGenerator(this._instance)};this._persistence.register({[eG]:i})}},this._instance=e,this._sessionIdManager=t,this._persistence=i,this._sessionSourceParamGenerator=r||ng,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStored(){return this._persistence.props[eG]}getSetOnceProps(){var e,t=null==(e=this._getStored())?void 0:e.props;return t?"r"in t?sV(t):{$referring_domain:t.referringDomain,$pathname:t.initialPathName,utm_source:t.utm_source,utm_campaign:t.utm_campaign,utm_medium:t.utm_medium,utm_content:t.utm_content,utm_term:t.utm_term}:{}}getSessionProps(){var e={};return Q(es(this.getSetOnceProps()),(t,i)=>{"$current_url"===i&&(i="url"),e["$session_entry_"+x(i)]=t}),e}}var nv=J("[SessionId]");class nm{constructor(e,t,i){if(this._sessionIdChangedHandlers=[],this._sessionHasBeenIdleTooLong=(e,t)=>Math.abs(e-t)>this.sessionTimeoutMs,!e.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===e.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this._config=e.config,this._persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=t||tT,this._windowIdGenerator=i||tT;var r,s=this._config.persistence_name||this._config.token,n=this._config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*U(n,60,36e3,nv.createLogger("session_idle_timeout_seconds"),1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this._resetIdleTimer(),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var o=tG._parse(this._window_id_storage_key),a=tG._parse(this._primary_window_exists_storage_key);o&&!a?this._windowId=o:tG._remove(this._window_id_storage_key),tG._set(this._primary_window_exists_storage_key,!0)}if(null!=(r=this._config.bootstrap)&&r.sessionID)try{var l=(e=>{var t=e.replace(/-/g,"");if(32!==t.length)throw Error("Not a valid UUID");if("7"!==t[12])throw Error("Not a UUIDv7");return parseInt(t.substring(0,12),16)})(this._config.bootstrap.sessionID);this._setSessionId(this._config.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){nv.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return A(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter(t=>t!==e)}}_canUseSessionStorage(){return"memory"!==this._config.persistence&&!this._persistence._disabled&&tG._is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&tG._set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?tG._parse(this._window_id_storage_key):null}_setSessionId(e,t,i){e===this._sessionId&&t===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=t,this._sessionId=e,this._persistence.register({[eR]:[t,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this._persistence.props[eR];return F(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){ea(l,"beforeunload",()=>{this._canUseSessionStorage()&&tG._remove(this._primary_window_exists_storage_key)},{capture:!1})}checkAndGetSessionAndWindowId(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=null),"always"===this._config.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var i=t||(new Date).getTime(),[r,s,n]=this._getSessionId(),o=this._getWindowId(),a=q(n)&&n>0&&Math.abs(i-n)>864e5,l=!1,c=!s,u=!e&&this._sessionHasBeenIdleTooLong(i,r);c||u||a?(s=this._sessionIdGenerator(),o=this._windowIdGenerator(),nv.info("new session ID generated",{sessionId:s,windowId:o,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}}),n=i,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=0===r||!e||a?i:r,h=0===n?(new Date).getTime():n;return this._setWindowId(o),this._setSessionId(s,d,h),e||this._resetIdleTimer(),l&&this._sessionIdChangedHandlers.forEach(e=>e(s,o,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0)),{sessionId:s,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:r}}_resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout(()=>{var[e]=this._getSessionId();this._sessionHasBeenIdleTooLong((new Date).getTime(),e)&&this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var ny=["$set_once","$set"],nb=J("[SiteApps]");class nw{constructor(e){this._instance=e,this._bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}_eventCollector(e,t){if(t){var i=this.globalsForEvent(t);this._bufferedInvocations.push(i),this._bufferedInvocations.length>1e3&&(this._bufferedInvocations=this._bufferedInvocations.slice(10))}}get siteAppLoaders(){var e;return null==(e=b._POSTHOG_REMOTE_CONFIG)||null==(e=e[this._instance.config.token])?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance._addCaptureHook(this._eventCollector.bind(this));this._stopBuffering=()=>{e(),this._bufferedInvocations=[],this._stopBuffering=void 0}}}globalsForEvent(e){if(!e)throw Error("Event payload is required");var t,i,r,s,n,l,c,u={},d=this._instance.get_property("$groups")||[];for(var[h,_]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))u[h]={id:d[h],type:h,properties:_};var{$set_once:p,$set:g}=e;return{event:o({},a(e,ny),{properties:o({},e.properties,g?{$set:o({},null!=(t=null==(i=e.properties)?void 0:i.$set)?t:{},g)}:{},p?{$set_once:o({},null!=(r=null==(s=e.properties)?void 0:s.$set_once)?r:{},p)}:{}),elements_chain:null!=(n=null==(l=e.properties)?void 0:l.$elements_chain)?n:"",distinct_id:null==(c=e.properties)?void 0:c.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:u}}setupSiteApp(e){var t=this.apps[e.id],i=()=>{var i;!t.errored&&this._bufferedInvocations.length&&(nb.info("Processing "+this._bufferedInvocations.length+" events for site app with id "+e.id),this._bufferedInvocations.forEach(e=>null==t.processEvent?void 0:t.processEvent(e)),t.processedBuffer=!0),Object.values(this.apps).every(e=>e.processedBuffer||e.errored)&&(null==(i=this._stopBuffering)||i.call(this))},r=!1,s=s=>{t.errored=!s,t.loaded=!0,nb.info("Site app with id "+e.id+" "+(s?"loaded":"errored")),r&&i()};try{var{processEvent:n}=e.init({posthog:this._instance,callback:e=>{s(e)}});n&&(t.processEvent=n),r=!0}catch(t){nb.error("Error while initializing PostHog app with config id "+e.id,t),s(!1)}if(r&&t.loaded)try{i()}catch(i){nb.error("Error while processing buffered events PostHog app with config id "+e.id,i),t.errored=!0}}_setupSiteApps(){var e=this.siteAppLoaders||[];for(var t of e)this.apps[t.id]={id:t.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}_onCapturedEvent(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{null==i.processEvent||i.processEvent(t)}catch(t){nb.error("Error while processing event "+e.event+" for site app "+i.id,t)}}}onRemoteConfig(e){var t,i,r,s=this;if(null!=(t=this.siteAppLoaders)&&t.length)return this.isEnabled?(this._setupSiteApps(),void this._instance.on("eventCaptured",e=>this._onCapturedEvent(e))):void nb.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(i=this._stopBuffering)||i.call(this),null!=(r=e.siteApps)&&r.length)if(this.isEnabled){var n=function(e){var t;b["__$$ph_site_app_"+e]=s._instance,null==(t=b.__PosthogExtensions__)||null==t.loadSiteApp||t.loadSiteApp(s._instance,a,t=>{if(t)return nb.error("Error while initializing PostHog app with config id "+e,t)})};for(var{id:o,url:a}of e.siteApps)n(o)}else nb.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var nS=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],nk=function(e,t){if(!e)return!1;var i=e.toLowerCase();return nS.concat(t||[]).some(e=>{var t=e.toLowerCase();return -1!==i.indexOf(t)})},nE=function(e,t){if(!e)return!1;var i=e.userAgent;if(i&&nk(i,t))return!0;try{var r=null==e?void 0:e.userAgentData;if(null!=r&&r.brands&&r.brands.some(e=>nk(null==e?void 0:e.brand,t)))return!0}catch(e){}return!!e.webdriver},nx=function(e){return e.US="us",e.EU="eu",e.CUSTOM="custom",e}({}),nI="i.posthog.com";class nR{constructor(e){this._regionCache={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e,t=null==(e=this.instance.config.ui_host)?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace("."+nI,".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=nx.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=nx.EU:this._regionCache[this.apiHost]=nx.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e,t){if(void 0===t&&(t=""),t&&(t="/"===t[0]?t:"/"+t),"ui"===e)return this.uiHost+t;if(this.region===nx.CUSTOM)return this.apiHost+t;var i=nI+t;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var nT={icontains:(e,t)=>!!l&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!l&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!l&&rW(t.href,e),not_regex:(e,t)=>!!l&&!rW(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class nC{constructor(e){var t=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(e){void 0===e&&(e=!1),t.getWebExperiments(e=>{nC._logInfo("retrieved web experiments from the server"),t._flagToExperiments=new Map,e.forEach(e=>{if(e.feature_flag_key){t._flagToExperiments&&(nC._logInfo("setting flag key ",e.feature_flag_key," to web experiment ",e),null==(i=t._flagToExperiments)||i.set(e.feature_flag_key,e));var i,r=t._instance.getFeatureFlag(e.feature_flag_key);M(r)&&e.variants[r]&&t._applyTransforms(e.name,r,e.variants[r].transforms)}else if(e.variants)for(var s in e.variants){var n=e.variants[s];nC._matchesTestVariant(n)&&t._applyTransforms(e.name,s,n.transforms)}})},e)},this._instance=e,this._instance.onFeatureFlags(e=>{this.onFeatureFlags(e)})}onFeatureFlags(e){if(this._is_bot())nC._logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(N(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();nC._logInfo("applying feature flags",e),e.forEach(e=>{var t;if(this._flagToExperiments&&null!=(t=this._flagToExperiments)&&t.has(e)){var i,r=this._instance.getFeatureFlag(e),s=null==(i=this._flagToExperiments)?void 0:i.get(e);r&&null!=s&&s.variants[r]&&this._applyTransforms(s.name,r,s.variants[r].transforms)}})}}previewWebExperiment(){var e=nC.getWindowLocation();if(null!=e&&e.search){var t=tf(null==e?void 0:e.search,"__experiment_id"),i=tf(null==e?void 0:e.search,"__experiment_variant");t&&i&&(nC._logInfo("previewing web experiments "+t+" && "+i),this.getWebExperiments(e=>{this._showPreviewWebExperiment(parseInt(t),i,e)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!t)return e(r);this._instance._send_request({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:t=>200===t.statusCode&&t.json?e(t.json.experiments||[]):e([])})}_showPreviewWebExperiment(e,t,i){var r=i.filter(t=>t.id===e);r&&r.length>0&&(nC._logInfo("Previewing web experiment ["+r[0].name+"] with variant ["+t+"]"),this._applyTransforms(r[0].name,t,r[0].variants[t].transforms))}static _matchesTestVariant(e){return!N(e.conditions)&&nC._matchUrlConditions(e)&&nC._matchUTMConditions(e)}static _matchUrlConditions(e){if(N(e.conditions)||N(null==(t=e.conditions)?void 0:t.url))return!0;var t,i,r,s,n=nC.getWindowLocation();return!!n&&(null==(i=e.conditions)||!i.url||nT[null!=(r=null==(s=e.conditions)?void 0:s.urlMatchType)?r:"icontains"](e.conditions.url,n))}static getWindowLocation(){return null==l?void 0:l.location}static _matchUTMConditions(e){if(N(e.conditions)||N(null==(i=e.conditions)?void 0:i.utm))return!0;var t=sB();if(t.utm_source){var i,r,s,n,o,a,l,c,u,d=null==(r=e.conditions)||null==(r=r.utm)||!r.utm_campaign||(null==(s=e.conditions)||null==(s=s.utm)?void 0:s.utm_campaign)==t.utm_campaign,h=null==(n=e.conditions)||null==(n=n.utm)||!n.utm_source||(null==(o=e.conditions)||null==(o=o.utm)?void 0:o.utm_source)==t.utm_source,_=null==(a=e.conditions)||null==(a=a.utm)||!a.utm_medium||(null==(l=e.conditions)||null==(l=l.utm)?void 0:l.utm_medium)==t.utm_medium,p=null==(c=e.conditions)||null==(c=c.utm)||!c.utm_term||(null==(u=e.conditions)||null==(u=u.utm)?void 0:u.utm_term)==t.utm_term;return d&&_&&p&&h}return!1}static _logInfo(e){for(var t=arguments.length,i=Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];Y.info("[WebExperiments] "+e,i)}_applyTransforms(e,t,i){this._is_bot()?nC._logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?i.forEach(i=>{if(i.selector){nC._logInfo("applying transform of variant "+t+" for experiment "+e+" ",i);var r,s=null==(r=document)?void 0:r.querySelectorAll(i.selector);null==s||s.forEach(e=>{i.html&&(e.innerHTML=i.html),i.css&&e.setAttribute("style",i.css)})}}):nC._logInfo("Control variants leave the page unmodified.")}_is_bot(){return _&&this._instance?nE(_,this._instance.config.custom_blocked_useragents):void 0}}var nF=J("[PostHog ExternalIntegrations]"),nP={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class nO{constructor(e){this._instance=e}_loadScript(e,t){var i;null==(i=b.__PosthogExtensions__)||null==i.loadExternalDependency||i.loadExternalDependency(this._instance,e,e=>{if(e)return nF.error("failed to load script",e);t()})}startIfEnabledOrStop(){var e,t=this,i=function(e){var i,r,n;!s||null!=(i=b.__PosthogExtensions__)&&null!=(i=i.integrations)&&i[e]||t._loadScript(nP[e],()=>{var i;null==(i=b.__PosthogExtensions__)||null==(i=i.integrations)||null==(i=i[e])||i.start(t._instance)}),!s&&null!=(r=b.__PosthogExtensions__)&&null!=(r=r.integrations)&&r[e]&&(null==(n=b.__PosthogExtensions__)||null==(n=n.integrations)||null==(n=n[e])||n.stop())};for(var[r,s]of Object.entries(null!=(e=this._instance.config.integrations)?e:{}))i(r)}}var n$="[SessionRecording]",nA=J(n$);class nM{get started(){var e;return!(null==(e=this._lazyLoadedSessionRecording)||!e.isStarted)}get status(){var e;return this._isRecordingEnabled?(null==(e=this._lazyLoadedSessionRecording)?void 0:e.status)||"lazy_loading":i6}constructor(e){if(this._forceAllowLocalhostNetworkCapture=!1,this._instance=e,!this._instance.sessionManager)throw nA.error("started without valid sessionManager"),Error(n$+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(n$+' cannot be used with cookieless_mode="always"')}get _isRecordingEnabled(){var e=!!this._instance.get_property(ey),t=!this._instance.config.disable_session_recording,i=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return l&&e&&t&&!i}startIfEnabledOrStop(e){var t;if(!this._isRecordingEnabled||null==(t=this._lazyLoadedSessionRecording)||!t.isStarted){var i=!A(Object.assign)&&!A(Array.from);this._isRecordingEnabled&&i?(this._lazyLoadAndStart(e),nA.info("starting")):this.stopRecording()}}_lazyLoadAndStart(e){var t,i,r;this._isRecordingEnabled&&(null!=b&&null!=(t=b.__PosthogExtensions__)&&null!=(t=t.rrweb)&&t.record&&null!=(i=b.__PosthogExtensions__)&&i.initSessionRecording?this._onScriptLoaded(e):null==(r=b.__PosthogExtensions__)||null==r.loadExternalDependency||r.loadExternalDependency(this._instance,this._scriptName,t=>{if(t)return nA.error("could not load recorder",t);this._onScriptLoaded(e)}))}stopRecording(){var e;null==(e=this._lazyLoadedSessionRecording)||e.stop()}onRemoteConfig(e){this._pendingRemoteConfig=e;var t,i=this._instance.persistence;i&&i.register({[ey]:!!e.sessionRecording,[eI]:null==(t=e.sessionRecording)?void 0:t.scriptConfig}),this._lazyLoadedSessionRecording?(this._lazyLoadedSessionRecording.onRemoteConfig(e),this._pendingRemoteConfig=void 0):this._lazyLoadAndStart(),this.startIfEnabledOrStop()}log(e,t){var i;void 0===t&&(t="log"),null!=(i=this._lazyLoadedSessionRecording)&&i.log?this._lazyLoadedSessionRecording.log(e,t):nA.warn("log called before recorder was ready")}get _scriptName(){var e;return(null==(e=this._instance)||null==(e=e.persistence)||null==(e=e.get_property(eI))?void 0:e.script)||"lazy-recorder"}_onScriptLoaded(e){var t,i;if(null==(t=b.__PosthogExtensions__)||!t.initSessionRecording)throw Error("Called on script loaded before session recording is available");this._lazyLoadedSessionRecording||(this._lazyLoadedSessionRecording=null==(i=b.__PosthogExtensions__)?void 0:i.initSessionRecording(this._instance),this._lazyLoadedSessionRecording._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture,this._pendingRemoteConfig&&(this._lazyLoadedSessionRecording.onRemoteConfig(this._pendingRemoteConfig),this._pendingRemoteConfig=void 0)),this._lazyLoadedSessionRecording.start(e)}onRRwebEmit(e){var t;null==(t=this._lazyLoadedSessionRecording)||null==t.onRRwebEmit||t.onRRwebEmit(e)}overrideLinkedFlag(){var e;null==(e=this._lazyLoadedSessionRecording)||e.overrideLinkedFlag()}overrideSampling(){var e;null==(e=this._lazyLoadedSessionRecording)||e.overrideSampling()}overrideTrigger(e){var t;null==(t=this._lazyLoadedSessionRecording)||t.overrideTrigger(e)}get sdkDebugProperties(){var e;return(null==(e=this._lazyLoadedSessionRecording)?void 0:e.sdkDebugProperties)||{$recording_status:this.status}}}var nL={},nD=()=>{},nN="posthog",nq=!rG&&-1===(null==y?void 0:y.indexOf("MSIE"))&&-1===(null==y?void 0:y.indexOf("Mozilla")),nG=e=>{var t;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:function(e){var t=null==e?void 0:e.hostname;if(!M(t))return!1;var i=t.split(".").slice(-2).join(".");for(var r of en)if(i===r)return!1;return!0}(null==p?void 0:p.location),persistence:"localStorage+cookie",persistence_name:"",loaded:nD,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:"2025-05-24"!==e||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=e?e:"unset",debug:g&&M(null==g?void 0:g.search)&&-1!==g.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==l||null==(t=l.location)?void 0:t.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;Y.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:nD}},nB=e=>{var t={};A(e.process_person)||(t.person_profiles=e.process_person),A(e.xhr_headers)||(t.request_headers=e.xhr_headers),A(e.cookie_name)||(t.persistence_name=e.cookie_name),A(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),A(e.store_google)||(t.save_campaign_params=e.store_google),A(e.verbose)||(t.debug=e.verbose);var i=Z({},t,e);return F(e.property_blacklist)&&(A(e.property_denylist)?i.property_denylist=e.property_blacklist:F(e.property_denylist)?i.property_denylist=[...e.property_blacklist,...e.property_denylist]:Y.error("Invalid value for property_denylist config: "+e.property_denylist)),i};class nz{constructor(){this.__forceAllowLocalhost=!1}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){Y.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class nj{get decideEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}get flagsEndpointWasHit(){var e,t;return null!=(e=null==(t=this.featureFlags)?void 0:t.hasLoadedFlags)&&e}constructor(){this.webPerformance=new nz,this._personProcessingSetOncePropertiesSent=!1,this.version=w.LIB_VERSION,this._internalEventEmitter=new s8,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=nG(),this.SentryIntegration=rx,this.sentryIntegration=e=>(function(e,t){var i=rE(e,t);return{name:rk,processEvent:e=>i(e)}})(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._visibilityStateListener=null,this._initialPersonProfilesConfig=null,this._cachedPersonProperties=null,this.featureFlags=new s3(this),this.toolbar=new rF(this),this.scrollManager=new np(this),this.pageViewManager=new rN(this),this.surveys=new no(this),this.experiments=new nC(this),this.exceptions=new rX(this),this.rateLimiter=new nl(this),this.requestRouter=new nR(this),this.consent=new tz(this),this.externalIntegrations=new nO(this),this.people={set:(e,t,i)=>{var r=M(e)?{[e]:t}:e;this.setPersonProperties(r),null==i||i({})},set_once:(e,t,i)=>{var r=M(e)?{[e]:t}:e;this.setPersonProperties(void 0,r),null==i||i({})}},this.on("eventCaptured",e=>Y.info('send "'+(null==e?void 0:e.event)+'"',e))}init(e,t,i){if(i&&i!==nN){var r,s=null!=(r=nL[i])?r:new nj;return s._init(e,t,i),nL[i]=s,nL[nN][i]=s,s}return this._init(e,t,i)}_init(e,t,i){if(void 0===t&&(t={}),A(e)||L(e))return Y.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Y.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._originalUserConfig=t,this._triggered_notifs=[],t.person_profiles&&(this._initialPersonProfilesConfig=t.person_profiles),this.set_config(Z({},nG(t.defaults),nB(t),{name:i,token:e})),this.config.on_xhr_error&&Y.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=t.disable_compression?void 0:td.GZipJS;var r=this._is_persistence_disabled();this.persistence=new s6(this.config,r),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new s6(o({},this.config,{persistence:"sessionStorage"}),r);var s=o({},this.persistence.props),n=o({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this._requestQueue=new nd(e=>this._send_retriable_request(e),this.config.request_queue_config),this._retryQueue=new n_(this),this.__request_queue=[];var a="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(a||(this.sessionManager=new nm(this),this.sessionPropsManager=new nf(this,this.sessionManager,this.persistence)),new rO(this).startIfEnabledOrStop(),this.siteApps=new nw(this),null==(c=this.siteApps)||c.init(),a||(this.config.__preview_lazy_load_replay?this.sessionRecording=new nM(this):this.sessionRecording=new rw(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new tw(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new rD(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new rA(this),this.exceptionObserver=new tY(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new tW(this,tU),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new ic(this),this.historyAutocapture.startIfEnabled(),w.DEBUG=w.DEBUG||this.config.debug,w.DEBUG&&Y.info("Starting in debug mode",{this:this,config:t,thisC:o({},this.config),p:s,s:n}),void 0!==(null==(u=t.bootstrap)?void 0:u.distinctID)){var c,u,d,h,_=this.config.get_device_id(tT()),p=null!=(d=t.bootstrap)&&d.isIdentifiedID?_:t.bootstrap.distinctID;this.persistence.set_property(eq,null!=(h=t.bootstrap)&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:t.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var g,f,v=Object.keys((null==(g=t.bootstrap)?void 0:g.featureFlags)||{}).filter(e=>{var i;return!(null==(i=t.bootstrap)||null==(i=i.featureFlags)||!i[e])}).reduce((e,i)=>{var r;return e[i]=(null==(r=t.bootstrap)||null==(r=r.featureFlags)?void 0:r[i])||!1,e},{}),m=Object.keys((null==(f=t.bootstrap)?void 0:f.featureFlagPayloads)||{}).filter(e=>v[e]).reduce((e,i)=>{var r,s;return null!=(r=t.bootstrap)&&null!=(r=r.featureFlagPayloads)&&r[i]&&(e[i]=null==(s=t.bootstrap)||null==(s=s.featureFlagPayloads)?void 0:s[i]),e},{});this.featureFlags.receivedFeatureFlags({featureFlags:v,featureFlagPayloads:m})}if(a)this.register_once({distinct_id:eV,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(tT());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(eq,"anonymous")}return ea(l,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),t.segment?function(e,t){var i=e.config.segment;if(!i)return t();!function(e,t){var i=e.config.segment;if(!i)return t();var r=i=>{var r=()=>i.anonymousId()||tT();e.config.get_device_id=r,i.id()&&(e.register({distinct_id:i.id(),$device_id:r()}),e.persistence.set_property(eq,"identified")),t()},s=i.user();"then"in s&&P(s.then)?s.then(e=>r(e)):r(s)}(e,()=>{var r;i.register((Promise&&Promise.resolve||rS.warn("This browser does not have Promise support, and can not use the segment integration"),r=(t,i)=>{if(!i)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(rS.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(rS.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var r=e.calculateEventProperties(i,t.event.properties);return t.event.properties=Object.assign({},r,t.event.properties),t},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>r(e,e.event.event),page:e=>r(e,"$pageview"),identify:e=>r(e,"$identify"),screen:e=>r(e,"$screen")})).then(()=>{t()})})}(this,()=>this._loaded()):this._loaded(),P(this.config._onCapture)&&this.config._onCapture!==nD&&(Y.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",e=>this.config._onCapture(e.event,e))),this.config.ip&&Y.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}_onRemoteConfig(e){var t,i,r,s,n,o,a,l;if(!p||!p.body)return Y.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this._onRemoteConfig(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=k(e.supportedCompression,td.GZipJS)?td.GZipJS:k(e.supportedCompression,td.Base64)?td.Base64:void 0),null!=(t=e.analytics)&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:"identified_only"}),null==(i=this.siteApps)||i.onRemoteConfig(e),null==(r=this.sessionRecording)||r.onRemoteConfig(e),null==(s=this.autocapture)||s.onRemoteConfig(e),null==(n=this.heatmaps)||n.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null==(o=this.webVitalsAutocapture)||o.onRemoteConfig(e),null==(a=this.exceptionObserver)||a.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),null==(l=this.deadClicksAutocapture)||l.onRemoteConfig(e)}_loaded(){try{this.config.loaded(this)}catch(e){Y.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this._captureInitialPageview()},1),new nu(this).load(),this.featureFlags.flags()}_start_queue_if_opted_in(){var e;this.is_capturing()&&this.config.request_batching&&(null==(e=this._requestQueue)||e.enable())}_dom_loaded(){this.is_capturing()&&X(this.__request_queue,e=>this._send_retriable_request(e)),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null==(e=this._requestQueue)||e.unload(),null==(t=this._retryQueue)||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(nq?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=rz(e.url,{ip:+!!this.config.ip}),e.headers=o({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,i,r,s=o({},e);s.timeout=s.timeout||6e4,s.url=rz(s.url,{_:(new Date).getTime().toString(),ver:w.LIB_VERSION,compression:s.compression});var n=null!=(t=s.transport)?t:"fetch",a=null!=(i=null==(r=eo(rU,e=>e.transport===n))?void 0:r.method)?i:rU[0].method;if(!a)throw Error("No available transport method");a(s)})(o({},e,{callback:t=>{var i,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null==(i=(r=this.config).on_request_error)||i.call(r,t)),null==e.callback||e.callback(t)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,i=[],r=[],s=[];X(e,e=>{e&&(F(t=e[0])?s.push(e):P(e)?e.call(this):F(e)&&"alias"===t?i.push(e):F(e)&&-1!==t.indexOf("capture")&&P(this[t])?s.push(e):r.push(e))});var n=function(e,t){X(e,function(e){if(F(e[0])){var i=t;Q(e,function(e){i=i[e[0]].apply(i,e.slice(1))})}else this[e[0]].apply(this,e.slice(1))},t)};n(i,this),n(r,this),n(s,this)}_hasBootstrappedFeatureFlags(){var e,t;return(null==(e=this.config.bootstrap)?void 0:e.featureFlags)&&Object.keys(null==(t=this.config.bootstrap)?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(this.is_capturing())if(!A(e)&&M(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=null!=i&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==s||!s.isRateLimited){null!=t&&t.$current_url&&!M(null==t?void 0:t.$current_url)&&(Y.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==t||delete t.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var n=new Date,a=(null==i?void 0:i.timestamp)||n,l=tT(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,t||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),(null==i?void 0:i.$set)&&(c.$set=null==i?void 0:i.$set);var u,d=this._calculate_set_once_properties(null==i?void 0:i.$set_once);if(d&&(c.$set_once=d),(h=c,_=null!=i&&i._noTruncate?null:this.config.properties_string_max_length,p=e=>M(e)&&!D(_)?e.slice(0,_):e,g=new Set,c=function e(t,i){var r;return t!==Object(t)?p?p(t,i):t:g.has(t)?void 0:(g.add(t),F(t)?(r=[],X(t,t=>{r.push(e(t))})):(r={},Q(t,(t,i)=>{g.has(t)||(r[i]=e(t,i))})),r)}(h)).timestamp=a,A(null==i?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=n),e===s9.DISMISSED||e===s9.SENT){var h,_,p,g,f,v,m,y=null==t?void 0:t[ne.SURVEY_ID],b=null==t?void 0:t[ne.SURVEY_ITERATION];u={id:y,current_iteration:b},localStorage.getItem(nr(u))||localStorage.setItem(nr(u),"true"),c.$set=o({},c.$set,{[(f={id:y,current_iteration:b},m="$survey_"+(v=e===s9.SENT?"responded":"dismissed")+"/"+f.id,f.current_iteration&&f.current_iteration>0&&(m="$survey_"+v+"/"+f.id+"/"+f.current_iteration),m)]:!0})}var w=o({},c.properties.$set,c.$set);if($(w)||this.setPersonPropertiesForFlags(w),!N(this.config.before_send)){var S=this._runBeforeSend(c);if(!S)return;c=S}this._internalEventEmitter.emit("eventCaptured",c);var k={method:"POST",url:null!=(r=null==i?void 0:i._url)?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:null==i?void 0:i._batchKey};return!this.config.request_batching||i&&(null==i||!i._batchKey)||null!=i&&i.send_instantly?this._send_retriable_request(k):this._requestQueue.enqueue(k),c}Y.critical("This capture call is ignored due to client rate limiting.")}}else Y.error("No event name provided to posthog.capture")}else Y.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",t=>e(t.event,t))}calculateEventProperties(e,t,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return t;var n,a=s?void 0:this.persistence.remove_event_timer(e),c=o({},t);if(c.token=this.config.token,c.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(c.$cookieless_mode=!0),"$snapshot"===e){var u=o({},this.persistence.properties(),this.sessionPersistence.properties());return c.distinct_id=u.distinct_id,(!M(c.distinct_id)&&!q(c.distinct_id)||L(c.distinct_id))&&Y.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),c}var d,h=function(e,t){if(!y)return{};var i,r,s=e?ee([],sD,t||[]):[],[n,o]=function(e){for(var t=0;t<sA.length;t++){var[i,r]=sA[t],s=i.exec(e),n=s&&(P(r)?r(s,e):r);if(n)return n}return["",""]}(y);return Z(es({$os:n,$os_version:o,$browser:sP(y,navigator.vendor),$device:sM(y),$device_type:(r=sM(y))===r2||r===r1||"Kobo"===r||"Kindle Fire"===r||r===sS?r0:r===sd||r===s_||r===sh||r===sy?"Console":r===r5?"Wearable":r?rQ:"Desktop",$timezone:sY(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(e){return}}()}),{$current_url:tv(null==g?void 0:g.href,s,sq),$host:null==g?void 0:g.host,$pathname:null==g?void 0:g.pathname,$raw_user_agent:y.length>1e3?y.substring(0,997)+"...":y,$browser_version:s$(y,navigator.vendor),$browser_language:sH(),$browser_language_prefix:"string"==typeof(i=sH())?i.split("-")[0]:void 0,$screen_height:null==l?void 0:l.screen.height,$screen_width:null==l?void 0:l.screen.width,$viewport_height:null==l?void 0:l.innerHeight,$viewport_width:null==l?void 0:l.innerWidth,$lib:"web",$lib_version:w.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:_,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());c.$session_id=_,c.$window_id=f}this.sessionPropsManager&&Z(c,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&Z(c,this.sessionRecording.sdkDebugProperties),c.$sdk_debug_retry_queue_size=null==(n=this._retryQueue)?void 0:n.length}catch(e){c.$sdk_debug_error_capturing_properties=String(e)}if(this.requestRouter.region===nx.CUSTOM&&(c.$lib_custom_api_host=this.config.api_host),d="$pageview"!==e||s?"$pageleave"!==e||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),c=Z(c,d),"$pageview"===e&&p&&(c.title=p.title),!A(a)){var v=i.getTime()-a;c.$duration=parseFloat((v/1e3).toFixed(3))}y&&this.config.opt_out_useragent_filter&&(c.$browser_type=this._is_bot()?"bot":"browser"),(c=Z({},h,this.persistence.properties(),this.sessionPersistence.properties(),c)).$is_identified=this._isIdentified(),F(this.config.property_denylist)?Q(this.config.property_denylist,function(e){delete c[e]}):Y.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var m=this.config.sanitize_properties;m&&(Y.error("sanitize_properties is deprecated. Use before_send instead"),c=m(c,e));var b=this._hasPersonProcessing();return c.$process_person_profile=b,b&&!s&&this._requirePersonProcessing("_calculate_event_properties"),c}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing()||this._personProcessingSetOncePropertiesSent)return e;var t,i=Z({},this.persistence.get_initial_props(),(null==(t=this.sessionPropsManager)?void 0:t.getSetOnceProps())||{},e||{}),r=this.config.sanitize_properties;return r&&(Y.error("sanitize_properties is deprecated. Use before_send instead"),i=r(i,"$set_once")),this._personProcessingSetOncePropertiesSent=!0,$(i)?void 0:i}register(e,t){var i;null==(i=this.persistence)||i.register(e,t)}register_once(e,t,i){var r;null==(r=this.persistence)||r.register_once(e,t,i)}register_for_session(e){var t;null==(t=this.sessionPersistence)||t.register(e)}unregister(e){var t;null==(t=this.persistence)||t.unregister(e)}unregister_for_session(e){var t;null==(t=this.sessionPersistence)||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t,i){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t,i)}getEarlyAccessFeatures(e,t,i){return void 0===t&&(t=!1),this.featureFlags.getEarlyAccessFeatures(e,t,i)}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var t,i;return null!=(t=null==(i=this.sessionManager)?void 0:i.onSessionId(e))?t:()=>{}}getSurveys(e,t){void 0===t&&(t=!1),this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e,t){void 0===t&&(t=!1),this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,t){return void 0===t&&(t=!1),this.surveys.canRenderSurveyAsync(e,t)}identify(e,t,i){if(!this.__loaded||!this.persistence)return Y.uninitializedWarning("posthog.identify");if(q(e)&&(e=e.toString(),Y.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Y.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==eV){if(this._requirePersonProcessing("posthog.identify")){var r=this.get_distinct_id();this.register({$user_id:e}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:r},""),e!==r&&e!==this.get_property(ec)&&(this.unregister(ec),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property(eq)||"anonymous");e!==r&&s?(this.persistence.set_property(eq,"identified"),this.setPersonPropertiesForFlags(o({},i||{},t||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:t||{},$set_once:i||{}}),this._cachedPersonProperties=rV(e,t,i),this.featureFlags.setAnonymousDistinctId(r)):(t||i)&&this.setPersonProperties(t,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(eN))}}else Y.critical('The string "'+eV+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Y.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){if((e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")){var i=rV(this.get_distinct_id(),e,t);this._cachedPersonProperties!==i?(this.setPersonPropertiesForFlags(o({},t||{},e||{})),this.capture("$set",{$set:e||{},$set_once:t||{}}),this._cachedPersonProperties=i):Y.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,t,i){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var r=this.getGroups();r[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:o({},r,{[e]:t})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===t||i||this.reloadFeatureFlags()}}else Y.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,t){void 0===t&&(t=!0),this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,t){void 0===t&&(t=!0),this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){if(Y.info("reset"),!this.__loaded)return Y.uninitializedWarning("posthog.reset");var t,i,r,s,n=this.get_property("$device_id");if(this.consent.reset(),null==(t=this.persistence)||t.clear(),null==(i=this.sessionPersistence)||i.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(r=this.persistence)||r.set_property(eq,"anonymous"),null==(s=this.sessionManager)||s.resetSessionId(),this._cachedPersonProperties=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:eV,$device_id:null},"");else{var o=this.config.get_device_id(tT());this.register_once({distinct_id:o,$device_id:e?o:n},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!=(e=null==(t=this.sessionManager)?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+t);if(null!=e&&e.withTimestamp&&i){var s,n=null!=(s=e.timestampLookBack)?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor(((new Date).getTime()-i)/1e3)-n,0)}return r}alias(e,t){return e===this.get_property(el)?(Y.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(A(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(ec,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(Y.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t=o({},this.config);if(O(e)){Z(this.config,nB(e));var i,r,s,n,a,l=this._is_persistence_disabled();null==(i=this.persistence)||i.update_config(this.config,t,l),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new s6(o({},this.config,{persistence:"sessionStorage"}),l),tA._is_supported()&&"true"===tA._get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(w.DEBUG=!0,Y.info("set_config",{config:e,oldConfig:t,newConfig:o({},this.config)})),null==(r=this.sessionRecording)||r.startIfEnabledOrStop(),null==(s=this.autocapture)||s.startIfEnabled(),null==(n=this.heatmaps)||n.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence(),null==(a=this.externalIntegrations)||a.startIfEnabledOrStop()}}startSessionRecording(e){var t,i,r,s,n,o=!0===e,a={sampling:o||!(null==e||!e.sampling),linked_flag:o||!(null==e||!e.linked_flag),url_trigger:o||!(null==e||!e.url_trigger),event_trigger:o||!(null==e||!e.event_trigger)};Object.values(a).some(Boolean)&&(null==(t=this.sessionManager)||t.checkAndGetSessionAndWindowId(),a.sampling&&(null==(i=this.sessionRecording)||i.overrideSampling()),a.linked_flag&&(null==(r=this.sessionRecording)||r.overrideLinkedFlag()),a.url_trigger&&(null==(s=this.sessionRecording)||s.overrideTrigger("url")),a.event_trigger&&(null==(n=this.sessionRecording)||n.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null==(e=this.sessionRecording)||!e.started)}captureException(e,t){var i=Error("PostHog syntheticException");return this.exceptions.sendExceptionEvent(o({},function(e,t){var{error:i,event:r}=e,s={$exception_list:[]},n=i||r;if(tZ(n)||tQ(n,"DOMException")){if("stack"in n)s=io(n,t);else{var a=n.name||(tZ(n)?"DOMError":"DOMException"),l=n.message?a+": "+n.message:a;s=ia(l,o({},t,{overrideExceptionType:tZ(n)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in n&&(s.$exception_DOMException_code=""+n.code),s}if(tQ(n,"ErrorEvent")&&n.error)return io(n.error,t);if(tX(n))return io(n,t);if(tQ(n,"Object")||tJ(n))return function(e,t){var i,r,s,n=null==(r=null==t?void 0:t.handled)||r,o=null==(s=null==t?void 0:t.synthetic)||s,a={type:null!=t&&t.overrideExceptionType?t.overrideExceptionType:tJ(e)?e.constructor.name:"Error",value:"Non-Error 'exception' captured with keys: "+function(e,t){void 0===t&&(t=40);var i=Object.keys(e);if(i.sort(),!i.length)return"[object has no keys]";for(var r=i.length;r>0;r--){var s=i.slice(0,r).join(", ");if(!(s.length>t))return r===i.length||s.length<=t?s:s.slice(0,t)+"..."}return""}(e),mechanism:{handled:n,synthetic:o}};if(null!=t&&t.syntheticException){var l=ir(null==t?void 0:t.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:M(i=e.level)&&!L(i)&&th.indexOf(i)>=0?e.level:"error"}}(n,t);if(A(i)&&M(r)){var c="Error",u=r,d=r.match(ii);return d&&(c=d[1],u=d[2]),ia(u,o({},t,{overrideExceptionType:c,defaultExceptionMessage:u}))}return ia(n,t)}(e instanceof Error?{error:e,event:e.message}:{event:e},{syntheticException:i}),t))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null==(t=this.persistence)?void 0:t.props[e]}getSessionProperty(e){var t;return null==(t=this.sessionPersistence)?void 0:t.props[e]}toString(){var e,t=null!=(e=this.config.name)?e:nN;return t!==nN&&(t=nN+"."+t),t}_isIdentified(){var e,t;return"identified"===(null==(e=this.persistence)?void 0:e.get_property(eq))||"identified"===(null==(t=this.sessionPersistence)?void 0:t.get_property(eq))}_hasPersonProcessing(){var e,t;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&$(this.getGroups())&&(null==(e=this.persistence)||null==(e=e.props)||!e[ec])&&(null==(t=this.persistence)||null==(t=t.props)||!t[eU]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return"never"===this.config.person_profiles?(Y.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(eU,!0),!0)}_is_persistence_disabled(){if("always"===this.config.cookieless_mode)return!0;var e=this.consent.isOptedOut(),t=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||e&&!!t}_sync_opt_out_with_persistence(){var e,t,i,r,s=this._is_persistence_disabled();return(null==(e=this.persistence)?void 0:e._disabled)!==s&&(null==(i=this.persistence)||i.set_disabled(s)),(null==(t=this.sessionPersistence)?void 0:t._disabled)!==s&&(null==(r=this.sessionPersistence)||r.set_disabled(s)),s}opt_in_capturing(e){if("always"!==this.config.cookieless_mode){var t;"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),this.sessionManager=new nm(this),this.persistence&&(this.sessionPropsManager=new nf(this,this.sessionManager,this.persistence)),this.sessionRecording=new rw(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(A(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!=(t=null==e?void 0:e.captureEventName)?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}else Y.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var e;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this._sync_opt_out_with_persistence(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:eV,$device_id:null}),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(e=this.sessionRecording)||e.stopRecording(),this.sessionRecording=void 0,this._captureInitialPageview())):Y.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var e=this.consent.consent;return e===tB.GRANTED?"granted":e===tB.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return _?nE(_,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){p&&("visible"===p.visibilityState?this._initialPageviewCaptured||(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:p.title},{send_instantly:!0}),this._visibilityStateListener&&(p.removeEventListener("visibilitychange",this._visibilityStateListener),this._visibilityStateListener=null)):this._visibilityStateListener||(this._visibilityStateListener=this._captureInitialPageview.bind(this),ea(p,"visibilitychange",this._visibilityStateListener)))}debug(e){!1===e?(null==l||l.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==l||l.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_shouldDisableFlags(){var e,t,i,r,s=this._originalUserConfig||{};return"advanced_disable_flags"in s?!!s.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(Y.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(t="advanced_disable_decide",i=(e="advanced_disable_flags")in s&&!A(s[e]),r=t in s&&!A(s[t]),i?s[e]:!!r&&(Y&&Y.warn("Config field '"+t+"' is deprecated. Please use '"+e+"' instead. The old field will be removed in a future major version."),s[t]))}_runBeforeSend(e){if(N(this.config.before_send))return e;var t=F(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of t){if(N(i=r(i))){var s="Event '"+e.event+"' was rejected in beforeSend function";return B(e.event)?Y.warn(s+". This can cause unexpected behavior."):Y.info(s),null}i.properties&&!$(i.properties)||Y.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return null==(e=this.pageViewManager._currentPageview)?void 0:e.pageViewId}captureTraceFeedback(e,t){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:t})}captureTraceMetric(e,t,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:t,$ai_metric_value:String(i)})}}!function(e,t){for(var i=0;i<t.length;i++)e.prototype[t[i]]=er(e.prototype[t[i]])}(nj,["identify"]);var nH,nU=(nH=nL[nN]=new nj,function(){function e(){e.done||(e.done=!0,nq=!1,Q(nL,function(e){e._dom_loaded()}))}null!=p&&p.addEventListener?"complete"===p.readyState?e():ea(p,"DOMContentLoaded",e,{capture:!1}):l&&Y.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),nH),nW=i(4232),nV=i(2867),nY=i(9099),nJ=i(3860),nK=i.n(nJ);let nX=e=>{let{Component:t,pageProps:i}=e,s=(0,nY.useRouter)();return(0,nW.useEffect)(()=>{nU.init("kDBqvv-5vPNiTDaYA9jSfKRC-5KhDWqhRQYAc4g3Dp8",{api_host:"https://ph.johackim.com"});let e=()=>nU.capture("$pageview");return s.events.on("routeChangeComplete",e),()=>{s.events.off("routeChangeComplete",e)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nV.FR,{defaultTitle:"Johackim - Hacker ind\xe9pendant",titleTemplate:"%s | Johackim - Hacker ind\xe9pendant",description:"Cr\xe9ateur ind\xe9pendant de projets open-source",openGraph:{url:"https://johackim.com",locale:"fr_FR",site_name:"johackim",type:"website"},twitter:{handle:"@_johackim",site:"@_johackim",cardType:"summary_large_image"}}),(0,r.jsx)(n(),{id:"1c4490d6fc8d3097",dynamic:[nK().style.fontFamily],children:"html{font-family:".concat(nK().style.fontFamily,"}")}),(0,r.jsx)(t,{...i,className:n().dynamic([["1c4490d6fc8d3097",[nK().style.fontFamily]]])+" "+(i&&null!=i.className&&i.className||"")})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[593,792],()=>(t(6556),t(6296))),_N_E=e.O()}]);